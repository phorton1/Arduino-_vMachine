<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ESP3D WebUI</title>
<script>
var target_firmware = "";
</script>
<script>
var web_ui_version = "prh2.1b70";
</script>
<script>
var direct_sd = false;
</script>
<script>
var fw_version = "";
</script>
<script>
var primary_sd = "/ext/";
</script>
<script>
var secondary_sd = "/sd/";
</script>
<!--removeIf(cleanheader)-->
<style>
/*!
* Bootstrap v3.3.7 (http://getbootstrap.com)
* Copyright 2011-2017 Twitter, Inc.
* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
*/

/*!
* Generated using the Bootstrap Customizer (http://getbootstrap.com/customize/?id=9d238c33b30222e403b0f75480cba185)
* Config saved to config.json and https://gist.github.com/9d238c33b30222e403b0f75480cba185
*/
/*!
* Bootstrap v3.3.7 (http://getbootstrap.com)
* Copyright 2011-2016 Twitter, Inc.
* Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
*/
/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */
html {
font-family: sans-serif;
-ms-text-size-adjust: 100%;
-webkit-text-size-adjust: 100%;
}

body {
margin: 0;
}

article,
aside,
details,
figcaption,
figure,
footer,
header,
hgroup,
main,
menu,
nav,
section,
summary {
display: block;
}

audio,
canvas,
progress,
video {
display: inline-block;
vertical-align: baseline;
}

audio:not([controls]) {
display: none;
height: 0;
}

[hidden],
template {
display: none;
}

a {
background-color: transparent;
}

a:active,
a:hover {
outline: 0;
}

abbr[title] {
border-bottom: 1px dotted;
}

b,
strong {
font-weight: bold;
}

dfn {
font-style: italic;
}

h1 {
font-size: 2em;
margin: 0.67em 0;
}

mark {
background: #ff0;
color: #000;
}

small {
font-size: 80%;
}

sub,
sup {
font-size: 75%;
line-height: 0;
position: relative;
vertical-align: baseline;
}

sup {
top: -0.5em;
}

sub {
bottom: -0.25em;
}

img {
border: 0;
}

svg:not(:root) {
overflow: hidden;
}

figure {
margin: 1em 40px;
}

hr {
-webkit-box-sizing: content-box;
-moz-box-sizing: content-box;
box-sizing: content-box;
height: 0;
}

pre {
overflow: auto;
}

code,
kbd,
pre,
samp {
font-family: monospace, monospace;
font-size: 1em;
}

button,
input,
optgroup,
select,
textarea {
color: inherit;
font: inherit;
margin: 0;
}

button {
overflow: visible;
}

button,
select {
text-transform: none;
}

button,
html input[type="button"],
input[type="reset"],
input[type="submit"] {
-webkit-appearance: button;
cursor: pointer;
}

button[disabled],
html input[disabled] {
cursor: default;
}

button::-moz-focus-inner,
input::-moz-focus-inner {
border: 0;
padding: 0;
}

input {
line-height: normal;
}

input[type="checkbox"],
input[type="radio"] {
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
padding: 0;
}

input[type="number"]::-webkit-inner-spin-button,
input[type="number"]::-webkit-outer-spin-button {
height: auto;
}

input[type="search"] {
-webkit-appearance: textfield;
-webkit-box-sizing: content-box;
-moz-box-sizing: content-box;
box-sizing: content-box;
}

input[type="search"]::-webkit-search-cancel-button,
input[type="search"]::-webkit-search-decoration {
-webkit-appearance: none;
}

fieldset {
border: 1px solid #c0c0c0;
margin: 0 2px;
padding: 0.35em 0.625em 0.75em;
}

legend {
border: 0;
padding: 0;
}

textarea {
overflow: auto;
}

optgroup {
font-weight: bold;
}

table {
border-collapse: collapse;
border-spacing: 0;
}

td,
th {
padding: 0;
}

/*! Source: https://github.com/h5bp/html5-boilerplate/blob/master/src/css/main.css */
@media print {

*,
*:before,
*:after {
background: transparent !important;
color: #000 !important;
-webkit-box-shadow: none !important;
box-shadow: none !important;
text-shadow: none !important;
}

a,
a:visited {
text-decoration: underline;
}

a[href]:after {
content: " ("attr(href) ")";
}

abbr[title]:after {
content: " ("attr(title) ")";
}

a[href^="#"]:after,
a[href^="javascript:"]:after {
content: "";
}

pre,
blockquote {
border: 1px solid #999;
page-break-inside: avoid;
}

thead {
display: table-header-group;
}

tr,
img {
page-break-inside: avoid;
}

img {
max-width: 100% !important;
}

p,
h2,
h3 {
orphans: 3;
widows: 3;
}

h2,
h3 {
page-break-after: avoid;
}

.navbar {
display: none;
}

.btn>.caret,
.dropup>.btn>.caret {
border-top-color: #000 !important;
}

.label {
border: 1px solid #000;
}

.table {
border-collapse: collapse !important;
}

.table td,
.table th {
background-color: #fff !important;
}

.table-bordered th,
.table-bordered td {
border: 1px solid #ddd !important;
}
}

* {
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}

*:before,
*:after {
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}

html {
font-size: 10px;
-webkit-tap-highlight-color: rgba(0, 0, 0, 0);
}

body {
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.42857143;
color: #333333;
background-color: #ffffff;
}

input,
button,
select,
textarea {
font-family: inherit;
font-size: inherit;
line-height: inherit;
}

a {
color: #337ab7;
text-decoration: none;
}

a:hover,
a:focus {
color: #23527c;
text-decoration: underline;
}

a:focus {
outline: 5px auto -webkit-focus-ring-color;
outline-offset: -2px;
}

figure {
margin: 0;
}

img {
vertical-align: middle;
}

.img-responsive {
display: block;
max-width: 100%;
height: auto;
}

.img-rounded {
border-radius: 6px;
}

.img-thumbnail {
padding: 4px;
line-height: 1.42857143;
background-color: #ffffff;
border: 1px solid #dddddd;
border-radius: 4px;
-webkit-transition: all 0.2s ease-in-out;
-o-transition: all 0.2s ease-in-out;
transition: all 0.2s ease-in-out;
display: inline-block;
max-width: 100%;
height: auto;
}

.img-circle {
border-radius: 50%;
}

hr {
margin-top: 20px;
margin-bottom: 20px;
border: 0;
border-top: 1px solid #eeeeee;
}

.sr-only {
position: absolute;
width: 1px;
height: 1px;
margin: -1px;
padding: 0;
overflow: hidden;
clip: rect(0, 0, 0, 0);
border: 0;
}

.sr-only-focusable:active,
.sr-only-focusable:focus {
position: static;
width: auto;
height: auto;
margin: 0;
overflow: visible;
clip: auto;
}

[role="button"] {
cursor: pointer;
}

h1,
h2,
h3,
h4,
h5,
h6,
.h1,
.h2,
.h3,
.h4,
.h5,
.h6 {
font-family: inherit;
font-weight: 500;
line-height: 1.1;
color: inherit;
}

h1 small,
h2 small,
h3 small,
h4 small,
h5 small,
h6 small,
.h1 small,
.h2 small,
.h3 small,
.h4 small,
.h5 small,
.h6 small,
h1 .small,
h2 .small,
h3 .small,
h4 .small,
h5 .small,
h6 .small,
.h1 .small,
.h2 .small,
.h3 .small,
.h4 .small,
.h5 .small,
.h6 .small {
font-weight: normal;
line-height: 1;
color: #777777;
}

h1,
.h1,
h2,
.h2,
h3,
.h3 {
margin-top: 20px;
margin-bottom: 10px;
}

h1 small,
.h1 small,
h2 small,
.h2 small,
h3 small,
.h3 small,
h1 .small,
.h1 .small,
h2 .small,
.h2 .small,
h3 .small,
.h3 .small {
font-size: 65%;
}

h4,
.h4,
h5,
.h5,
h6,
.h6 {
margin-top: 10px;
margin-bottom: 10px;
}

h4 small,
.h4 small,
h5 small,
.h5 small,
h6 small,
.h6 small,
h4 .small,
.h4 .small,
h5 .small,
.h5 .small,
h6 .small,
.h6 .small {
font-size: 75%;
}

h1,
.h1 {
font-size: 36px;
}

h2,
.h2 {
font-size: 30px;
}

h3,
.h3 {
font-size: 24px;
}

h4,
.h4 {
font-size: 18px;
}

h5,
.h5 {
font-size: 14px;
}

h6,
.h6 {
font-size: 12px;
}

p {
margin: 0 0 10px;
}

.lead {
margin-bottom: 20px;
font-size: 16px;
font-weight: 300;
line-height: 1.4;
}

@media (min-width: 768px) {
.lead {
font-size: 21px;
}
}

small,
.small {
font-size: 85%;
}

mark,
.mark {
background-color: #fcf8e3;
padding: .2em;
}

.text-left {
text-align: left;
}

.text-right {
text-align: right;
}

.text-center {
text-align: center;
}

.text-justify {
text-align: justify;
}

.text-nowrap {
white-space: nowrap;
}

.text-lowercase {
text-transform: lowercase;
}

.text-uppercase {
text-transform: uppercase;
}

.text-capitalize {
text-transform: capitalize;
}

.text-muted {
color: #777777;
}

.text-primary {
color: #337ab7;
}

a.text-primary:hover,
a.text-primary:focus {
color: #286090;
}

.text-success {
color: #3c763d;
}

a.text-success:hover,
a.text-success:focus {
color: #2b542c;
}

.text-info {
color: #31708f;
}

a.text-info:hover,
a.text-info:focus {
color: #245269;
}

.text-warning {
color: #8a6d3b;
}

a.text-warning:hover,
a.text-warning:focus {
color: #66512c;
}

.text-danger {
color: #a94442;
}

a.text-danger:hover,
a.text-danger:focus {
color: #843534;
}

.bg-primary {
color: #fff;
background-color: #337ab7;
}

a.bg-primary:hover,
a.bg-primary:focus {
background-color: #286090;
}

.bg-success {
background-color: #dff0d8;
}

a.bg-success:hover,
a.bg-success:focus {
background-color: #c1e2b3;
}

.bg-info {
background-color: #d9edf7;
}

a.bg-info:hover,
a.bg-info:focus {
background-color: #afd9ee;
}

.bg-warning {
background-color: #fcf8e3;
}

a.bg-warning:hover,
a.bg-warning:focus {
background-color: #f7ecb5;
}

.bg-danger {
background-color: #f2dede;
}

a.bg-danger:hover,
a.bg-danger:focus {
background-color: #e4b9b9;
}

.page-header {
padding-bottom: 9px;
margin: 40px 0 20px;
border-bottom: 1px solid #eeeeee;
}

ul,
ol {
margin-top: 0;
margin-bottom: 10px;
}

ul ul,
ol ul,
ul ol,
ol ol {
margin-bottom: 0;
}

.list-unstyled {
padding-left: 0;
list-style: none;
}

.list-inline {
padding-left: 0;
list-style: none;
margin-left: -5px;
}

.list-inline>li {
display: inline-block;
padding-left: 5px;
padding-right: 5px;
}

dl {
margin-top: 0;
margin-bottom: 20px;
}

dt,
dd {
line-height: 1.42857143;
}

dt {
font-weight: bold;
}

dd {
margin-left: 0;
}

@media (min-width: 768px) {
.dl-horizontal dt {
float: left;
width: 160px;
clear: left;
text-align: right;
overflow: hidden;
text-overflow: ellipsis;
white-space: nowrap;
}

.dl-horizontal dd {
margin-left: 180px;
}
}

abbr[title],
abbr[data-original-title] {
cursor: help;
border-bottom: 1px dotted #777777;
}

.initialism {
font-size: 90%;
text-transform: uppercase;
}

blockquote {
padding: 10px 20px;
margin: 0 0 20px;
font-size: 17.5px;
border-left: 5px solid #eeeeee;
}

blockquote p:last-child,
blockquote ul:last-child,
blockquote ol:last-child {
margin-bottom: 0;
}

blockquote footer,
blockquote small,
blockquote .small {
display: block;
font-size: 80%;
line-height: 1.42857143;
color: #777777;
}

blockquote footer:before,
blockquote small:before,
blockquote .small:before {
content: '\2014 \00A0';
}

.blockquote-reverse,
blockquote.pull-right {
padding-right: 15px;
padding-left: 0;
border-right: 5px solid #eeeeee;
border-left: 0;
text-align: right;
}

.blockquote-reverse footer:before,
blockquote.pull-right footer:before,
.blockquote-reverse small:before,
blockquote.pull-right small:before,
.blockquote-reverse .small:before,
blockquote.pull-right .small:before {
content: '';
}

.blockquote-reverse footer:after,
blockquote.pull-right footer:after,
.blockquote-reverse small:after,
blockquote.pull-right small:after,
.blockquote-reverse .small:after,
blockquote.pull-right .small:after {
content: '\00A0 \2014';
}

address {
margin-bottom: 20px;
font-style: normal;
line-height: 1.42857143;
}

code,
kbd,
pre,
samp {
font-family: Menlo, Monaco, Consolas, "Courier New", monospace;
}

code {
padding: 2px 4px;
font-size: 90%;
color: #c7254e;
background-color: #f9f2f4;
border-radius: 4px;
}

kbd {
padding: 2px 4px;
font-size: 90%;
color: #ffffff;
background-color: #333333;
border-radius: 3px;
-webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.25);
}

kbd kbd {
padding: 0;
font-size: 100%;
font-weight: bold;
-webkit-box-shadow: none;
box-shadow: none;
}

pre {
display: block;
padding: 9.5px;
margin: 0 0 10px;
font-size: 13px;
line-height: 1.42857143;
word-break: break-all;
word-wrap: break-word;
color: #333333;
background-color: #f5f5f5;
border: 1px solid #cccccc;
border-radius: 4px;
}

pre code {
padding: 0;
font-size: inherit;
color: inherit;
white-space: pre-wrap;
background-color: transparent;
border-radius: 0;
}

.pre-scrollable {
max-height: 340px;
overflow-y: scroll;
}

.container {
margin-right: auto;
margin-left: auto;
padding-left: 15px;
padding-right: 15px;
}

@media (min-width: 768px) {
.container {
width: 750px;
}
}

@media (min-width: 992px) {
.container {
width: 970px;
}
}

@media (min-width: 1200px) {
.container {
width: 1170px;
}
}

.container-fluid {
margin-right: auto;
margin-left: auto;
padding-left: 15px;
padding-right: 15px;
}

.row {
margin-left: -15px;
margin-right: -15px;
}

.col-xs-1,
.col-sm-1,
.col-md-1,
.col-lg-1,
.col-xs-2,
.col-sm-2,
.col-md-2,
.col-lg-2,
.col-xs-3,
.col-sm-3,
.col-md-3,
.col-lg-3,
.col-xs-4,
.col-sm-4,
.col-md-4,
.col-lg-4,
.col-xs-5,
.col-sm-5,
.col-md-5,
.col-lg-5,
.col-xs-6,
.col-sm-6,
.col-md-6,
.col-lg-6,
.col-xs-7,
.col-sm-7,
.col-md-7,
.col-lg-7,
.col-xs-8,
.col-sm-8,
.col-md-8,
.col-lg-8,
.col-xs-9,
.col-sm-9,
.col-md-9,
.col-lg-9,
.col-xs-10,
.col-sm-10,
.col-md-10,
.col-lg-10,
.col-xs-11,
.col-sm-11,
.col-md-11,
.col-lg-11,
.col-xs-12,
.col-sm-12,
.col-md-12,
.col-lg-12 {
position: relative;
min-height: 1px;
padding-left: 15px;
padding-right: 15px;
}

.col-xs-1,
.col-xs-2,
.col-xs-3,
.col-xs-4,
.col-xs-5,
.col-xs-6,
.col-xs-7,
.col-xs-8,
.col-xs-9,
.col-xs-10,
.col-xs-11,
.col-xs-12 {
float: left;
}

.col-xs-12 {
width: 100%;
}

.col-xs-11 {
width: 91.66666667%;
}

.col-xs-10 {
width: 83.33333333%;
}

.col-xs-9 {
width: 75%;
}

.col-xs-8 {
width: 66.66666667%;
}

.col-xs-7 {
width: 58.33333333%;
}

.col-xs-6 {
width: 50%;
}

.col-xs-5 {
width: 41.66666667%;
}

.col-xs-4 {
width: 33.33333333%;
}

.col-xs-3 {
width: 25%;
}

.col-xs-2 {
width: 16.66666667%;
}

.col-xs-1 {
width: 8.33333333%;
}

.col-xs-pull-12 {
right: 100%;
}

.col-xs-pull-11 {
right: 91.66666667%;
}

.col-xs-pull-10 {
right: 83.33333333%;
}

.col-xs-pull-9 {
right: 75%;
}

.col-xs-pull-8 {
right: 66.66666667%;
}

.col-xs-pull-7 {
right: 58.33333333%;
}

.col-xs-pull-6 {
right: 50%;
}

.col-xs-pull-5 {
right: 41.66666667%;
}

.col-xs-pull-4 {
right: 33.33333333%;
}

.col-xs-pull-3 {
right: 25%;
}

.col-xs-pull-2 {
right: 16.66666667%;
}

.col-xs-pull-1 {
right: 8.33333333%;
}

.col-xs-pull-0 {
right: auto;
}

.col-xs-push-12 {
left: 100%;
}

.col-xs-push-11 {
left: 91.66666667%;
}

.col-xs-push-10 {
left: 83.33333333%;
}

.col-xs-push-9 {
left: 75%;
}

.col-xs-push-8 {
left: 66.66666667%;
}

.col-xs-push-7 {
left: 58.33333333%;
}

.col-xs-push-6 {
left: 50%;
}

.col-xs-push-5 {
left: 41.66666667%;
}

.col-xs-push-4 {
left: 33.33333333%;
}

.col-xs-push-3 {
left: 25%;
}

.col-xs-push-2 {
left: 16.66666667%;
}

.col-xs-push-1 {
left: 8.33333333%;
}

.col-xs-push-0 {
left: auto;
}

.col-xs-offset-12 {
margin-left: 100%;
}

.col-xs-offset-11 {
margin-left: 91.66666667%;
}

.col-xs-offset-10 {
margin-left: 83.33333333%;
}

.col-xs-offset-9 {
margin-left: 75%;
}

.col-xs-offset-8 {
margin-left: 66.66666667%;
}

.col-xs-offset-7 {
margin-left: 58.33333333%;
}

.col-xs-offset-6 {
margin-left: 50%;
}

.col-xs-offset-5 {
margin-left: 41.66666667%;
}

.col-xs-offset-4 {
margin-left: 33.33333333%;
}

.col-xs-offset-3 {
margin-left: 25%;
}

.col-xs-offset-2 {
margin-left: 16.66666667%;
}

.col-xs-offset-1 {
margin-left: 8.33333333%;
}

.col-xs-offset-0 {
margin-left: 0%;
}

@media (min-width: 768px) {

.col-sm-1,
.col-sm-2,
.col-sm-3,
.col-sm-4,
.col-sm-5,
.col-sm-6,
.col-sm-7,
.col-sm-8,
.col-sm-9,
.col-sm-10,
.col-sm-11,
.col-sm-12 {
float: left;
}

.col-sm-12 {
width: 100%;
}

.col-sm-11 {
width: 91.66666667%;
}

.col-sm-10 {
width: 83.33333333%;
}

.col-sm-9 {
width: 75%;
}

.col-sm-8 {
width: 66.66666667%;
}

.col-sm-7 {
width: 58.33333333%;
}

.col-sm-6 {
width: 50%;
}

.col-sm-5 {
width: 41.66666667%;
}

.col-sm-4 {
width: 33.33333333%;
}

.col-sm-3 {
width: 25%;
}

.col-sm-2 {
width: 16.66666667%;
}

.col-sm-1 {
width: 8.33333333%;
}

.col-sm-pull-12 {
right: 100%;
}

.col-sm-pull-11 {
right: 91.66666667%;
}

.col-sm-pull-10 {
right: 83.33333333%;
}

.col-sm-pull-9 {
right: 75%;
}

.col-sm-pull-8 {
right: 66.66666667%;
}

.col-sm-pull-7 {
right: 58.33333333%;
}

.col-sm-pull-6 {
right: 50%;
}

.col-sm-pull-5 {
right: 41.66666667%;
}

.col-sm-pull-4 {
right: 33.33333333%;
}

.col-sm-pull-3 {
right: 25%;
}

.col-sm-pull-2 {
right: 16.66666667%;
}

.col-sm-pull-1 {
right: 8.33333333%;
}

.col-sm-pull-0 {
right: auto;
}

.col-sm-push-12 {
left: 100%;
}

.col-sm-push-11 {
left: 91.66666667%;
}

.col-sm-push-10 {
left: 83.33333333%;
}

.col-sm-push-9 {
left: 75%;
}

.col-sm-push-8 {
left: 66.66666667%;
}

.col-sm-push-7 {
left: 58.33333333%;
}

.col-sm-push-6 {
left: 50%;
}

.col-sm-push-5 {
left: 41.66666667%;
}

.col-sm-push-4 {
left: 33.33333333%;
}

.col-sm-push-3 {
left: 25%;
}

.col-sm-push-2 {
left: 16.66666667%;
}

.col-sm-push-1 {
left: 8.33333333%;
}

.col-sm-push-0 {
left: auto;
}

.col-sm-offset-12 {
margin-left: 100%;
}

.col-sm-offset-11 {
margin-left: 91.66666667%;
}

.col-sm-offset-10 {
margin-left: 83.33333333%;
}

.col-sm-offset-9 {
margin-left: 75%;
}

.col-sm-offset-8 {
margin-left: 66.66666667%;
}

.col-sm-offset-7 {
margin-left: 58.33333333%;
}

.col-sm-offset-6 {
margin-left: 50%;
}

.col-sm-offset-5 {
margin-left: 41.66666667%;
}

.col-sm-offset-4 {
margin-left: 33.33333333%;
}

.col-sm-offset-3 {
margin-left: 25%;
}

.col-sm-offset-2 {
margin-left: 16.66666667%;
}

.col-sm-offset-1 {
margin-left: 8.33333333%;
}

.col-sm-offset-0 {
margin-left: 0%;
}
}

@media (min-width: 992px) {

.col-md-1,
.col-md-2,
.col-md-3,
.col-md-4,
.col-md-5,
.col-md-6,
.col-md-7,
.col-md-8,
.col-md-9,
.col-md-10,
.col-md-11,
.col-md-12 {
float: left;
}

.col-md-12 {
width: 100%;
}

.col-md-11 {
width: 91.66666667%;
}

.col-md-10 {
width: 83.33333333%;
}

.col-md-9 {
width: 75%;
}

.col-md-8 {
width: 66.66666667%;
}

.col-md-7 {
width: 58.33333333%;
}

.col-md-6 {
width: 50%;
}

.col-md-5 {
width: 41.66666667%;
}

.col-md-4 {
width: 33.33333333%;
}

.col-md-3 {
width: 25%;
}

.col-md-2 {
width: 16.66666667%;
}

.col-md-1 {
width: 8.33333333%;
}

.col-md-pull-12 {
right: 100%;
}

.col-md-pull-11 {
right: 91.66666667%;
}

.col-md-pull-10 {
right: 83.33333333%;
}

.col-md-pull-9 {
right: 75%;
}

.col-md-pull-8 {
right: 66.66666667%;
}

.col-md-pull-7 {
right: 58.33333333%;
}

.col-md-pull-6 {
right: 50%;
}

.col-md-pull-5 {
right: 41.66666667%;
}

.col-md-pull-4 {
right: 33.33333333%;
}

.col-md-pull-3 {
right: 25%;
}

.col-md-pull-2 {
right: 16.66666667%;
}

.col-md-pull-1 {
right: 8.33333333%;
}

.col-md-pull-0 {
right: auto;
}

.col-md-push-12 {
left: 100%;
}

.col-md-push-11 {
left: 91.66666667%;
}

.col-md-push-10 {
left: 83.33333333%;
}

.col-md-push-9 {
left: 75%;
}

.col-md-push-8 {
left: 66.66666667%;
}

.col-md-push-7 {
left: 58.33333333%;
}

.col-md-push-6 {
left: 50%;
}

.col-md-push-5 {
left: 41.66666667%;
}

.col-md-push-4 {
left: 33.33333333%;
}

.col-md-push-3 {
left: 25%;
}

.col-md-push-2 {
left: 16.66666667%;
}

.col-md-push-1 {
left: 8.33333333%;
}

.col-md-push-0 {
left: auto;
}

.col-md-offset-12 {
margin-left: 100%;
}

.col-md-offset-11 {
margin-left: 91.66666667%;
}

.col-md-offset-10 {
margin-left: 83.33333333%;
}

.col-md-offset-9 {
margin-left: 75%;
}

.col-md-offset-8 {
margin-left: 66.66666667%;
}

.col-md-offset-7 {
margin-left: 58.33333333%;
}

.col-md-offset-6 {
margin-left: 50%;
}

.col-md-offset-5 {
margin-left: 41.66666667%;
}

.col-md-offset-4 {
margin-left: 33.33333333%;
}

.col-md-offset-3 {
margin-left: 25%;
}

.col-md-offset-2 {
margin-left: 16.66666667%;
}

.col-md-offset-1 {
margin-left: 8.33333333%;
}

.col-md-offset-0 {
margin-left: 0%;
}
}

@media (min-width: 1200px) {

.col-lg-1,
.col-lg-2,
.col-lg-3,
.col-lg-4,
.col-lg-5,
.col-lg-6,
.col-lg-7,
.col-lg-8,
.col-lg-9,
.col-lg-10,
.col-lg-11,
.col-lg-12 {
float: left;
}

.col-lg-12 {
width: 100%;
}

.col-lg-11 {
width: 91.66666667%;
}

.col-lg-10 {
width: 83.33333333%;
}

.col-lg-9 {
width: 75%;
}

.col-lg-8 {
width: 66.66666667%;
}

.col-lg-7 {
width: 58.33333333%;
}

.col-lg-6 {
width: 50%;
}

.col-lg-5 {
width: 41.66666667%;
}

.col-lg-4 {
width: 33.33333333%;
}

.col-lg-3 {
width: 25%;
}

.col-lg-2 {
width: 16.66666667%;
}

.col-lg-1 {
width: 8.33333333%;
}

.col-lg-pull-12 {
right: 100%;
}

.col-lg-pull-11 {
right: 91.66666667%;
}

.col-lg-pull-10 {
right: 83.33333333%;
}

.col-lg-pull-9 {
right: 75%;
}

.col-lg-pull-8 {
right: 66.66666667%;
}

.col-lg-pull-7 {
right: 58.33333333%;
}

.col-lg-pull-6 {
right: 50%;
}

.col-lg-pull-5 {
right: 41.66666667%;
}

.col-lg-pull-4 {
right: 33.33333333%;
}

.col-lg-pull-3 {
right: 25%;
}

.col-lg-pull-2 {
right: 16.66666667%;
}

.col-lg-pull-1 {
right: 8.33333333%;
}

.col-lg-pull-0 {
right: auto;
}

.col-lg-push-12 {
left: 100%;
}

.col-lg-push-11 {
left: 91.66666667%;
}

.col-lg-push-10 {
left: 83.33333333%;
}

.col-lg-push-9 {
left: 75%;
}

.col-lg-push-8 {
left: 66.66666667%;
}

.col-lg-push-7 {
left: 58.33333333%;
}

.col-lg-push-6 {
left: 50%;
}

.col-lg-push-5 {
left: 41.66666667%;
}

.col-lg-push-4 {
left: 33.33333333%;
}

.col-lg-push-3 {
left: 25%;
}

.col-lg-push-2 {
left: 16.66666667%;
}

.col-lg-push-1 {
left: 8.33333333%;
}

.col-lg-push-0 {
left: auto;
}

.col-lg-offset-12 {
margin-left: 100%;
}

.col-lg-offset-11 {
margin-left: 91.66666667%;
}

.col-lg-offset-10 {
margin-left: 83.33333333%;
}

.col-lg-offset-9 {
margin-left: 75%;
}

.col-lg-offset-8 {
margin-left: 66.66666667%;
}

.col-lg-offset-7 {
margin-left: 58.33333333%;
}

.col-lg-offset-6 {
margin-left: 50%;
}

.col-lg-offset-5 {
margin-left: 41.66666667%;
}

.col-lg-offset-4 {
margin-left: 33.33333333%;
}

.col-lg-offset-3 {
margin-left: 25%;
}

.col-lg-offset-2 {
margin-left: 16.66666667%;
}

.col-lg-offset-1 {
margin-left: 8.33333333%;
}

.col-lg-offset-0 {
margin-left: 0%;
}
}

table {
background-color: transparent;
}

caption {
padding-top: 8px;
padding-bottom: 8px;
color: #777777;
text-align: left;
}

th {
text-align: left;
}

.table {
width: 100%;
max-width: 100%;
margin-bottom: 20px;
}

.table>thead>tr>th,
.table>tbody>tr>th,
.table>tfoot>tr>th,
.table>thead>tr>td,
.table>tbody>tr>td,
.table>tfoot>tr>td {
padding: 8px;
line-height: 1.42857143;
vertical-align: top;
border-top: 1px solid #dddddd;
}

.table>thead>tr>th {
vertical-align: bottom;
border-bottom: 2px solid #dddddd;
}

.table>caption+thead>tr:first-child>th,
.table>colgroup+thead>tr:first-child>th,
.table>thead:first-child>tr:first-child>th,
.table>caption+thead>tr:first-child>td,
.table>colgroup+thead>tr:first-child>td,
.table>thead:first-child>tr:first-child>td {
border-top: 0;
}

.table>tbody+tbody {
border-top: 2px solid #dddddd;
}

.table .table {
background-color: #ffffff;
}

.table-condensed>thead>tr>th,
.table-condensed>tbody>tr>th,
.table-condensed>tfoot>tr>th,
.table-condensed>thead>tr>td,
.table-condensed>tbody>tr>td,
.table-condensed>tfoot>tr>td {
padding: 5px;
}

.table-bordered {
border: 1px solid #dddddd;
}

.table-bordered>thead>tr>th,
.table-bordered>tbody>tr>th,
.table-bordered>tfoot>tr>th,
.table-bordered>thead>tr>td,
.table-bordered>tbody>tr>td,
.table-bordered>tfoot>tr>td {
border: 1px solid #dddddd;
}

.table-bordered>thead>tr>th,
.table-bordered>thead>tr>td {
border-bottom-width: 2px;
}

.table-striped>tbody>tr:nth-of-type(odd) {
background-color: #f9f9f9;
}

.table-hover>tbody>tr:hover {
background-color: #f5f5f5;
}

table col[class*="col-"] {
position: static;
float: none;
display: table-column;
}

table td[class*="col-"],
table th[class*="col-"] {
position: static;
float: none;
display: table-cell;
}

.table>thead>tr>td.active,
.table>tbody>tr>td.active,
.table>tfoot>tr>td.active,
.table>thead>tr>th.active,
.table>tbody>tr>th.active,
.table>tfoot>tr>th.active,
.table>thead>tr.active>td,
.table>tbody>tr.active>td,
.table>tfoot>tr.active>td,
.table>thead>tr.active>th,
.table>tbody>tr.active>th,
.table>tfoot>tr.active>th {
background-color: #f5f5f5;
}

.table-hover>tbody>tr>td.active:hover,
.table-hover>tbody>tr>th.active:hover,
.table-hover>tbody>tr.active:hover>td,
.table-hover>tbody>tr:hover>.active,
.table-hover>tbody>tr.active:hover>th {
background-color: #e8e8e8;
}

.table>thead>tr>td.success,
.table>tbody>tr>td.success,
.table>tfoot>tr>td.success,
.table>thead>tr>th.success,
.table>tbody>tr>th.success,
.table>tfoot>tr>th.success,
.table>thead>tr.success>td,
.table>tbody>tr.success>td,
.table>tfoot>tr.success>td,
.table>thead>tr.success>th,
.table>tbody>tr.success>th,
.table>tfoot>tr.success>th {
background-color: #dff0d8;
}

.table-hover>tbody>tr>td.success:hover,
.table-hover>tbody>tr>th.success:hover,
.table-hover>tbody>tr.success:hover>td,
.table-hover>tbody>tr:hover>.success,
.table-hover>tbody>tr.success:hover>th {
background-color: #d0e9c6;
}

.table>thead>tr>td.info,
.table>tbody>tr>td.info,
.table>tfoot>tr>td.info,
.table>thead>tr>th.info,
.table>tbody>tr>th.info,
.table>tfoot>tr>th.info,
.table>thead>tr.info>td,
.table>tbody>tr.info>td,
.table>tfoot>tr.info>td,
.table>thead>tr.info>th,
.table>tbody>tr.info>th,
.table>tfoot>tr.info>th {
background-color: #d9edf7;
}

.table-hover>tbody>tr>td.info:hover,
.table-hover>tbody>tr>th.info:hover,
.table-hover>tbody>tr.info:hover>td,
.table-hover>tbody>tr:hover>.info,
.table-hover>tbody>tr.info:hover>th {
background-color: #c4e3f3;
}

.table>thead>tr>td.warning,
.table>tbody>tr>td.warning,
.table>tfoot>tr>td.warning,
.table>thead>tr>th.warning,
.table>tbody>tr>th.warning,
.table>tfoot>tr>th.warning,
.table>thead>tr.warning>td,
.table>tbody>tr.warning>td,
.table>tfoot>tr.warning>td,
.table>thead>tr.warning>th,
.table>tbody>tr.warning>th,
.table>tfoot>tr.warning>th {
background-color: #fcf8e3;
}

.table-hover>tbody>tr>td.warning:hover,
.table-hover>tbody>tr>th.warning:hover,
.table-hover>tbody>tr.warning:hover>td,
.table-hover>tbody>tr:hover>.warning,
.table-hover>tbody>tr.warning:hover>th {
background-color: #faf2cc;
}

.table>thead>tr>td.danger,
.table>tbody>tr>td.danger,
.table>tfoot>tr>td.danger,
.table>thead>tr>th.danger,
.table>tbody>tr>th.danger,
.table>tfoot>tr>th.danger,
.table>thead>tr.danger>td,
.table>tbody>tr.danger>td,
.table>tfoot>tr.danger>td,
.table>thead>tr.danger>th,
.table>tbody>tr.danger>th,
.table>tfoot>tr.danger>th {
background-color: #f2dede;
}

.table-hover>tbody>tr>td.danger:hover,
.table-hover>tbody>tr>th.danger:hover,
.table-hover>tbody>tr.danger:hover>td,
.table-hover>tbody>tr:hover>.danger,
.table-hover>tbody>tr.danger:hover>th {
background-color: #ebcccc;
}

.table-responsive {
overflow-x: auto;
min-height: 0.01%;
}

@media screen and (max-width: 767px) {
.table-responsive {
width: 100%;
margin-bottom: 15px;
overflow-y: hidden;
-ms-overflow-style: -ms-autohiding-scrollbar;
border: 1px solid #dddddd;
}

.table-responsive>.table {
margin-bottom: 0;
}

.table-responsive>.table>thead>tr>th,
.table-responsive>.table>tbody>tr>th,
.table-responsive>.table>tfoot>tr>th,
.table-responsive>.table>thead>tr>td,
.table-responsive>.table>tbody>tr>td,
.table-responsive>.table>tfoot>tr>td {
white-space: nowrap;
}

.table-responsive>.table-bordered {
border: 0;
}

.table-responsive>.table-bordered>thead>tr>th:first-child,
.table-responsive>.table-bordered>tbody>tr>th:first-child,
.table-responsive>.table-bordered>tfoot>tr>th:first-child,
.table-responsive>.table-bordered>thead>tr>td:first-child,
.table-responsive>.table-bordered>tbody>tr>td:first-child,
.table-responsive>.table-bordered>tfoot>tr>td:first-child {
border-left: 0;
}

.table-responsive>.table-bordered>thead>tr>th:last-child,
.table-responsive>.table-bordered>tbody>tr>th:last-child,
.table-responsive>.table-bordered>tfoot>tr>th:last-child,
.table-responsive>.table-bordered>thead>tr>td:last-child,
.table-responsive>.table-bordered>tbody>tr>td:last-child,
.table-responsive>.table-bordered>tfoot>tr>td:last-child {
border-right: 0;
}

.table-responsive>.table-bordered>tbody>tr:last-child>th,
.table-responsive>.table-bordered>tfoot>tr:last-child>th,
.table-responsive>.table-bordered>tbody>tr:last-child>td,
.table-responsive>.table-bordered>tfoot>tr:last-child>td {
border-bottom: 0;
}
}

fieldset {
padding: 0;
margin: 0;
border: 0;
min-width: 0;
}

legend {
display: block;
width: 100%;
padding: 0;
margin-bottom: 20px;
font-size: 21px;
line-height: inherit;
color: #333333;
border: 0;
border-bottom: 1px solid #e5e5e5;
}

label {
display: inline-block;
max-width: 100%;
margin-bottom: 5px;
font-weight: bold;
}

input[type="search"] {
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
box-sizing: border-box;
}

input[type="radio"],
input[type="checkbox"] {
margin: 4px 0 0;
margin-top: 1px \9;
line-height: normal;
}

input[type="file"] {
display: block;
}

input[type="range"] {
display: block;
width: 100%;
}

select[multiple],
select[size] {
height: auto;
}

input[type="file"]:focus,
input[type="radio"]:focus,
input[type="checkbox"]:focus {
outline: 5px auto -webkit-focus-ring-color;
outline-offset: -2px;
}

output {
display: block;
padding-top: 7px;
font-size: 14px;
line-height: 1.42857143;
color: #555555;
}

.form-control {
display: block;
width: 100%;
height: 34px;
padding: 6px 12px;
font-size: 14px;
line-height: 1.42857143;
color: #555555;
background-color: #ffffff;
background-image: none;
border: 1px solid #cccccc;
border-radius: 4px;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-webkit-transition: border-color ease-in-out .15s, -webkit-box-shadow ease-in-out .15s;
-o-transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
transition: border-color ease-in-out .15s, box-shadow ease-in-out .15s;
}

.form-control:focus {
border-color: #66afe9;
outline: 0;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, 0.6);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, .075), 0 0 8px rgba(102, 175, 233, 0.6);
}

.form-control::-moz-placeholder {
color: #999999;
opacity: 1;
}

.form-control:-ms-input-placeholder {
color: #999999;
}

.form-control::-webkit-input-placeholder {
color: #999999;
}

.form-control::-ms-expand {
border: 0;
background-color: transparent;
}

.form-control[disabled],
.form-control[readonly],
fieldset[disabled] .form-control {
background-color: #eeeeee;
opacity: 1;
}

.form-control[disabled],
fieldset[disabled] .form-control {
cursor: not-allowed;
}

textarea.form-control {
height: auto;
}

input[type="search"] {
-webkit-appearance: none;
}

@media screen and (-webkit-min-device-pixel-ratio: 0) {

input[type="date"].form-control,
input[type="time"].form-control,
input[type="datetime-local"].form-control,
input[type="month"].form-control {
line-height: 34px;
}

input[type="date"].input-sm,
input[type="time"].input-sm,
input[type="datetime-local"].input-sm,
input[type="month"].input-sm,
.input-group-sm input[type="date"],
.input-group-sm input[type="time"],
.input-group-sm input[type="datetime-local"],
.input-group-sm input[type="month"] {
line-height: 30px;
}

input[type="date"].input-lg,
input[type="time"].input-lg,
input[type="datetime-local"].input-lg,
input[type="month"].input-lg,
.input-group-lg input[type="date"],
.input-group-lg input[type="time"],
.input-group-lg input[type="datetime-local"],
.input-group-lg input[type="month"] {
line-height: 46px;
}
}

.form-group {
margin-bottom: 15px;
}

.radio,
.checkbox {
position: relative;
display: block;
margin-top: 10px;
margin-bottom: 10px;
}

.radio label,
.checkbox label {
min-height: 20px;
padding-left: 20px;
margin-bottom: 0;
font-weight: normal;
cursor: pointer;
}

.radio input[type="radio"],
.radio-inline input[type="radio"],
.checkbox input[type="checkbox"],
.checkbox-inline input[type="checkbox"] {
position: absolute;
margin-left: -20px;
margin-top: 4px \9;
}

.radio+.radio,
.checkbox+.checkbox {
margin-top: -5px;
}

.radio-inline,
.checkbox-inline {
position: relative;
display: inline-block;
padding-left: 20px;
margin-bottom: 0;
vertical-align: middle;
font-weight: normal;
cursor: pointer;
}

.radio-inline+.radio-inline,
.checkbox-inline+.checkbox-inline {
margin-top: 0;
margin-left: 10px;
}

input[type="radio"][disabled],
input[type="checkbox"][disabled],
input[type="radio"].disabled,
input[type="checkbox"].disabled,
fieldset[disabled] input[type="radio"],
fieldset[disabled] input[type="checkbox"] {
cursor: not-allowed;
}

.radio-inline.disabled,
.checkbox-inline.disabled,
fieldset[disabled] .radio-inline,
fieldset[disabled] .checkbox-inline {
cursor: not-allowed;
}

.radio.disabled label,
.checkbox.disabled label,
fieldset[disabled] .radio label,
fieldset[disabled] .checkbox label {
cursor: not-allowed;
}

.form-control-static {
padding-top: 7px;
padding-bottom: 7px;
margin-bottom: 0;
min-height: 34px;
}

.form-control-static.input-lg,
.form-control-static.input-sm {
padding-left: 0;
padding-right: 0;
}

.input-sm {
height: 30px;
padding: 5px 10px;
font-size: 12px;
line-height: 1.5;
border-radius: 3px;
}

select.input-sm {
height: 30px;
line-height: 30px;
}

textarea.input-sm,
select[multiple].input-sm {
height: auto;
}

.form-group-sm .form-control {
height: 30px;
padding: 5px 10px;
font-size: 12px;
line-height: 1.5;
border-radius: 3px;
}

.form-group-sm select.form-control {
height: 30px;
line-height: 30px;
}

.form-group-sm textarea.form-control,
.form-group-sm select[multiple].form-control {
height: auto;
}

.form-group-sm .form-control-static {
height: 30px;
min-height: 32px;
padding: 6px 10px;
font-size: 12px;
line-height: 1.5;
}

.input-lg {
height: 46px;
padding: 10px 16px;
font-size: 18px;
line-height: 1.3333333;
border-radius: 6px;
}

select.input-lg {
height: 46px;
line-height: 46px;
}

textarea.input-lg,
select[multiple].input-lg {
height: auto;
}

.form-group-lg .form-control {
height: 46px;
padding: 10px 16px;
font-size: 18px;
line-height: 1.3333333;
border-radius: 6px;
}

.form-group-lg select.form-control {
height: 46px;
line-height: 46px;
}

.form-group-lg textarea.form-control,
.form-group-lg select[multiple].form-control {
height: auto;
}

.form-group-lg .form-control-static {
height: 46px;
min-height: 38px;
padding: 11px 16px;
font-size: 18px;
line-height: 1.3333333;
}

.has-feedback {
position: relative;
}

.has-feedback .form-control {
padding-right: 42.5px;
}

.form-control-feedback {
position: absolute;
top: 0;
right: 0;
z-index: 2;
display: block;
width: 34px;
height: 34px;
line-height: 34px;
text-align: center;
pointer-events: none;
}

.input-lg+.form-control-feedback,
.input-group-lg+.form-control-feedback,
.form-group-lg .form-control+.form-control-feedback {
width: 46px;
height: 46px;
line-height: 46px;
}

.input-sm+.form-control-feedback,
.input-group-sm+.form-control-feedback,
.form-group-sm .form-control+.form-control-feedback {
width: 30px;
height: 30px;
line-height: 30px;
}

.has-success .help-block,
.has-success .control-label,
.has-success .radio,
.has-success .checkbox,
.has-success .radio-inline,
.has-success .checkbox-inline,
.has-success.radio label,
.has-success.checkbox label,
.has-success.radio-inline label,
.has-success.checkbox-inline label {
color: #3c763d;
}

.has-success .form-control {
border-color: #3c763d;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.has-success .form-control:focus {
border-color: #2b542c;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #67b168;
}

.has-success .input-group-addon {
color: #3c763d;
border-color: #3c763d;
background-color: #dff0d8;
}

.has-success .form-control-feedback {
color: #3c763d;
}

.has-warning .help-block,
.has-warning .control-label,
.has-warning .radio,
.has-warning .checkbox,
.has-warning .radio-inline,
.has-warning .checkbox-inline,
.has-warning.radio label,
.has-warning.checkbox label,
.has-warning.radio-inline label,
.has-warning.checkbox-inline label {
color: #8a6d3b;
}

.has-warning .form-control {
border-color: #8a6d3b;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.has-warning .form-control:focus {
border-color: #66512c;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #c0a16b;
}

.has-warning .input-group-addon {
color: #8a6d3b;
border-color: #8a6d3b;
background-color: #fcf8e3;
}

.has-warning .form-control-feedback {
color: #8a6d3b;
}

.has-error .help-block,
.has-error .control-label,
.has-error .radio,
.has-error .checkbox,
.has-error .radio-inline,
.has-error .checkbox-inline,
.has-error.radio label,
.has-error.checkbox label,
.has-error.radio-inline label,
.has-error.checkbox-inline label {
color: #a94442;
}

.has-error .form-control {
border-color: #a94442;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
}

.has-error .form-control:focus {
border-color: #843534;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075), 0 0 6px #ce8483;
}

.has-error .input-group-addon {
color: #a94442;
border-color: #a94442;
background-color: #f2dede;
}

.has-error .form-control-feedback {
color: #a94442;
}

.has-feedback label~.form-control-feedback {
top: 25px;
}

.has-feedback label.sr-only~.form-control-feedback {
top: 0;
}

.help-block {
display: block;
margin-top: 5px;
margin-bottom: 10px;
color: #737373;
}

@media (min-width: 768px) {
.form-inline .form-group {
display: inline-block;
margin-bottom: 0;
vertical-align: middle;
}

.form-inline .form-control {
display: inline-block;
width: auto;
vertical-align: middle;
}

.form-inline .form-control-static {
display: inline-block;
}

.form-inline .input-group {
display: inline-table;
vertical-align: middle;
}

.form-inline .input-group .input-group-addon,
.form-inline .input-group .input-group-btn,
.form-inline .input-group .form-control {
width: auto;
}

.form-inline .input-group>.form-control {
width: 100%;
}

.form-inline .control-label {
margin-bottom: 0;
vertical-align: middle;
}

.form-inline .radio,
.form-inline .checkbox {
display: inline-block;
margin-top: 0;
margin-bottom: 0;
vertical-align: middle;
}

.form-inline .radio label,
.form-inline .checkbox label {
padding-left: 0;
}

.form-inline .radio input[type="radio"],
.form-inline .checkbox input[type="checkbox"] {
position: relative;
margin-left: 0;
}

.form-inline .has-feedback .form-control-feedback {
top: 0;
}
}

.form-horizontal .radio,
.form-horizontal .checkbox,
.form-horizontal .radio-inline,
.form-horizontal .checkbox-inline {
margin-top: 0;
margin-bottom: 0;
padding-top: 7px;
}

.form-horizontal .radio,
.form-horizontal .checkbox {
min-height: 27px;
}

.form-horizontal .form-group {
margin-left: -15px;
margin-right: -15px;
}

@media (min-width: 768px) {
.form-horizontal .control-label {
text-align: right;
margin-bottom: 0;
padding-top: 7px;
}
}

.form-horizontal .has-feedback .form-control-feedback {
right: 15px;
}

@media (min-width: 768px) {
.form-horizontal .form-group-lg .control-label {
padding-top: 11px;
font-size: 18px;
}
}

@media (min-width: 768px) {
.form-horizontal .form-group-sm .control-label {
padding-top: 6px;
font-size: 12px;
}
}

.btn {
display: inline-block;
margin-bottom: 0;
font-weight: normal;
text-align: center;
vertical-align: middle;
-ms-touch-action: manipulation;
touch-action: manipulation;
cursor: pointer;
background-image: none;
border: 1px solid transparent;
white-space: nowrap;
padding: 6px 12px;
font-size: 14px;
line-height: 1.42857143;
border-radius: 4px;
-webkit-user-select: none;
-moz-user-select: none;
-ms-user-select: none;
user-select: none;
}

.btn:focus,
.btn:active:focus,
.btn.active:focus,
.btn.focus,
.btn:active.focus,
.btn.active.focus {
outline: 5px auto -webkit-focus-ring-color;
outline-offset: -2px;
}

.btn:hover,
.btn:focus,
.btn.focus {
color: #333333;
text-decoration: none;
}

.btn:active,
.btn.active {
outline: 0;
background-image: none;
-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}

.btn.disabled,
.btn[disabled],
fieldset[disabled] .btn {
cursor: not-allowed;
opacity: 0.65;
filter: alpha(opacity=65);
-webkit-box-shadow: none;
box-shadow: none;
}

a.btn.disabled,
fieldset[disabled] a.btn {
pointer-events: none;
}

.btn-default {
color: #333333;
background-color: #ffffff;
border-color: #cccccc;
}

.btn-default:focus,
.btn-default.focus {
color: #333333;
background-color: #e6e6e6;
border-color: #8c8c8c;
}

.btn-default:hover {
color: #333333;
background-color: #e6e6e6;
border-color: #adadad;
}

.btn-default:active,
.btn-default.active,
.open>.dropdown-toggle.btn-default {
color: #333333;
background-color: #e6e6e6;
border-color: #adadad;
}

.btn-default:active:hover,
.btn-default.active:hover,
.open>.dropdown-toggle.btn-default:hover,
.btn-default:active:focus,
.btn-default.active:focus,
.open>.dropdown-toggle.btn-default:focus,
.btn-default:active.focus,
.btn-default.active.focus,
.open>.dropdown-toggle.btn-default.focus {
color: #333333;
background-color: #d4d4d4;
border-color: #8c8c8c;
}

.btn-default:active,
.btn-default.active,
.open>.dropdown-toggle.btn-default {
background-image: none;
}

.btn-default.disabled:hover,
.btn-default[disabled]:hover,
fieldset[disabled] .btn-default:hover,
.btn-default.disabled:focus,
.btn-default[disabled]:focus,
fieldset[disabled] .btn-default:focus,
.btn-default.disabled.focus,
.btn-default[disabled].focus,
fieldset[disabled] .btn-default.focus {
background-color: #ffffff;
border-color: #cccccc;
}

.btn-default .badge {
color: #ffffff;
background-color: #333333;
}

.btn-primary {
color: #ffffff;
background-color: #337ab7;
border-color: #2e6da4;
}

.btn-primary:focus,
.btn-primary.focus {
color: #ffffff;
background-color: #286090;
border-color: #122b40;
}

.btn-primary:hover {
color: #ffffff;
background-color: #286090;
border-color: #204d74;
}

.btn-primary:active,
.btn-primary.active,
.open>.dropdown-toggle.btn-primary {
color: #ffffff;
background-color: #286090;
border-color: #204d74;
}

.btn-primary:active:hover,
.btn-primary.active:hover,
.open>.dropdown-toggle.btn-primary:hover,
.btn-primary:active:focus,
.btn-primary.active:focus,
.open>.dropdown-toggle.btn-primary:focus,
.btn-primary:active.focus,
.btn-primary.active.focus,
.open>.dropdown-toggle.btn-primary.focus {
color: #ffffff;
background-color: #204d74;
border-color: #122b40;
}

.btn-primary:active,
.btn-primary.active,
.open>.dropdown-toggle.btn-primary {
background-image: none;
}

.btn-primary.disabled:hover,
.btn-primary[disabled]:hover,
fieldset[disabled] .btn-primary:hover,
.btn-primary.disabled:focus,
.btn-primary[disabled]:focus,
fieldset[disabled] .btn-primary:focus,
.btn-primary.disabled.focus,
.btn-primary[disabled].focus,
fieldset[disabled] .btn-primary.focus {
background-color: #337ab7;
border-color: #2e6da4;
}

.btn-primary .badge {
color: #337ab7;
background-color: #ffffff;
}

.btn-success {
color: #ffffff;
background-color: #5cb85c;
border-color: #4cae4c;
}

.btn-success:focus,
.btn-success.focus {
color: #ffffff;
background-color: #449d44;
border-color: #255625;
}

.btn-success:hover {
color: #ffffff;
background-color: #449d44;
border-color: #398439;
}

.btn-success:active,
.btn-success.active,
.open>.dropdown-toggle.btn-success {
color: #ffffff;
background-color: #449d44;
border-color: #398439;
}

.btn-success:active:hover,
.btn-success.active:hover,
.open>.dropdown-toggle.btn-success:hover,
.btn-success:active:focus,
.btn-success.active:focus,
.open>.dropdown-toggle.btn-success:focus,
.btn-success:active.focus,
.btn-success.active.focus,
.open>.dropdown-toggle.btn-success.focus {
color: #ffffff;
background-color: #398439;
border-color: #255625;
}

.btn-success:active,
.btn-success.active,
.open>.dropdown-toggle.btn-success {
background-image: none;
}

.btn-success.disabled:hover,
.btn-success[disabled]:hover,
fieldset[disabled] .btn-success:hover,
.btn-success.disabled:focus,
.btn-success[disabled]:focus,
fieldset[disabled] .btn-success:focus,
.btn-success.disabled.focus,
.btn-success[disabled].focus,
fieldset[disabled] .btn-success.focus {
background-color: #5cb85c;
border-color: #4cae4c;
}

.btn-success .badge {
color: #5cb85c;
background-color: #ffffff;
}

.btn-info {
color: #ffffff;
background-color: #5bc0de;
border-color: #46b8da;
}

.btn-info:focus,
.btn-info.focus {
color: #ffffff;
background-color: #31b0d5;
border-color: #1b6d85;
}

.btn-info:hover {
color: #ffffff;
background-color: #31b0d5;
border-color: #269abc;
}

.btn-info:active,
.btn-info.active,
.open>.dropdown-toggle.btn-info {
color: #ffffff;
background-color: #31b0d5;
border-color: #269abc;
}

.btn-info:active:hover,
.btn-info.active:hover,
.open>.dropdown-toggle.btn-info:hover,
.btn-info:active:focus,
.btn-info.active:focus,
.open>.dropdown-toggle.btn-info:focus,
.btn-info:active.focus,
.btn-info.active.focus,
.open>.dropdown-toggle.btn-info.focus {
color: #ffffff;
background-color: #269abc;
border-color: #1b6d85;
}

.btn-info:active,
.btn-info.active,
.open>.dropdown-toggle.btn-info {
background-image: none;
}

.btn-info.disabled:hover,
.btn-info[disabled]:hover,
fieldset[disabled] .btn-info:hover,
.btn-info.disabled:focus,
.btn-info[disabled]:focus,
fieldset[disabled] .btn-info:focus,
.btn-info.disabled.focus,
.btn-info[disabled].focus,
fieldset[disabled] .btn-info.focus {
background-color: #5bc0de;
border-color: #46b8da;
}

.btn-info .badge {
color: #5bc0de;
background-color: #ffffff;
}

.btn-warning {
color: #ffffff;
background-color: #f0ad4e;
border-color: #eea236;
}

.btn-warning:focus,
.btn-warning.focus {
color: #ffffff;
background-color: #ec971f;
border-color: #985f0d;
}

.btn-warning:hover {
color: #ffffff;
background-color: #ec971f;
border-color: #d58512;
}

.btn-warning:active,
.btn-warning.active,
.open>.dropdown-toggle.btn-warning {
color: #ffffff;
background-color: #ec971f;
border-color: #d58512;
}

.btn-warning:active:hover,
.btn-warning.active:hover,
.open>.dropdown-toggle.btn-warning:hover,
.btn-warning:active:focus,
.btn-warning.active:focus,
.open>.dropdown-toggle.btn-warning:focus,
.btn-warning:active.focus,
.btn-warning.active.focus,
.open>.dropdown-toggle.btn-warning.focus {
color: #ffffff;
background-color: #d58512;
border-color: #985f0d;
}

.btn-warning:active,
.btn-warning.active,
.open>.dropdown-toggle.btn-warning {
background-image: none;
}

.btn-warning.disabled:hover,
.btn-warning[disabled]:hover,
fieldset[disabled] .btn-warning:hover,
.btn-warning.disabled:focus,
.btn-warning[disabled]:focus,
fieldset[disabled] .btn-warning:focus,
.btn-warning.disabled.focus,
.btn-warning[disabled].focus,
fieldset[disabled] .btn-warning.focus {
background-color: #f0ad4e;
border-color: #eea236;
}

.btn-warning .badge {
color: #f0ad4e;
background-color: #ffffff;
}

.btn-danger {
color: #ffffff;
background-color: #d9534f;
border-color: #d43f3a;
}

.btn-danger:focus,
.btn-danger.focus {
color: #ffffff;
background-color: #c9302c;
border-color: #761c19;
}

.btn-danger:hover {
color: #ffffff;
background-color: #c9302c;
border-color: #ac2925;
}

.btn-danger:active,
.btn-danger.active,
.open>.dropdown-toggle.btn-danger {
color: #ffffff;
background-color: #c9302c;
border-color: #ac2925;
}

.btn-danger:active:hover,
.btn-danger.active:hover,
.open>.dropdown-toggle.btn-danger:hover,
.btn-danger:active:focus,
.btn-danger.active:focus,
.open>.dropdown-toggle.btn-danger:focus,
.btn-danger:active.focus,
.btn-danger.active.focus,
.open>.dropdown-toggle.btn-danger.focus {
color: #ffffff;
background-color: #ac2925;
border-color: #761c19;
}

.btn-danger:active,
.btn-danger.active,
.open>.dropdown-toggle.btn-danger {
background-image: none;
}

.btn-danger.disabled:hover,
.btn-danger[disabled]:hover,
fieldset[disabled] .btn-danger:hover,
.btn-danger.disabled:focus,
.btn-danger[disabled]:focus,
fieldset[disabled] .btn-danger:focus,
.btn-danger.disabled.focus,
.btn-danger[disabled].focus,
fieldset[disabled] .btn-danger.focus {
background-color: #d9534f;
border-color: #d43f3a;
}

.btn-danger .badge {
color: #d9534f;
background-color: #ffffff;
}

.btn-link {
color: #337ab7;
font-weight: normal;
border-radius: 0;
}

.btn-link,
.btn-link:active,
.btn-link.active,
.btn-link[disabled],
fieldset[disabled] .btn-link {
background-color: transparent;
-webkit-box-shadow: none;
box-shadow: none;
}

.btn-link,
.btn-link:hover,
.btn-link:focus,
.btn-link:active {
border-color: transparent;
}

.btn-link:hover,
.btn-link:focus {
color: #23527c;
text-decoration: underline;
background-color: transparent;
}

.btn-link[disabled]:hover,
fieldset[disabled] .btn-link:hover,
.btn-link[disabled]:focus,
fieldset[disabled] .btn-link:focus {
color: #777777;
text-decoration: none;
}

.btn-lg,
.btn-group-lg>.btn {
padding: 10px 16px;
font-size: 18px;
line-height: 1.3333333;
border-radius: 6px;
}

.btn-sm,
.btn-group-sm>.btn {
padding: 5px 10px;
font-size: 12px;
line-height: 1.5;
border-radius: 3px;
}

.btn-xs,
.btn-group-xs>.btn {
padding: 1px 5px;
font-size: 12px;
line-height: 1.5;
border-radius: 3px;
}

.btn-block {
display: block;
width: 100%;
}

.btn-block+.btn-block {
margin-top: 5px;
}

input[type="submit"].btn-block,
input[type="reset"].btn-block,
input[type="button"].btn-block {
width: 100%;
}

.btn-group,
.btn-group-vertical {
position: relative;
display: inline-block;
vertical-align: middle;
}

.btn-group>.btn,
.btn-group-vertical>.btn {
position: relative;
float: left;
}

.btn-group>.btn:hover,
.btn-group-vertical>.btn:hover,
.btn-group>.btn:focus,
.btn-group-vertical>.btn:focus,
.btn-group>.btn:active,
.btn-group-vertical>.btn:active,
.btn-group>.btn.active,
.btn-group-vertical>.btn.active {
z-index: 2;
}

.btn-group .btn+.btn,
.btn-group .btn+.btn-group,
.btn-group .btn-group+.btn,
.btn-group .btn-group+.btn-group {
margin-left: -1px;
}

.btn-toolbar {
margin-left: -5px;
}

.btn-toolbar .btn,
.btn-toolbar .btn-group,
.btn-toolbar .input-group {
float: left;
}

.btn-toolbar>.btn,
.btn-toolbar>.btn-group,
.btn-toolbar>.input-group {
margin-left: 5px;
}

.btn-group>.btn:not(:first-child):not(:last-child):not(.dropdown-toggle) {
border-radius: 0;
}

.btn-group>.btn:first-child {
margin-left: 0;
}

.btn-group>.btn:first-child:not(:last-child):not(.dropdown-toggle) {
border-bottom-right-radius: 0;
border-top-right-radius: 0;
}

.btn-group>.btn:last-child:not(:first-child),
.btn-group>.dropdown-toggle:not(:first-child) {
border-bottom-left-radius: 0;
border-top-left-radius: 0;
}

.btn-group>.btn-group {
float: left;
}

.btn-group>.btn-group:not(:first-child):not(:last-child)>.btn {
border-radius: 0;
}

.btn-group>.btn-group:first-child:not(:last-child)>.btn:last-child,
.btn-group>.btn-group:first-child:not(:last-child)>.dropdown-toggle {
border-bottom-right-radius: 0;
border-top-right-radius: 0;
}

.btn-group>.btn-group:last-child:not(:first-child)>.btn:first-child {
border-bottom-left-radius: 0;
border-top-left-radius: 0;
}

.btn-group .dropdown-toggle:active,
.btn-group.open .dropdown-toggle {
outline: 0;
}

.btn-group>.btn+.dropdown-toggle {
padding-left: 8px;
padding-right: 8px;
}

.btn-group>.btn-lg+.dropdown-toggle {
padding-left: 12px;
padding-right: 12px;
}

.btn-group.open .dropdown-toggle {
-webkit-box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
box-shadow: inset 0 3px 5px rgba(0, 0, 0, 0.125);
}

.btn-group.open .dropdown-toggle.btn-link {
-webkit-box-shadow: none;
box-shadow: none;
}

.btn .caret {
margin-left: 0;
}

.btn-lg .caret {
border-width: 5px 5px 0;
border-bottom-width: 0;
}

.dropup .btn-lg .caret {
border-width: 0 5px 5px;
}

.btn-group-vertical>.btn,
.btn-group-vertical>.btn-group,
.btn-group-vertical>.btn-group>.btn {
display: block;
float: none;
width: 100%;
max-width: 100%;
}

.btn-group-vertical>.btn-group>.btn {
float: none;
}

.btn-group-vertical>.btn+.btn,
.btn-group-vertical>.btn+.btn-group,
.btn-group-vertical>.btn-group+.btn,
.btn-group-vertical>.btn-group+.btn-group {
margin-top: -1px;
margin-left: 0;
}

.btn-group-vertical>.btn:not(:first-child):not(:last-child) {
border-radius: 0;
}

.btn-group-vertical>.btn:first-child:not(:last-child) {
border-top-right-radius: 4px;
border-top-left-radius: 4px;
border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
}

.btn-group-vertical>.btn:last-child:not(:first-child) {
border-top-right-radius: 0;
border-top-left-radius: 0;
border-bottom-right-radius: 4px;
border-bottom-left-radius: 4px;
}

.btn-group-vertical>.btn-group:not(:first-child):not(:last-child)>.btn {
border-radius: 0;
}

.btn-group-vertical>.btn-group:first-child:not(:last-child)>.btn:last-child,
.btn-group-vertical>.btn-group:first-child:not(:last-child)>.dropdown-toggle {
border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
}

.btn-group-vertical>.btn-group:last-child:not(:first-child)>.btn:first-child {
border-top-right-radius: 0;
border-top-left-radius: 0;
}

.btn-group-justified {
display: table;
width: 100%;
table-layout: fixed;
border-collapse: separate;
}

.btn-group-justified>.btn,
.btn-group-justified>.btn-group {
float: none;
display: table-cell;
width: 1%;
}

.btn-group-justified>.btn-group .btn {
width: 100%;
}

.btn-group-justified>.btn-group .dropdown-menu {
left: auto;
}

[data-toggle="buttons"]>.btn input[type="radio"],
[data-toggle="buttons"]>.btn-group>.btn input[type="radio"],
[data-toggle="buttons"]>.btn input[type="checkbox"],
[data-toggle="buttons"]>.btn-group>.btn input[type="checkbox"] {
position: absolute;
clip: rect(0, 0, 0, 0);
pointer-events: none;
}

.input-group {
position: relative;
display: table;
border-collapse: separate;
}

.input-group[class*="col-"] {
float: none;
padding-left: 0;
padding-right: 0;
}

.input-group .form-control {
position: relative;
z-index: 2;
float: left;
width: 100%;
margin-bottom: 0;
}

.input-group .form-control:focus {
z-index: 3;
}

.input-group-lg>.form-control,
.input-group-lg>.input-group-addon,
.input-group-lg>.input-group-btn>.btn {
height: 46px;
padding: 10px 16px;
font-size: 18px;
line-height: 1.3333333;
border-radius: 6px;
}

select.input-group-lg>.form-control,
select.input-group-lg>.input-group-addon,
select.input-group-lg>.input-group-btn>.btn {
height: 46px;
line-height: 46px;
}

textarea.input-group-lg>.form-control,
textarea.input-group-lg>.input-group-addon,
textarea.input-group-lg>.input-group-btn>.btn,
select[multiple].input-group-lg>.form-control,
select[multiple].input-group-lg>.input-group-addon,
select[multiple].input-group-lg>.input-group-btn>.btn {
height: auto;
}

.input-group-sm>.form-control,
.input-group-sm>.input-group-addon,
.input-group-sm>.input-group-btn>.btn {
height: 30px;
padding: 5px 10px;
font-size: 12px;
line-height: 1.5;
border-radius: 3px;
}

select.input-group-sm>.form-control,
select.input-group-sm>.input-group-addon,
select.input-group-sm>.input-group-btn>.btn {
height: 30px;
line-height: 30px;
}

textarea.input-group-sm>.form-control,
textarea.input-group-sm>.input-group-addon,
textarea.input-group-sm>.input-group-btn>.btn,
select[multiple].input-group-sm>.form-control,
select[multiple].input-group-sm>.input-group-addon,
select[multiple].input-group-sm>.input-group-btn>.btn {
height: auto;
}

.input-group-addon,
.input-group-btn,
.input-group .form-control {
display: table-cell;
}

.input-group-addon:not(:first-child):not(:last-child),
.input-group-btn:not(:first-child):not(:last-child),
.input-group .form-control:not(:first-child):not(:last-child) {
border-radius: 0;
}

.input-group-addon,
.input-group-btn {
width: 1%;
white-space: nowrap;
vertical-align: middle;
}

.input-group-addon {
padding: 6px 12px;
font-size: 14px;
font-weight: normal;
line-height: 1;
color: #555555;
text-align: center;
background-color: #eeeeee;
border: 1px solid #cccccc;
border-radius: 4px;
}

.input-group-addon.input-sm {
padding: 5px 10px;
font-size: 12px;
border-radius: 3px;
}

.input-group-addon.input-lg {
padding: 10px 16px;
font-size: 18px;
border-radius: 6px;
}

.input-group-addon input[type="radio"],
.input-group-addon input[type="checkbox"] {
margin-top: 0;
}

.input-group .form-control:first-child,
.input-group-addon:first-child,
.input-group-btn:first-child>.btn,
.input-group-btn:first-child>.btn-group>.btn,
.input-group-btn:first-child>.dropdown-toggle,
.input-group-btn:last-child>.btn:not(:last-child):not(.dropdown-toggle),
.input-group-btn:last-child>.btn-group:not(:last-child)>.btn {
border-bottom-right-radius: 0;
border-top-right-radius: 0;
}

.input-group-addon:first-child {
border-right: 0;
}

.input-group .form-control:last-child,
.input-group-addon:last-child,
.input-group-btn:last-child>.btn,
.input-group-btn:last-child>.btn-group>.btn,
.input-group-btn:last-child>.dropdown-toggle,
.input-group-btn:first-child>.btn:not(:first-child),
.input-group-btn:first-child>.btn-group:not(:first-child)>.btn {
border-bottom-left-radius: 0;
border-top-left-radius: 0;
}

.input-group-addon:last-child {
border-left: 0;
}

.input-group-btn {
position: relative;
font-size: 0;
white-space: nowrap;
}

.input-group-btn>.btn {
position: relative;
}

.input-group-btn>.btn+.btn {
margin-left: -1px;
}

.input-group-btn>.btn:hover,
.input-group-btn>.btn:focus,
.input-group-btn>.btn:active {
z-index: 2;
}

.input-group-btn:first-child>.btn,
.input-group-btn:first-child>.btn-group {
margin-right: -1px;
}

.input-group-btn:last-child>.btn,
.input-group-btn:last-child>.btn-group {
z-index: 2;
margin-left: -1px;
}

.nav {
margin-bottom: 0;
padding-left: 0;
list-style: none;
}

.nav>li {
position: relative;
display: block;
}

.nav>li>a {
position: relative;
display: block;
padding: 10px 15px;
}

.nav>li>a:hover,
.nav>li>a:focus {
text-decoration: none;
background-color: #eeeeee;
}

.nav>li.disabled>a {
color: #777777;
}

.nav>li.disabled>a:hover,
.nav>li.disabled>a:focus {
color: #777777;
text-decoration: none;
background-color: transparent;
cursor: not-allowed;
}

.nav .open>a,
.nav .open>a:hover,
.nav .open>a:focus {
background-color: #eeeeee;
border-color: #337ab7;
}

.nav .nav-divider {
height: 1px;
margin: 9px 0;
overflow: hidden;
background-color: #e5e5e5;
}

.nav>li>a>img {
max-width: none;
}

.nav-tabs {
border-bottom: 1px solid #dddddd;
}

.nav-tabs>li {
float: left;
margin-bottom: -1px;
}

.nav-tabs>li>a {
margin-right: 2px;
line-height: 1.42857143;
border: 1px solid transparent;
border-radius: 4px 4px 0 0;
}

.nav-tabs>li>a:hover {
border-color: #eeeeee #eeeeee #dddddd;
}

.nav-tabs>li.active>a,
.nav-tabs>li.active>a:hover,
.nav-tabs>li.active>a:focus {
color: #555555;
background-color: #ffffff;
border: 1px solid #dddddd;
border-bottom-color: transparent;
cursor: default;
}

.nav-tabs.nav-justified {
width: 100%;
border-bottom: 0;
}

.nav-tabs.nav-justified>li {
float: none;
}

.nav-tabs.nav-justified>li>a {
text-align: center;
margin-bottom: 5px;
}

.nav-tabs.nav-justified>.dropdown .dropdown-menu {
top: auto;
left: auto;
}

@media (min-width: 768px) {
.nav-tabs.nav-justified>li {
display: table-cell;
width: 1%;
}

.nav-tabs.nav-justified>li>a {
margin-bottom: 0;
}
}

.nav-tabs.nav-justified>li>a {
margin-right: 0;
border-radius: 4px;
}

.nav-tabs.nav-justified>.active>a,
.nav-tabs.nav-justified>.active>a:hover,
.nav-tabs.nav-justified>.active>a:focus {
border: 1px solid #dddddd;
}

@media (min-width: 768px) {
.nav-tabs.nav-justified>li>a {
border-bottom: 1px solid #dddddd;
border-radius: 4px 4px 0 0;
}

.nav-tabs.nav-justified>.active>a,
.nav-tabs.nav-justified>.active>a:hover,
.nav-tabs.nav-justified>.active>a:focus {
border-bottom-color: #ffffff;
}
}

.nav-pills>li {
float: left;
}

.nav-pills>li>a {
border-radius: 4px;
}

.nav-pills>li+li {
margin-left: 2px;
}

.nav-pills>li.active>a,
.nav-pills>li.active>a:hover,
.nav-pills>li.active>a:focus {
color: #ffffff;
background-color: #337ab7;
}

.nav-stacked>li {
float: none;
}

.nav-stacked>li+li {
margin-top: 2px;
margin-left: 0;
}

.nav-justified {
width: 100%;
}

.nav-justified>li {
float: none;
}

.nav-justified>li>a {
text-align: center;
margin-bottom: 5px;
}

.nav-justified>.dropdown .dropdown-menu {
top: auto;
left: auto;
}

@media (min-width: 768px) {
.nav-justified>li {
display: table-cell;
width: 1%;
}

.nav-justified>li>a {
margin-bottom: 0;
}
}

.nav-tabs-justified {
border-bottom: 0;
}

.nav-tabs-justified>li>a {
margin-right: 0;
border-radius: 4px;
}

.nav-tabs-justified>.active>a,
.nav-tabs-justified>.active>a:hover,
.nav-tabs-justified>.active>a:focus {
border: 1px solid #dddddd;
}

@media (min-width: 768px) {
.nav-tabs-justified>li>a {
border-bottom: 1px solid #dddddd;
border-radius: 4px 4px 0 0;
}

.nav-tabs-justified>.active>a,
.nav-tabs-justified>.active>a:hover,
.nav-tabs-justified>.active>a:focus {
border-bottom-color: #ffffff;
}
}

.tab-content>.tab-pane {
display: none;
}

.tab-content>.active {
display: block;
}

.nav-tabs .dropdown-menu {
margin-top: -1px;
border-top-right-radius: 0;
border-top-left-radius: 0;
}

.navbar {
position: relative;
min-height: 50px;
margin-bottom: 20px;
border: 1px solid transparent;
}

@media (min-width: 768px) {
.navbar {
border-radius: 4px;
}
}

@media (min-width: 768px) {
.navbar-header {
float: left;
}
}

.navbar-collapse {
overflow-x: visible;
padding-right: 15px;
padding-left: 15px;
border-top: 1px solid transparent;
-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1);
-webkit-overflow-scrolling: touch;
}

.navbar-collapse.in {
overflow-y: auto;
}

@media (min-width: 768px) {
.navbar-collapse {
width: auto;
border-top: 0;
-webkit-box-shadow: none;
box-shadow: none;
}

.navbar-collapse.collapse {
display: block !important;
height: auto !important;
padding-bottom: 0;
overflow: visible !important;
}

.navbar-collapse.in {
overflow-y: visible;
}

.navbar-fixed-top .navbar-collapse,
.navbar-static-top .navbar-collapse,
.navbar-fixed-bottom .navbar-collapse {
padding-left: 0;
padding-right: 0;
}
}

.navbar-fixed-top .navbar-collapse,
.navbar-fixed-bottom .navbar-collapse {
max-height: 340px;
}

@media (max-device-width: 480px) and (orientation: landscape) {

.navbar-fixed-top .navbar-collapse,
.navbar-fixed-bottom .navbar-collapse {
max-height: 200px;
}
}

.container>.navbar-header,
.container-fluid>.navbar-header,
.container>.navbar-collapse,
.container-fluid>.navbar-collapse {
margin-right: -15px;
margin-left: -15px;
}

@media (min-width: 768px) {

.container>.navbar-header,
.container-fluid>.navbar-header,
.container>.navbar-collapse,
.container-fluid>.navbar-collapse {
margin-right: 0;
margin-left: 0;
}
}

.navbar-static-top {
z-index: 1000;
border-width: 0 0 1px;
}

@media (min-width: 768px) {
.navbar-static-top {
border-radius: 0;
}
}

.navbar-fixed-top,
.navbar-fixed-bottom {
position: fixed;
right: 0;
left: 0;
z-index: 1030;
}

@media (min-width: 768px) {

.navbar-fixed-top,
.navbar-fixed-bottom {
border-radius: 0;
}
}

.navbar-fixed-top {
top: 0;
border-width: 0 0 1px;
}

.navbar-fixed-bottom {
bottom: 0;
margin-bottom: 0;
border-width: 1px 0 0;
}

.navbar-brand {
float: left;
padding: 15px 15px;
font-size: 18px;
line-height: 20px;
height: 50px;
}

.navbar-brand:hover,
.navbar-brand:focus {
text-decoration: none;
}

.navbar-brand>img {
display: block;
}

@media (min-width: 768px) {

.navbar>.container .navbar-brand,
.navbar>.container-fluid .navbar-brand {
margin-left: -15px;
}
}

.navbar-toggle {
position: relative;
float: right;
margin-right: 15px;
padding: 9px 10px;
margin-top: 8px;
margin-bottom: 8px;
background-color: transparent;
background-image: none;
border: 1px solid transparent;
border-radius: 4px;
}

.navbar-toggle:focus {
outline: 0;
}

.navbar-toggle .icon-bar {
display: block;
width: 22px;
height: 2px;
border-radius: 1px;
}

.navbar-toggle .icon-bar+.icon-bar {
margin-top: 4px;
}

@media (min-width: 768px) {
.navbar-toggle {
display: none;
}
}

.navbar-nav {
margin: 7.5px -15px;
}

.navbar-nav>li>a {
padding-top: 10px;
padding-bottom: 10px;
line-height: 20px;
}

@media (max-width: 767px) {
.navbar-nav .open .dropdown-menu {
position: static;
float: none;
width: auto;
margin-top: 0;
background-color: transparent;
border: 0;
-webkit-box-shadow: none;
box-shadow: none;
}

.navbar-nav .open .dropdown-menu>li>a,
.navbar-nav .open .dropdown-menu .dropdown-header {
padding: 5px 15px 5px 25px;
}

.navbar-nav .open .dropdown-menu>li>a {
line-height: 20px;
}

.navbar-nav .open .dropdown-menu>li>a:hover,
.navbar-nav .open .dropdown-menu>li>a:focus {
background-image: none;
}
}

@media (min-width: 768px) {
.navbar-nav {
float: left;
margin: 0;
}

.navbar-nav>li {
float: left;
}

.navbar-nav>li>a {
padding-top: 15px;
padding-bottom: 15px;
}
}

.navbar-form {
margin-left: -15px;
margin-right: -15px;
padding: 10px 15px;
border-top: 1px solid transparent;
border-bottom: 1px solid transparent;
-webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.1), 0 1px 0 rgba(255, 255, 255, 0.1);
margin-top: 8px;
margin-bottom: 8px;
}

@media (min-width: 768px) {
.navbar-form .form-group {
display: inline-block;
margin-bottom: 0;
vertical-align: middle;
}

.navbar-form .form-control {
display: inline-block;
width: auto;
vertical-align: middle;
}

.navbar-form .form-control-static {
display: inline-block;
}

.navbar-form .input-group {
display: inline-table;
vertical-align: middle;
}

.navbar-form .input-group .input-group-addon,
.navbar-form .input-group .input-group-btn,
.navbar-form .input-group .form-control {
width: auto;
}

.navbar-form .input-group>.form-control {
width: 100%;
}

.navbar-form .control-label {
margin-bottom: 0;
vertical-align: middle;
}

.navbar-form .radio,
.navbar-form .checkbox {
display: inline-block;
margin-top: 0;
margin-bottom: 0;
vertical-align: middle;
}

.navbar-form .radio label,
.navbar-form .checkbox label {
padding-left: 0;
}

.navbar-form .radio input[type="radio"],
.navbar-form .checkbox input[type="checkbox"] {
position: relative;
margin-left: 0;
}

.navbar-form .has-feedback .form-control-feedback {
top: 0;
}
}

@media (max-width: 767px) {
.navbar-form .form-group {
margin-bottom: 5px;
}

.navbar-form .form-group:last-child {
margin-bottom: 0;
}
}

@media (min-width: 768px) {
.navbar-form {
width: auto;
border: 0;
margin-left: 0;
margin-right: 0;
padding-top: 0;
padding-bottom: 0;
-webkit-box-shadow: none;
box-shadow: none;
}
}

.navbar-nav>li>.dropdown-menu {
margin-top: 0;
border-top-right-radius: 0;
border-top-left-radius: 0;
}

.navbar-fixed-bottom .navbar-nav>li>.dropdown-menu {
margin-bottom: 0;
border-top-right-radius: 4px;
border-top-left-radius: 4px;
border-bottom-right-radius: 0;
border-bottom-left-radius: 0;
}

.navbar-btn {
margin-top: 8px;
margin-bottom: 8px;
}

.navbar-btn.btn-sm {
margin-top: 10px;
margin-bottom: 10px;
}

.navbar-btn.btn-xs {
margin-top: 14px;
margin-bottom: 14px;
}

.navbar-text {
margin-top: 15px;
margin-bottom: 15px;
}

@media (min-width: 768px) {
.navbar-text {
float: left;
margin-left: 15px;
margin-right: 15px;
}
}

@media (min-width: 768px) {
.navbar-left {
float: left !important;
}

.navbar-right {
float: right !important;
margin-right: -15px;
}

.navbar-right~.navbar-right {
margin-right: 0;
}
}

.navbar-default {
background-color: #f8f8f8;
border-color: #e7e7e7;
}

.navbar-default .navbar-brand {
color: #777777;
}

.navbar-default .navbar-brand:hover,
.navbar-default .navbar-brand:focus {
color: #5e5e5e;
background-color: transparent;
}

.navbar-default .navbar-text {
color: #777777;
}

.navbar-default .navbar-nav>li>a {
color: #777777;
}

.navbar-default .navbar-nav>li>a:hover,
.navbar-default .navbar-nav>li>a:focus {
color: #333333;
background-color: transparent;
}

.navbar-default .navbar-nav>.active>a,
.navbar-default .navbar-nav>.active>a:hover,
.navbar-default .navbar-nav>.active>a:focus {
color: #555555;
background-color: #e7e7e7;
}

.navbar-default .navbar-nav>.disabled>a,
.navbar-default .navbar-nav>.disabled>a:hover,
.navbar-default .navbar-nav>.disabled>a:focus {
color: #cccccc;
background-color: transparent;
}

.navbar-default .navbar-toggle {
border-color: #dddddd;
}

.navbar-default .navbar-toggle:hover,
.navbar-default .navbar-toggle:focus {
background-color: #dddddd;
}

.navbar-default .navbar-toggle .icon-bar {
background-color: #888888;
}

.navbar-default .navbar-collapse,
.navbar-default .navbar-form {
border-color: #e7e7e7;
}

.navbar-default .navbar-nav>.open>a,
.navbar-default .navbar-nav>.open>a:hover,
.navbar-default .navbar-nav>.open>a:focus {
background-color: #e7e7e7;
color: #555555;
}

@media (max-width: 767px) {
.navbar-default .navbar-nav .open .dropdown-menu>li>a {
color: #777777;
}

.navbar-default .navbar-nav .open .dropdown-menu>li>a:hover,
.navbar-default .navbar-nav .open .dropdown-menu>li>a:focus {
color: #333333;
background-color: transparent;
}

.navbar-default .navbar-nav .open .dropdown-menu>.active>a,
.navbar-default .navbar-nav .open .dropdown-menu>.active>a:hover,
.navbar-default .navbar-nav .open .dropdown-menu>.active>a:focus {
color: #555555;
background-color: #e7e7e7;
}

.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a,
.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:hover,
.navbar-default .navbar-nav .open .dropdown-menu>.disabled>a:focus {
color: #cccccc;
background-color: transparent;
}
}

.navbar-default .navbar-link {
color: #777777;
}

.navbar-default .navbar-link:hover {
color: #333333;
}

.navbar-default .btn-link {
color: #777777;
}

.navbar-default .btn-link:hover,
.navbar-default .btn-link:focus {
color: #333333;
}

.navbar-default .btn-link[disabled]:hover,
fieldset[disabled] .navbar-default .btn-link:hover,
.navbar-default .btn-link[disabled]:focus,
fieldset[disabled] .navbar-default .btn-link:focus {
color: #cccccc;
}

.navbar-inverse {
background-color: #222222;
border-color: #080808;
}

.navbar-inverse .navbar-brand {
color: #9d9d9d;
}

.navbar-inverse .navbar-brand:hover,
.navbar-inverse .navbar-brand:focus {
color: #ffffff;
background-color: transparent;
}

.navbar-inverse .navbar-text {
color: #9d9d9d;
}

.navbar-inverse .navbar-nav>li>a {
color: #9d9d9d;
}

.navbar-inverse .navbar-nav>li>a:hover,
.navbar-inverse .navbar-nav>li>a:focus {
color: #ffffff;
background-color: transparent;
}

.navbar-inverse .navbar-nav>.active>a,
.navbar-inverse .navbar-nav>.active>a:hover,
.navbar-inverse .navbar-nav>.active>a:focus {
color: #ffffff;
background-color: #080808;
}

.navbar-inverse .navbar-nav>.disabled>a,
.navbar-inverse .navbar-nav>.disabled>a:hover,
.navbar-inverse .navbar-nav>.disabled>a:focus {
color: #444444;
background-color: transparent;
}

.navbar-inverse .navbar-toggle {
border-color: #333333;
}

.navbar-inverse .navbar-toggle:hover,
.navbar-inverse .navbar-toggle:focus {
background-color: #333333;
}

.navbar-inverse .navbar-toggle .icon-bar {
background-color: #ffffff;
}

.navbar-inverse .navbar-collapse,
.navbar-inverse .navbar-form {
border-color: #101010;
}

.navbar-inverse .navbar-nav>.open>a,
.navbar-inverse .navbar-nav>.open>a:hover,
.navbar-inverse .navbar-nav>.open>a:focus {
background-color: #080808;
color: #ffffff;
}

@media (max-width: 767px) {
.navbar-inverse .navbar-nav .open .dropdown-menu>.dropdown-header {
border-color: #080808;
}

.navbar-inverse .navbar-nav .open .dropdown-menu .divider {
background-color: #080808;
}

.navbar-inverse .navbar-nav .open .dropdown-menu>li>a {
color: #9d9d9d;
}

.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:hover,
.navbar-inverse .navbar-nav .open .dropdown-menu>li>a:focus {
color: #ffffff;
background-color: transparent;
}

.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a,
.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:hover,
.navbar-inverse .navbar-nav .open .dropdown-menu>.active>a:focus {
color: #ffffff;
background-color: #080808;
}

.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a,
.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:hover,
.navbar-inverse .navbar-nav .open .dropdown-menu>.disabled>a:focus {
color: #444444;
background-color: transparent;
}
}

.navbar-inverse .navbar-link {
color: #9d9d9d;
}

.navbar-inverse .navbar-link:hover {
color: #ffffff;
}

.navbar-inverse .btn-link {
color: #9d9d9d;
}

.navbar-inverse .btn-link:hover,
.navbar-inverse .btn-link:focus {
color: #ffffff;
}

.navbar-inverse .btn-link[disabled]:hover,
fieldset[disabled] .navbar-inverse .btn-link:hover,
.navbar-inverse .btn-link[disabled]:focus,
fieldset[disabled] .navbar-inverse .btn-link:focus {
color: #444444;
}

.pagination {
display: inline-block;
padding-left: 0;
margin: 20px 0;
border-radius: 4px;
}

.pagination>li {
display: inline;
}

.pagination>li>a,
.pagination>li>span {
position: relative;
float: left;
padding: 6px 12px;
line-height: 1.42857143;
text-decoration: none;
color: #337ab7;
background-color: #ffffff;
border: 1px solid #dddddd;
margin-left: -1px;
}

.pagination>li:first-child>a,
.pagination>li:first-child>span {
margin-left: 0;
border-bottom-left-radius: 4px;
border-top-left-radius: 4px;
}

.pagination>li:last-child>a,
.pagination>li:last-child>span {
border-bottom-right-radius: 4px;
border-top-right-radius: 4px;
}

.pagination>li>a:hover,
.pagination>li>span:hover,
.pagination>li>a:focus,
.pagination>li>span:focus {
z-index: 2;
color: #23527c;
background-color: #eeeeee;
border-color: #dddddd;
}

.pagination>.active>a,
.pagination>.active>span,
.pagination>.active>a:hover,
.pagination>.active>span:hover,
.pagination>.active>a:focus,
.pagination>.active>span:focus {
z-index: 3;
color: #ffffff;
background-color: #337ab7;
border-color: #337ab7;
cursor: default;
}

.pagination>.disabled>span,
.pagination>.disabled>span:hover,
.pagination>.disabled>span:focus,
.pagination>.disabled>a,
.pagination>.disabled>a:hover,
.pagination>.disabled>a:focus {
color: #777777;
background-color: #ffffff;
border-color: #dddddd;
cursor: not-allowed;
}

.pagination-lg>li>a,
.pagination-lg>li>span {
padding: 10px 16px;
font-size: 18px;
line-height: 1.3333333;
}

.pagination-lg>li:first-child>a,
.pagination-lg>li:first-child>span {
border-bottom-left-radius: 6px;
border-top-left-radius: 6px;
}

.pagination-lg>li:last-child>a,
.pagination-lg>li:last-child>span {
border-bottom-right-radius: 6px;
border-top-right-radius: 6px;
}

.pagination-sm>li>a,
.pagination-sm>li>span {
padding: 5px 10px;
font-size: 12px;
line-height: 1.5;
}

.pagination-sm>li:first-child>a,
.pagination-sm>li:first-child>span {
border-bottom-left-radius: 3px;
border-top-left-radius: 3px;
}

.pagination-sm>li:last-child>a,
.pagination-sm>li:last-child>span {
border-bottom-right-radius: 3px;
border-top-right-radius: 3px;
}

.pager {
padding-left: 0;
margin: 20px 0;
list-style: none;
text-align: center;
}

.pager li {
display: inline;
}

.pager li>a,
.pager li>span {
display: inline-block;
padding: 5px 14px;
background-color: #ffffff;
border: 1px solid #dddddd;
border-radius: 15px;
}

.pager li>a:hover,
.pager li>a:focus {
text-decoration: none;
background-color: #eeeeee;
}

.pager .next>a,
.pager .next>span {
float: right;
}

.pager .previous>a,
.pager .previous>span {
float: left;
}

.pager .disabled>a,
.pager .disabled>a:hover,
.pager .disabled>a:focus,
.pager .disabled>span {
color: #777777;
background-color: #ffffff;
cursor: not-allowed;
}

.label {
display: inline;
padding: .2em .6em .3em;
font-size: 75%;
font-weight: bold;
line-height: 1;
color: #ffffff;
text-align: center;
white-space: nowrap;
vertical-align: baseline;
border-radius: .25em;
}

a.label:hover,
a.label:focus {
color: #ffffff;
text-decoration: none;
cursor: pointer;
}

.label:empty {
display: none;
}

.btn .label {
position: relative;
top: -1px;
}

.label-default {
background-color: #777777;
}

.label-default[href]:hover,
.label-default[href]:focus {
background-color: #5e5e5e;
}

.label-primary {
background-color: #337ab7;
}

.label-primary[href]:hover,
.label-primary[href]:focus {
background-color: #286090;
}

.label-success {
background-color: #5cb85c;
}

.label-success[href]:hover,
.label-success[href]:focus {
background-color: #449d44;
}

.label-info {
background-color: #5bc0de;
}

.label-info[href]:hover,
.label-info[href]:focus {
background-color: #31b0d5;
}

.label-warning {
background-color: #f0ad4e;
}

.label-warning[href]:hover,
.label-warning[href]:focus {
background-color: #ec971f;
}

.label-danger {
background-color: #d9534f;
}

.label-danger[href]:hover,
.label-danger[href]:focus {
background-color: #c9302c;
}

.badge {
display: inline-block;
min-width: 10px;
padding: 3px 7px;
font-size: 12px;
font-weight: bold;
color: #ffffff;
line-height: 1;
vertical-align: middle;
white-space: nowrap;
text-align: center;
background-color: #777777;
border-radius: 10px;
}

.badge:empty {
display: none;
}

.btn .badge {
position: relative;
top: -1px;
}

.btn-xs .badge,
.btn-group-xs>.btn .badge {
top: 0;
padding: 1px 5px;
}

a.badge:hover,
a.badge:focus {
color: #ffffff;
text-decoration: none;
cursor: pointer;
}

.list-group-item.active>.badge,
.nav-pills>.active>a>.badge {
color: #337ab7;
background-color: #ffffff;
}

.list-group-item>.badge {
float: right;
}

.list-group-item>.badge+.badge {
margin-right: 5px;
}

.nav-pills>li>a>.badge {
margin-left: 3px;
}

.alert {
padding: 15px;
margin-bottom: 20px;
border: 1px solid transparent;
border-radius: 4px;
}

.alert h4 {
margin-top: 0;
color: inherit;
}

.alert .alert-link {
font-weight: bold;
}

.alert>p,
.alert>ul {
margin-bottom: 0;
}

.alert>p+p {
margin-top: 5px;
}

.alert-dismissable,
.alert-dismissible {
padding-right: 35px;
}

.alert-dismissable .close,
.alert-dismissible .close {
position: relative;
top: -2px;
right: -21px;
color: inherit;
}

.alert-success {
background-color: #dff0d8;
border-color: #d6e9c6;
color: #3c763d;
}

.alert-success hr {
border-top-color: #c9e2b3;
}

.alert-success .alert-link {
color: #2b542c;
}

.alert-info {
background-color: #d9edf7;
border-color: #bce8f1;
color: #31708f;
}

.alert-info hr {
border-top-color: #a6e1ec;
}

.alert-info .alert-link {
color: #245269;
}

.alert-warning {
background-color: #fcf8e3;
border-color: #faebcc;
color: #8a6d3b;
}

.alert-warning hr {
border-top-color: #f7e1b5;
}

.alert-warning .alert-link {
color: #66512c;
}

.alert-danger {
background-color: #f2dede;
border-color: #ebccd1;
color: #a94442;
}

.alert-danger hr {
border-top-color: #e4b9c0;
}

.alert-danger .alert-link {
color: #843534;
}

@-webkit-keyframes progress-bar-stripes {
from {
background-position: 40px 0;
}

to {
background-position: 0 0;
}
}

@-o-keyframes progress-bar-stripes {
from {
background-position: 40px 0;
}

to {
background-position: 0 0;
}
}

@keyframes progress-bar-stripes {
from {
background-position: 40px 0;
}

to {
background-position: 0 0;
}
}

.progress {
overflow: hidden;
height: 20px;
margin-bottom: 20px;
background-color: #f5f5f5;
border-radius: 4px;
-webkit-box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1);
}

.progress-bar {
float: left;
width: 0%;
height: 100%;
font-size: 12px;
line-height: 20px;
color: #ffffff;
text-align: center;
background-color: #337ab7;
-webkit-box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
box-shadow: inset 0 -1px 0 rgba(0, 0, 0, 0.15);
-webkit-transition: width 0.6s ease;
-o-transition: width 0.6s ease;
transition: width 0.6s ease;
}

.progress-striped .progress-bar,
.progress-bar-striped {
background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
-webkit-background-size: 40px 40px;
background-size: 40px 40px;
}

.progress.active .progress-bar,
.progress-bar.active {
-webkit-animation: progress-bar-stripes 2s linear infinite;
-o-animation: progress-bar-stripes 2s linear infinite;
animation: progress-bar-stripes 2s linear infinite;
}

.progress-bar-success {
background-color: #5cb85c;
}

.progress-striped .progress-bar-success {
background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}

.progress-bar-info {
background-color: #5bc0de;
}

.progress-striped .progress-bar-info {
background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}

.progress-bar-warning {
background-color: #f0ad4e;
}

.progress-striped .progress-bar-warning {
background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}

.progress-bar-danger {
background-color: #d9534f;
}

.progress-striped .progress-bar-danger {
background-image: -webkit-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: -o-linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
background-image: linear-gradient(45deg, rgba(255, 255, 255, 0.15) 25%, transparent 25%, transparent 50%, rgba(255, 255, 255, 0.15) 50%, rgba(255, 255, 255, 0.15) 75%, transparent 75%, transparent);
}

.media {
margin-top: 15px;
}

.media:first-child {
margin-top: 0;
}

.media,
.media-body {
zoom: 1;
overflow: hidden;
}

.media-body {
width: 10000px;
}

.media-object {
display: block;
}

.media-object.img-thumbnail {
max-width: none;
}

.media-right,
.media>.pull-right {
padding-left: 10px;
}

.media-left,
.media>.pull-left {
padding-right: 10px;
}

.media-left,
.media-right,
.media-body {
display: table-cell;
vertical-align: top;
}

.media-middle {
vertical-align: middle;
}

.media-bottom {
vertical-align: bottom;
}

.media-heading {
margin-top: 0;
margin-bottom: 5px;
}

.media-list {
padding-left: 0;
list-style: none;
}

.list-group {
margin-bottom: 20px;
padding-left: 0;
}

.list-group-item {
position: relative;
display: block;
padding: 10px 15px;
margin-bottom: -1px;
background-color: #ffffff;
border: 1px solid #dddddd;
}

.list-group-item:first-child {
border-top-right-radius: 4px;
border-top-left-radius: 4px;
}

.list-group-item:last-child {
margin-bottom: 0;
border-bottom-right-radius: 4px;
border-bottom-left-radius: 4px;
}

a.list-group-item,
button.list-group-item {
color: #555555;
}

a.list-group-item .list-group-item-heading,
button.list-group-item .list-group-item-heading {
color: #333333;
}

a.list-group-item:hover,
button.list-group-item:hover,
a.list-group-item:focus,
button.list-group-item:focus {
text-decoration: none;
color: #555555;
background-color: #f5f5f5;
}

button.list-group-item {
width: 100%;
text-align: left;
}

.list-group-item.disabled,
.list-group-item.disabled:hover,
.list-group-item.disabled:focus {
background-color: #eeeeee;
color: #777777;
cursor: not-allowed;
}

.list-group-item.disabled .list-group-item-heading,
.list-group-item.disabled:hover .list-group-item-heading,
.list-group-item.disabled:focus .list-group-item-heading {
color: inherit;
}

.list-group-item.disabled .list-group-item-text,
.list-group-item.disabled:hover .list-group-item-text,
.list-group-item.disabled:focus .list-group-item-text {
color: #777777;
}

.list-group-item.active,
.list-group-item.active:hover,
.list-group-item.active:focus {
z-index: 2;
color: #ffffff;
background-color: #337ab7;
border-color: #337ab7;
}

.list-group-item.active .list-group-item-heading,
.list-group-item.active:hover .list-group-item-heading,
.list-group-item.active:focus .list-group-item-heading,
.list-group-item.active .list-group-item-heading>small,
.list-group-item.active:hover .list-group-item-heading>small,
.list-group-item.active:focus .list-group-item-heading>small,
.list-group-item.active .list-group-item-heading>.small,
.list-group-item.active:hover .list-group-item-heading>.small,
.list-group-item.active:focus .list-group-item-heading>.small {
color: inherit;
}

.list-group-item.active .list-group-item-text,
.list-group-item.active:hover .list-group-item-text,
.list-group-item.active:focus .list-group-item-text {
color: #c7ddef;
}

.list-group-item-success {
color: #3c763d;
background-color: #dff0d8;
}

a.list-group-item-success,
button.list-group-item-success {
color: #3c763d;
}

a.list-group-item-success .list-group-item-heading,
button.list-group-item-success .list-group-item-heading {
color: inherit;
}

a.list-group-item-success:hover,
button.list-group-item-success:hover,
a.list-group-item-success:focus,
button.list-group-item-success:focus {
color: #3c763d;
background-color: #d0e9c6;
}

a.list-group-item-success.active,
button.list-group-item-success.active,
a.list-group-item-success.active:hover,
button.list-group-item-success.active:hover,
a.list-group-item-success.active:focus,
button.list-group-item-success.active:focus {
color: #fff;
background-color: #3c763d;
border-color: #3c763d;
}

.list-group-item-info {
color: #31708f;
background-color: #d9edf7;
}

a.list-group-item-info,
button.list-group-item-info {
color: #31708f;
}

a.list-group-item-info .list-group-item-heading,
button.list-group-item-info .list-group-item-heading {
color: inherit;
}

a.list-group-item-info:hover,
button.list-group-item-info:hover,
a.list-group-item-info:focus,
button.list-group-item-info:focus {
color: #31708f;
background-color: #c4e3f3;
}

a.list-group-item-info.active,
button.list-group-item-info.active,
a.list-group-item-info.active:hover,
button.list-group-item-info.active:hover,
a.list-group-item-info.active:focus,
button.list-group-item-info.active:focus {
color: #fff;
background-color: #31708f;
border-color: #31708f;
}

.list-group-item-warning {
color: #8a6d3b;
background-color: #fcf8e3;
}

a.list-group-item-warning,
button.list-group-item-warning {
color: #8a6d3b;
}

a.list-group-item-warning .list-group-item-heading,
button.list-group-item-warning .list-group-item-heading {
color: inherit;
}

a.list-group-item-warning:hover,
button.list-group-item-warning:hover,
a.list-group-item-warning:focus,
button.list-group-item-warning:focus {
color: #8a6d3b;
background-color: #faf2cc;
}

a.list-group-item-warning.active,
button.list-group-item-warning.active,
a.list-group-item-warning.active:hover,
button.list-group-item-warning.active:hover,
a.list-group-item-warning.active:focus,
button.list-group-item-warning.active:focus {
color: #fff;
background-color: #8a6d3b;
border-color: #8a6d3b;
}

.list-group-item-danger {
color: #a94442;
background-color: #f2dede;
}

a.list-group-item-danger,
button.list-group-item-danger {
color: #a94442;
}

a.list-group-item-danger .list-group-item-heading,
button.list-group-item-danger .list-group-item-heading {
color: inherit;
}

a.list-group-item-danger:hover,
button.list-group-item-danger:hover,
a.list-group-item-danger:focus,
button.list-group-item-danger:focus {
color: #a94442;
background-color: #ebcccc;
}

a.list-group-item-danger.active,
button.list-group-item-danger.active,
a.list-group-item-danger.active:hover,
button.list-group-item-danger.active:hover,
a.list-group-item-danger.active:focus,
button.list-group-item-danger.active:focus {
color: #fff;
background-color: #a94442;
border-color: #a94442;
}

.list-group-item-heading {
margin-top: 0;
margin-bottom: 5px;
}

.list-group-item-text {
margin-bottom: 0;
line-height: 1.3;
}

.panel {
margin-bottom: 20px;
background-color: #ffffff;
border: 1px solid transparent;
border-radius: 4px;
-webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);
}

.panel-body {
padding: 15px;
}

.panel-heading {
padding: 10px 15px;
border-bottom: 1px solid transparent;
border-top-right-radius: 3px;
border-top-left-radius: 3px;
}

.panel-heading>.dropdown .dropdown-toggle {
color: inherit;
}

.panel-title {
margin-top: 0;
margin-bottom: 0;
font-size: 16px;
color: inherit;
}

.panel-title>a,
.panel-title>small,
.panel-title>.small,
.panel-title>small>a,
.panel-title>.small>a {
color: inherit;
}

.panel-footer {
padding: 10px 15px;
background-color: #f5f5f5;
border-top: 1px solid #dddddd;
border-bottom-right-radius: 3px;
border-bottom-left-radius: 3px;
}

.panel>.list-group,
.panel>.panel-collapse>.list-group {
margin-bottom: 0;
}

.panel>.list-group .list-group-item,
.panel>.panel-collapse>.list-group .list-group-item {
border-width: 1px 0;
border-radius: 0;
}

.panel>.list-group:first-child .list-group-item:first-child,
.panel>.panel-collapse>.list-group:first-child .list-group-item:first-child {
border-top: 0;
border-top-right-radius: 3px;
border-top-left-radius: 3px;
}

.panel>.list-group:last-child .list-group-item:last-child,
.panel>.panel-collapse>.list-group:last-child .list-group-item:last-child {
border-bottom: 0;
border-bottom-right-radius: 3px;
border-bottom-left-radius: 3px;
}

.panel>.panel-heading+.panel-collapse>.list-group .list-group-item:first-child {
border-top-right-radius: 0;
border-top-left-radius: 0;
}

.panel-heading+.list-group .list-group-item:first-child {
border-top-width: 0;
}

.list-group+.panel-footer {
border-top-width: 0;
}

.panel>.table,
.panel>.table-responsive>.table,
.panel>.panel-collapse>.table {
margin-bottom: 0;
}

.panel>.table caption,
.panel>.table-responsive>.table caption,
.panel>.panel-collapse>.table caption {
padding-left: 15px;
padding-right: 15px;
}

.panel>.table:first-child,
.panel>.table-responsive:first-child>.table:first-child {
border-top-right-radius: 3px;
border-top-left-radius: 3px;
}

.panel>.table:first-child>thead:first-child>tr:first-child,
.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child,
.panel>.table:first-child>tbody:first-child>tr:first-child,
.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child {
border-top-left-radius: 3px;
border-top-right-radius: 3px;
}

.panel>.table:first-child>thead:first-child>tr:first-child td:first-child,
.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:first-child,
.panel>.table:first-child>tbody:first-child>tr:first-child td:first-child,
.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:first-child,
.panel>.table:first-child>thead:first-child>tr:first-child th:first-child,
.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:first-child,
.panel>.table:first-child>tbody:first-child>tr:first-child th:first-child,
.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:first-child {
border-top-left-radius: 3px;
}

.panel>.table:first-child>thead:first-child>tr:first-child td:last-child,
.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child td:last-child,
.panel>.table:first-child>tbody:first-child>tr:first-child td:last-child,
.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child td:last-child,
.panel>.table:first-child>thead:first-child>tr:first-child th:last-child,
.panel>.table-responsive:first-child>.table:first-child>thead:first-child>tr:first-child th:last-child,
.panel>.table:first-child>tbody:first-child>tr:first-child th:last-child,
.panel>.table-responsive:first-child>.table:first-child>tbody:first-child>tr:first-child th:last-child {
border-top-right-radius: 3px;
}

.panel>.table:last-child,
.panel>.table-responsive:last-child>.table:last-child {
border-bottom-right-radius: 3px;
border-bottom-left-radius: 3px;
}

.panel>.table:last-child>tbody:last-child>tr:last-child,
.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child,
.panel>.table:last-child>tfoot:last-child>tr:last-child,
.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child {
border-bottom-left-radius: 3px;
border-bottom-right-radius: 3px;
}

.panel>.table:last-child>tbody:last-child>tr:last-child td:first-child,
.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:first-child,
.panel>.table:last-child>tfoot:last-child>tr:last-child td:first-child,
.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:first-child,
.panel>.table:last-child>tbody:last-child>tr:last-child th:first-child,
.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:first-child,
.panel>.table:last-child>tfoot:last-child>tr:last-child th:first-child,
.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:first-child {
border-bottom-left-radius: 3px;
}

.panel>.table:last-child>tbody:last-child>tr:last-child td:last-child,
.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child td:last-child,
.panel>.table:last-child>tfoot:last-child>tr:last-child td:last-child,
.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child td:last-child,
.panel>.table:last-child>tbody:last-child>tr:last-child th:last-child,
.panel>.table-responsive:last-child>.table:last-child>tbody:last-child>tr:last-child th:last-child,
.panel>.table:last-child>tfoot:last-child>tr:last-child th:last-child,
.panel>.table-responsive:last-child>.table:last-child>tfoot:last-child>tr:last-child th:last-child {
border-bottom-right-radius: 3px;
}

.panel>.panel-body+.table,
.panel>.panel-body+.table-responsive,
.panel>.table+.panel-body,
.panel>.table-responsive+.panel-body {
border-top: 1px solid #dddddd;
}

.panel>.table>tbody:first-child>tr:first-child th,
.panel>.table>tbody:first-child>tr:first-child td {
border-top: 0;
}

.panel>.table-bordered,
.panel>.table-responsive>.table-bordered {
border: 0;
}

.panel>.table-bordered>thead>tr>th:first-child,
.panel>.table-responsive>.table-bordered>thead>tr>th:first-child,
.panel>.table-bordered>tbody>tr>th:first-child,
.panel>.table-responsive>.table-bordered>tbody>tr>th:first-child,
.panel>.table-bordered>tfoot>tr>th:first-child,
.panel>.table-responsive>.table-bordered>tfoot>tr>th:first-child,
.panel>.table-bordered>thead>tr>td:first-child,
.panel>.table-responsive>.table-bordered>thead>tr>td:first-child,
.panel>.table-bordered>tbody>tr>td:first-child,
.panel>.table-responsive>.table-bordered>tbody>tr>td:first-child,
.panel>.table-bordered>tfoot>tr>td:first-child,
.panel>.table-responsive>.table-bordered>tfoot>tr>td:first-child {
border-left: 0;
}

.panel>.table-bordered>thead>tr>th:last-child,
.panel>.table-responsive>.table-bordered>thead>tr>th:last-child,
.panel>.table-bordered>tbody>tr>th:last-child,
.panel>.table-responsive>.table-bordered>tbody>tr>th:last-child,
.panel>.table-bordered>tfoot>tr>th:last-child,
.panel>.table-responsive>.table-bordered>tfoot>tr>th:last-child,
.panel>.table-bordered>thead>tr>td:last-child,
.panel>.table-responsive>.table-bordered>thead>tr>td:last-child,
.panel>.table-bordered>tbody>tr>td:last-child,
.panel>.table-responsive>.table-bordered>tbody>tr>td:last-child,
.panel>.table-bordered>tfoot>tr>td:last-child,
.panel>.table-responsive>.table-bordered>tfoot>tr>td:last-child {
border-right: 0;
}

.panel>.table-bordered>thead>tr:first-child>td,
.panel>.table-responsive>.table-bordered>thead>tr:first-child>td,
.panel>.table-bordered>tbody>tr:first-child>td,
.panel>.table-responsive>.table-bordered>tbody>tr:first-child>td,
.panel>.table-bordered>thead>tr:first-child>th,
.panel>.table-responsive>.table-bordered>thead>tr:first-child>th,
.panel>.table-bordered>tbody>tr:first-child>th,
.panel>.table-responsive>.table-bordered>tbody>tr:first-child>th {
border-bottom: 0;
}

.panel>.table-bordered>tbody>tr:last-child>td,
.panel>.table-responsive>.table-bordered>tbody>tr:last-child>td,
.panel>.table-bordered>tfoot>tr:last-child>td,
.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>td,
.panel>.table-bordered>tbody>tr:last-child>th,
.panel>.table-responsive>.table-bordered>tbody>tr:last-child>th,
.panel>.table-bordered>tfoot>tr:last-child>th,
.panel>.table-responsive>.table-bordered>tfoot>tr:last-child>th {
border-bottom: 0;
}

.panel>.table-responsive {
border: 0;
margin-bottom: 0;
}

.panel-group {
margin-bottom: 20px;
}

.panel-group .panel {
margin-bottom: 0;
border-radius: 4px;
}

.panel-group .panel+.panel {
margin-top: 5px;
}

.panel-group .panel-heading {
border-bottom: 0;
}

.panel-group .panel-heading+.panel-collapse>.panel-body,
.panel-group .panel-heading+.panel-collapse>.list-group {
border-top: 1px solid #dddddd;
}

.panel-group .panel-footer {
border-top: 0;
}

.panel-group .panel-footer+.panel-collapse .panel-body {
border-bottom: 1px solid #dddddd;
}

.panel-default {
border-color: #dddddd;
}

.panel-default>.panel-heading {
color: #333333;
background-color: #f5f5f5;
border-color: #dddddd;
}

.panel-default>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #dddddd;
}

.panel-default>.panel-heading .badge {
color: #f5f5f5;
background-color: #333333;
}

.panel-default>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #dddddd;
}

.panel-primary {
border-color: #337ab7;
}

.panel-primary>.panel-heading {
color: #ffffff;
background-color: #337ab7;
border-color: #337ab7;
}

.panel-primary>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #337ab7;
}

.panel-primary>.panel-heading .badge {
color: #337ab7;
background-color: #ffffff;
}

.panel-primary>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #337ab7;
}

.panel-success {
border-color: #d6e9c6;
}

.panel-success>.panel-heading {
color: #3c763d;
background-color: #dff0d8;
border-color: #d6e9c6;
}

.panel-success>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #d6e9c6;
}

.panel-success>.panel-heading .badge {
color: #dff0d8;
background-color: #3c763d;
}

.panel-success>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #d6e9c6;
}

.panel-info {
border-color: #bce8f1;
}

.panel-info>.panel-heading {
color: #31708f;
background-color: #d9edf7;
border-color: #bce8f1;
}

.panel-info>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #bce8f1;
}

.panel-info>.panel-heading .badge {
color: #d9edf7;
background-color: #31708f;
}

.panel-info>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #bce8f1;
}

.panel-warning {
border-color: #faebcc;
}

.panel-warning>.panel-heading {
color: #8a6d3b;
background-color: #fcf8e3;
border-color: #faebcc;
}

.panel-warning>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #faebcc;
}

.panel-warning>.panel-heading .badge {
color: #fcf8e3;
background-color: #8a6d3b;
}

.panel-warning>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #faebcc;
}

.panel-danger {
border-color: #ebccd1;
}

.panel-danger>.panel-heading {
color: #a94442;
background-color: #f2dede;
border-color: #ebccd1;
}

.panel-danger>.panel-heading+.panel-collapse>.panel-body {
border-top-color: #ebccd1;
}

.panel-danger>.panel-heading .badge {
color: #f2dede;
background-color: #a94442;
}

.panel-danger>.panel-footer+.panel-collapse>.panel-body {
border-bottom-color: #ebccd1;
}

.embed-responsive {
position: relative;
display: block;
height: 0;
padding: 0;
overflow: hidden;
}

.embed-responsive .embed-responsive-item,
.embed-responsive iframe,
.embed-responsive embed,
.embed-responsive object,
.embed-responsive video {
position: absolute;
top: 0;
left: 0;
bottom: 0;
height: 100%;
width: 100%;
border: 0;
}

.embed-responsive-16by9 {
padding-bottom: 56.25%;
}

.embed-responsive-4by3 {
padding-bottom: 75%;
}

.clearfix:before,
.clearfix:after,
.dl-horizontal dd:before,
.dl-horizontal dd:after,
.container:before,
.container:after,
.container-fluid:before,
.container-fluid:after,
.row:before,
.row:after,
.form-horizontal .form-group:before,
.form-horizontal .form-group:after,
.btn-toolbar:before,
.btn-toolbar:after,
.btn-group-vertical>.btn-group:before,
.btn-group-vertical>.btn-group:after,
.nav:before,
.nav:after,
.navbar:before,
.navbar:after,
.navbar-header:before,
.navbar-header:after,
.navbar-collapse:before,
.navbar-collapse:after,
.pager:before,
.pager:after,
.panel-body:before,
.panel-body:after {
content: " ";
display: table;
}

.clearfix:after,
.dl-horizontal dd:after,
.container:after,
.container-fluid:after,
.row:after,
.form-horizontal .form-group:after,
.btn-toolbar:after,
.btn-group-vertical>.btn-group:after,
.nav:after,
.navbar:after,
.navbar-header:after,
.navbar-collapse:after,
.pager:after,
.panel-body:after {
clear: both;
}

.center-block {
display: block;
margin-left: auto;
margin-right: auto;
}

.pull-right {
float: right !important;
}

.pull-left {
float: left !important;
}

.hide {
display: none !important;
}

.show {
display: block !important;
}

.invisible {
visibility: hidden;
}

.text-hide {
font: 0/0 a;
color: transparent;
text-shadow: none;
background-color: transparent;
border: 0;
}

.hidden {
display: none !important;
}

.affix {
position: fixed;
}

@-ms-viewport {
width: device-width;
}

.visible-xs,
.visible-sm,
.visible-md,
.visible-lg {
display: none !important;
}

.visible-xs-block,
.visible-xs-inline,
.visible-xs-inline-block,
.visible-sm-block,
.visible-sm-inline,
.visible-sm-inline-block,
.visible-md-block,
.visible-md-inline,
.visible-md-inline-block,
.visible-lg-block,
.visible-lg-inline,
.visible-lg-inline-block {
display: none !important;
}

@media (max-width: 767px) {
.visible-xs {
display: block !important;
}

table.visible-xs {
display: table !important;
}

tr.visible-xs {
display: table-row !important;
}

th.visible-xs,
td.visible-xs {
display: table-cell !important;
}
}

@media (max-width: 767px) {
.visible-xs-block {
display: block !important;
}
}

@media (max-width: 767px) {
.visible-xs-inline {
display: inline !important;
}
}

@media (max-width: 767px) {
.visible-xs-inline-block {
display: inline-block !important;
}
}

@media (min-width: 768px) and (max-width: 991px) {
.visible-sm {
display: block !important;
}

table.visible-sm {
display: table !important;
}

tr.visible-sm {
display: table-row !important;
}

th.visible-sm,
td.visible-sm {
display: table-cell !important;
}
}

@media (min-width: 768px) and (max-width: 991px) {
.visible-sm-block {
display: block !important;
}
}

@media (min-width: 768px) and (max-width: 991px) {
.visible-sm-inline {
display: inline !important;
}
}

@media (min-width: 768px) and (max-width: 991px) {
.visible-sm-inline-block {
display: inline-block !important;
}
}

@media (min-width: 992px) and (max-width: 1199px) {
.visible-md {
display: block !important;
}

table.visible-md {
display: table !important;
}

tr.visible-md {
display: table-row !important;
}

th.visible-md,
td.visible-md {
display: table-cell !important;
}
}

@media (min-width: 992px) and (max-width: 1199px) {
.visible-md-block {
display: block !important;
}
}

@media (min-width: 992px) and (max-width: 1199px) {
.visible-md-inline {
display: inline !important;
}
}

@media (min-width: 992px) and (max-width: 1199px) {
.visible-md-inline-block {
display: inline-block !important;
}
}

@media (min-width: 1200px) {
.visible-lg {
display: block !important;
}

table.visible-lg {
display: table !important;
}

tr.visible-lg {
display: table-row !important;
}

th.visible-lg,
td.visible-lg {
display: table-cell !important;
}
}

@media (min-width: 1200px) {
.visible-lg-block {
display: block !important;
}
}

@media (min-width: 1200px) {
.visible-lg-inline {
display: inline !important;
}
}

@media (min-width: 1200px) {
.visible-lg-inline-block {
display: inline-block !important;
}
}

@media (max-width: 767px) {
.hidden-xs {
display: none !important;
}
}

@media (min-width: 768px) and (max-width: 991px) {
.hidden-sm {
display: none !important;
}
}

@media (min-width: 992px) and (max-width: 1199px) {
.hidden-md {
display: none !important;
}
}

@media (min-width: 1200px) {
.hidden-lg {
display: none !important;
}
}

.visible-print {
display: none !important;
}

@media print {
.visible-print {
display: block !important;
}

table.visible-print {
display: table !important;
}

tr.visible-print {
display: table-row !important;
}

th.visible-print,
td.visible-print {
display: table-cell !important;
}
}

.visible-print-block {
display: none !important;
}

@media print {
.visible-print-block {
display: block !important;
}
}

.visible-print-inline {
display: none !important;
}

@media print {
.visible-print-inline {
display: inline !important;
}
}

.visible-print-inline-block {
display: none !important;
}

@media print {
.visible-print-inline-block {
display: inline-block !important;
}
}

@media print {
.hidden-print {
display: none !important;
}
}

</style>
<style>
.dropbtn {
padding: 16px;
font-size: 14px;
border: none;
cursor: pointer;
}

.dropdown {
position: relative;
display: inline-block;
border-color: #000000;
}

.dropdownselect {
position: relative;
display: inline-block;
border-color: #000000;
}

.dropmenu-content,
.dropdown-content {
display: none;
position: absolute;
background-color: #f9f9f9;
min-width: 160px;
box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
z-index: 1;
border: 1px solid #dddddd;
padding-top: 4px;
padding-bottom: 4px;
}

.dropmenu-content a,
.dropdown-content a {
color: black;
padding: 12px 16px;
text-decoration: none;
display: block;
}

.dropmenu-content a:hover,
.dropdown-content a:hover {
background-color: #e1e1e1
}

.dropdown:hover .dropdown-content {
display: block;
}

.dropdown:hover .dropbtn {
background-color: #e1e1e1;
}

.menu-title {
padding: 5px 10px;
font-size: 12px;
}

.menu-divider {
height: 1px;
margin: 2px 0;
overflow: hidden;
background-color: #e5e5e5;
}

.dropmenu-content-up {
bottom: 3em;
left: 0em
}

.dropmenu-content-down {
top: 3em;
left: 0em
}

@media (min-width: 768px) {
.dropdown-content {
top: 3em;
right: 1em;
}
}

@media screen and (max-width: 767px) {
.dropdown-content {
top: 3em;
left: 1.2em;
}
}

</style>
<style>
/* Style the tab */
div.tab {
overflow: hidden;
border-left: 1px solid #ccc;
border-right: 1px solid #ccc;
border-top: 1px solid #ccc;
border-bottom: 1px solid #ccc;
background-color: #f1f1f1;
border-top-left-radius: 6px;
border-top-right-radius: 6px;
}


/* Style the buttons inside the tab */
div.tab button {
background-color: inherit;
float: left;
border-top: 1px solid #f1f1f1;
border-bottom: 1px solid #f1f1f1;
border-left: 1px solid #f1f1f1;
border-right: 1px solid #f1f1f1;
outline: none;
cursor: pointer;
padding: 12px 14px;
transition: 0.3s;
color: #337AB7;
}

/* Change background color of buttons on hover */
div.tab button:hover {
background-color: #ddd;
border-top-left-radius: 6px;
border-top-right-radius: 6px;
border-top: 1px solid #ddd;
border-bottom: 1px solid #ddd;
border-left: 1px solid #ddd;
border-right: 1px solid #ddd;
}

/* Create an active/current tablink class */
div.tab button.active {
background-color: #ffffff;
border-top: 1px solid #ccc;
border-bottom: 1px solid #fff;
border-left: 1px solid #ccc;
border-right: 1px solid #ccc;
border-top-left-radius: 6px;
border-top-right-radius: 6px;
color: #555555;
}

/* Style the tab content */
.tabcontent {
display: none;
padding: 6px 12px;

}

</style>
<style>
/* The Modal (background) */
.modal {
display: none;
/* Hidden by default */
position: fixed;
/* Stay in place */
z-index: 10000;
/* Sit on top */
padding-top: 100px;
/* Location of the box */
left: 0;
top: 0;
width: 100%;
/* Full width */
height: 100%;
/* Full height */
overflow: auto;
/* Enable scroll if needed */
background-color: rgb(0, 0, 0);
/* Fallback color */
background-color: rgba(0, 0, 0, 0.4);
/* Black w/ opacity */
-webkit-animation-name: fadeIn;
/* Fade in the background */
-webkit-animation-duration: 0.4s;
animation-name: fadeIn;
animation-duration: 0.4s;
}

.topmodal {
z-index: 20000 ! important;
/* Sit on top of the top */
}

.supertopmodal {
z-index: 30000 ! important;
/* Sit on top of the top */
}

/* Modal Content */
.modal-content {
border-top-left-radius: 10px;
border-top-right-radius: 10px;
border-bottom-left-radius: 10px;
border-bottom-right-radius: 10px;
border: 2px solid #337AB7;
box-shadow: 0px 8px 16px 0px rgba(0, 0, 0, 0.2);
position: relative;
margin: auto;
padding: 0;
background-color: #fefefe;
-webkit-animation-name: slideIn;
-webkit-animation-duration: 0.4s;
animation-name: slideIn;
animation-duration: 0.4s
}

/* The Close Button */
.close {
color: #000;
float: right;
font-size: 28px;
font-weight: bold;
}

.close:hover,
.close:focus {
color: #337AB7;
text-decoration: none;
cursor: pointer;
}

.modal-header {
padding: 2px 16px;
color: #0f0f0f;
background-color: #f2f2f2;
border-top-left-radius: 10px;
border-top-right-radius: 10px;
border-bottom: 1px solid #cfcfcf;
}

.modal-body {
padding: 10px 16px;
}

.modal-footer {
padding: 16px 16px;
height: 4.5em;
color: #0f0f0f;
background-color: #f2f2f2;
border-top: 1px solid #cfcfcf;
border-bottom-left-radius: 10px;
border-bottom-right-radius: 10px;
}

/* Add Animation */
@-webkit-keyframes slideIn {
from {
top: -300px;
opacity: 0
}

to {
top: 0;
opacity: 1
}
}

@keyframes slideIn {
from {
top: -300px;
opacity: 0
}

to {
top: 0;
opacity: 1
}
}

@-webkit-keyframes fadeIn {
from {
opacity: 0
}

to {
opacity: 1
}
}

@keyframes fadeIn {
from {
opacity: 0
}

to {
opacity: 1
}
}

@media (min-width: 768px) {
.modal-content {
width: 580px;
}
}

@media (min-height: 640px) {
.modal {
padding-top: 5px;
}
}

@media (max-width: 767px) {
.modal-content {
width: 100%;
}
}

</style>
<style>
/* Style the step */
div.step {
overflow: hidden;
}

div.no_navigationr {
pointer-events: none;
}

/* Style the buttons inside the step */
div.step button {
background-color: inherit;
float: left;
border-radius: 50px;
border-top: 1px solid #337AB7;
border-bottom: 1px solid #337AB7;
border-left: 1px solid #337AB7;
border-right: 1px solid #337AB7;
outline: none;
cursor: pointer;
padding: 12px 14px;
margin: 0 auto;
color: #337AB7;
}

.connecting-line {
float: left;
height: 2px;
background: #e0e0e0;
width: 50px;
top: 50%;
margin: 25px auto;
z-index: 1;
}

.spacer {
float: left;
height: 1px;
width: 25px;
}

.steplinks.disabled {
cursor: not-allowed;
background-color: #ddd;
border-top: 1px solid #f1f1f1;
border-bottom: 1px solid #f1f1f1;
border-left: 1px solid #f1f1f1;
border-right: 1px solid #f1f1f1;
color: #555555;
}



/* Change background color of buttons on hover */
div.step button:hover {
background-color: #23567F;
color: #FFFFFF;
}

div.step button.disabled:hover {
background-color: #ddd;
color: #555555;
}

.steplinks.no_revert_wizard:hover,
.steplinks.no_revert_wizard {
cursor: not-allowed;
color: #337AB7;
background-color: #FFFFFF;
}

/* Create an active/current steplink class */
div.step button.active {
background-color: #337AB7;
color: #FFFFFF;
margin-bottom: 40;
}

/* Style the step content */
.stepcontent {
display: none;
padding: 6px 12px;

}

@media (max-width: 360px) {
.connecting-line {
width: 2px !important;
}

.input-group {
display: block;
}
}

</style>
<!--endRemoveIf(cleanheader)-->

<!-- smoosh -->
<style>
body {
font-family: "Arial", sans-serif;
font-size: 14px;
}

.form_control {
height: 34px !important;
}
.fixedbutton{
width: 8em !important;
text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
}
.input-min {
min-width: 8em;
}

.ico_feedback {
right: 1em !important;
top: 3px;
z-index: 10 !important;
}

.no_overflow {
text-overflow: ellipsis;
overflow: hidden;
white-space: nowrap;
}

.hide_it {
display: none;
}

.not_visible {
visibility: hidden;
}

.no_margin {
margin: 0 !important;
line-height: 0;
}

.noshowonlowrestab {}

.btn-svg {
padding: 4px 0px 0px 0px !important;
width: 34px !important;
height: 34px !important;
}

.btn-svg-no_pad {
padding: 0px 0px 0px 0px !important;
height: 34px !important;
}

.noshowonlowres {
display: inline-block;
}

.loadertxt {
position: absolute;
top: 50%;
left: 50%;
margin: 15px 10px;
text-align: center;
z-index: 2;
}

.topmarginspace {
margin-top: 20px
}

.loader {
border: 4px solid #f3f3f3;
/* Light grey */
border-top: 4px solid #3498db;
/* Blue */
border-radius: 50%;
width: 50px;
height: 50px;
animation: spin 2s linear infinite;
z-index: 1;
}

.loader_centered {
background-color: white;
position: absolute;
top: 50%;
left: 50%;
margin: auto;
}


@-webkit-keyframes pulse {
50% {
background: red;
}
}

@keyframes pulse {
50% {
background: red;
}
}

.loader-pulse {
position: relative;
width: 0.25em;
height: 0.4em;
background: rgba(255, 0, 0, 0.2);
-webkit-animation: pulse 750ms infinite;
animation: pulse 750ms infinite;
-webkit-animation-delay: 250ms;
animation-delay: 250ms;
}

.loader-pulse:before,
.loader-pulse:after {
content: '';
position: absolute;
display: block;
height: 0.4em;
width: 0.25em;
background: rgba(255, 0, 0, 0.2);
top: 50%;
-webkit-transform: translateY(-50%);
transform: translateY(-50%);
-webkit-animation: pulse 750ms infinite;
animation: pulse 750ms infinite;
}

.loader-pulse:before {
left: -0.5em;
}

.loader-pulse:after {
left: 0.5em;
-webkit-animation-delay: 500ms;
animation-delay: 500ms;
}

.panel-min-width {
min-width: 350px;
}

.panel-max-height {
max-height: 410px;
}

.panel-footer-height {
min-height: 4em;
}

.panel-scroll {
overflow-y: scroll;
}

@keyframes spin {
0% {
transform: rotate(0deg);
}

100% {
transform: rotate(360deg);
}
}


@-webkit-keyframes pulse {
50% {
background: red;
}
}

@keyframes pulse {
50% {
background: red;
}
}

.list-group-hover:hover {
background-color: #f5f5f5;
}

.table-borderless tbody tr td,
.table-borderless tbody tr th,
.table-borderless thead tr td,
.table-borderless thead tr th,
.table-borderless tfoot tr th,
.table-borderless tfoot tr td {
border: none;
}


.panel-footer1 {
padding: 10px 15px;
color: #31708f;
background-color: #f5f5f5;
border-color: #dddddd;
border-top: 1px solid #dddddd;
}

.filetext {
display: block;
width: 12em;
min-width: 12em;
max-width: 12em;
height: 34px;
padding: 6px 6px;
font-size: 14px;
color: #555555;
background-color: #ffffff;
background-image: none;
text-align: left;
border: 0px solid #ffffff;
}

.wauto {
width: auto !important;
}

.w4 {
width: 4em !important;
}

.w5 {
width: 5em !important;
}

.w6 {
width: 6em !important;
}

.w8 {
width: 8em !important;
}

w14 {
width: 14em !important;
}

w25 {
width: 25em !important;
}

.w50 {
width: 50em !important;
}

@media (max-width: 360px) {
.container-fluid {
min-width: 350px;
margin-left: -10px;
margin-right: -10px;
}

.panel {
margin-left: -17px;
margin-right: -13px;
}

.pull-left,
.pull-right {
float: unset !important;
}

noshowonlowrestab,
.noshowonlowres {
display: none;
}
}

@media (min-width: 361px) and (max-width: 640px) {
.container-fluid {
min-width: 350px;
margin-left: -10px;
margin-right: -10px;
}

.panel {
margin-left: -17px;
margin-right: -13px;
}

noshowonlowrestab,
.noshowonlowres {
display: none;
}
}

.grid-container {
display: inline-grid;
grid-gap: 10px;
padding: 10px;
grid-template-columns: auto auto auto auto auto;
}

.position-container {
margin-left: -10px;
display: inline-grid;
grid-gap: 10px;
padding: 10px;
grid-template-columns: auto auto auto auto;
}

.position_text {
font-size: 16px;
font-weight: bold;
}

.macro-container {
display: inline-grid;
grid-gap: 10px;
padding: 10px;
grid-template-columns: auto auto;
}

.panel-flex-col {
display: flex;
flex-direction: column;
width: 100%;
}

.panel-flex-center {
align-items: center;
justify-content: center;
}

.item-flex-row {
display: flex;
flex-direction: row;
flex-wrap: nowrap;
}

.item-flex-row-wrap {
display: flex;
flex-direction: row;
flex-wrap: wrap;
}

.panel-flex-row {
display: flex;
flex-direction: row;
flex-wrap: wrap;
}

.panel-flex-main {
flex: 1;
}

@media only screen and (max-width: 1200px) {
.macro-container {
grid-template-columns: auto auto auto;
}
}

@media only screen and (max-width: 800px) {
.grid-container {
grid-template-columns: 100%;
}
}


@media (min-width: 800px) and (max-width: 1350px){
.fixedbutton {
width: 6em !important;
}
}

@media (min-width: 801px) and (max-width: 1600px) {
.grid-container {
grid-template-columns: 50% 50%;
}
}

@media (min-width: 1601px) and (max-width: 2400px) {
.grid-container {
grid-template-columns: 33% 34% 33%;
}
}

@media (min-width: 2401px) and (max-width: 3200px) {
.grid-container {
grid-template-columns: 25% 25% 25% 25%;
}
}

@media (min-width: 3201px) and (max-width: 4000px) {
.grid-container {
grid-template-columns: 20% 20% 20% 20% 20%;
}
}

@media (min-width: 1600px) {
.fixedbutton {
width: 6em !important;
}
}

@media (min-width: 641px) {
.container-fluid {
min-width: 350px;
}

}

.status_text {
font-size: 25px;
letter-spacing: 2px;
word-spacing: 2px;
color: #000000;
font-weight: 900;
text-decoration: none;
font-style: normal;
font-variant: small-caps slashed-zero;
;
text-transform: none;
}

.td_center {
align: center;
valign: middle;
text-align: center;
}

.button_txt {}

</style>
<!-- endsmoosh -->
</head>

<body>
<div id="loadingmsg">
<center>
<h3>Loading....</h3>
</center>
</div>
<div id="main_ui" class="container-fluid hide_it">
<!-- topnavbar -->
<nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0; padding-right:2em;">
<div class="navbar-header">
<span class="navbar-brand">
<span translate>ESP3D for</span>
<span id='fwName'>&nbsp;</span>
<span id='showSDused'>&nbsp;</span>
</span>
</div>

<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
<a href="#">
<i class="dropbtn">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='#337AB7' d='M50 1100h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5zM50 800h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100 q0 21 14.5 35.5t35.5 14.5zM50 500h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5zM50 200h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100 q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5z'></path>
</g>
</svg>
</i>
</a>
<div class="dropdown-content">
<div class="menu-title">
<center>
<span>UI: </span>
<span id='UI_VERSION'></span>
<span> / FW: </span>
<span id='FW_VERSION'></span>
</center>
</div>
<div class="menu-divider"></div>
<a id="FW_github" href="https://github.com/luc-github/ESP3D" target="_blank">
<span class="pull-right" translate>Firmware</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M600 1174q33 0 74 -5l38 -152l5 -1q49 -14 94 -39l5 -2l134 80q61 -48 104 -105l-80 -134l3 -5q25 -44 39 -93l1 -6l152 -38q5 -43 5 -73q0 -34 -5 -74l-152 -38l-1 -6q-15 -49 -39 -93l-3 -5l80 -134q-48 -61 -104 -105l-134 81l-5 -3q-44 -25 -94 -39l-5 -2l-38 -151 q-43 -5 -74 -5q-33 0 -74 5l-38 151l-5 2q-49 14 -94 39l-5 3l-134 -81q-60 48 -104 105l80 134l-3 5q-25 45 -38 93l-2 6l-151 38q-6 42 -6 74q0 33 6 73l151 38l2 6q13 48 38 93l3 5l-80 134q47 61 105 105l133 -80l5 2q45 25 94 39l5 1l38 152q43 5 74 5zM600 815 q-89 0 -152 -63t-63 -151.5t63 -151.5t152 -63t152 63t63 151.5t-63 151.5t-152 63z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<a id="UI_github" href="https://github.com/luc-github/ESP3D-webui" target="_blank">
<span class="pull-right" translate>Interface</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M600 1094q82 0 160.5 -22.5t140 -59t116.5 -82.5t94.5 -95t68 -95t42.5 -82.5t14 -57.5t-14 -57.5t-43 -82.5t-68.5 -95t-94.5 -95t-116.5 -82.5t-140 -59t-159.5 -22.5t-159.5 22.5t-140 59t-116.5 82.5t-94.5 95t-68.5 95t-43 82.5t-14 57.5t14 57.5t42.5 82.5t68 95 t94.5 95t116.5 82.5t140 59t160.5 22.5zM888 829q-15 15 -18 12t5 -22q25 -57 25 -119q0 -124 -88 -212t-212 -88t-212 88t-88 212q0 59 23 114q8 19 4.5 22t-17.5 -12q-70 -69 -160 -184q-13 -16 -15 -40.5t9 -42.5q22 -36 47 -71t70 -82t92.5 -81t113 -58.5t133.5 -24.5 t133.5 24t113 58.5t92.5 81.5t70 81.5t47 70.5q11 18 9 42.5t-14 41.5q-90 117 -163 189zM448 727l-35 -36q-15 -15 -19.5 -38.5t4.5 -41.5q37 -68 93 -116q16 -13 38.5 -11t36.5 17l35 34q14 15 12.5 33.5t-16.5 33.5q-44 44 -89 117q-11 18 -28 20t-32 -12z'> </path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<div class="menu-divider"></div>
<a href="#" onclick="showpreferencesdlg ()">
<span class="pull-right" translate>Preferences</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M407 800l131 353q7 19 17.5 19t17.5 -19l129 -353h421q21 0 24 -8.5t-14 -20.5l-342 -249l130 -401q7 -20 -0.5 -25.5t-24.5 6.5l-343 246l-342 -247q-17 -12 -24.5 -6.5t-0.5 25.5l130 400l-347 251q-17 12 -14 20.5t23 8.5h429z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<a href="#" onclick="setupdlg ()">
<span class="pull-right" translate>Setup</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M1000 1013l108 115q2 1 5 2t13 2t20.5 -1t25 -9.5t28.5 -21.5q22 -22 27 -43t0 -32l-6 -10l-108 -115zM350 1100h400q50 0 105 -13l-187 -187h-368q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5v182l200 200v-332 q0 -165 -93.5 -257.5t-256.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5zM1009 803l-362 -362l-161 -50l55 170l355 355z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<div class="menu-divider"></div>
<a href="#" onclick='creditsdlg()'>
<span class="pull-right" translate>Credits</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M650 1200h50q40 0 70 -40.5t30 -84.5v-150l-28 -125h328q40 0 70 -40.5t30 -84.5v-100q0 -45 -29 -74l-238 -344q-16 -24 -38 -40.5t-45 -16.5h-250q-7 0 -42 25t-66 50l-31 25h-61q-45 0 -72.5 18t-27.5 57v400q0 36 20 63l145 196l96 198q13 28 37.5 48t51.5 20z M650 1100l-100 -212l-150 -213v-375h100l136 -100h214l250 375v125h-450l50 225v175h-50zM50 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500q0 21 14.5 35.5t35.5 14.5z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
</div>
</li>
</ul>
<ul class="nav navbar-nav navbar-right hide_it" id="menu_authentication">
<li class="dropdown">
<a href="#">
<i class="dropbtn">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='#337AB7' d='M600 1200q124 0 212 -88t88 -212v-250q0 -46 -31 -98t-69 -52v-75q0 -10 6 -21.5t15 -17.5l358 -230q9 -5 15 -16.5t6 -21.5v-93q0 -10 -7.5 -17.5t-17.5 -7.5h-1150q-10 0 -17.5 7.5t-7.5 17.5v93q0 10 6 21.5t15 16.5l358 230q9 6 15 17.5t6 21.5v75q-38 0 -69 52 t-31 98v250q0 124 88 212t212 88z'></path>
</g>
</svg>
<span id="current_ID"></span>
<span id="current_auth_level"></span>
</i>
</a>
<div class="dropdown-content">
<a href="#" onclick="changepassworddlg()" id="password_menu" class="hide_it">
<span class="pull-right" translate>Password</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M900 800v200q0 83 -58.5 141.5t-141.5 58.5h-300q-82 0 -141 -59t-59 -141v-200h-100q-41 0 -70.5 -29.5t-29.5 -70.5v-600q0 -41 29.5 -70.5t70.5 -29.5h900q41 0 70.5 29.5t29.5 70.5v600q0 41 -29.5 70.5t-70.5 29.5h-100zM400 800v150q0 21 15 35.5t35 14.5h200 q20 0 35 -14.5t15 -35.5v-150h-300z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<a href="#" onclick="logindlg()">
<span class="pull-right" translate>Login</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M550 1100h400q165 0 257.5 -92.5t92.5 -257.5v-400q0 -165 -92.5 -257.5t-257.5 -92.5h-400q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h450q41 0 70.5 29.5t29.5 70.5v500q0 41 -29.5 70.5t-70.5 29.5h-450q-21 0 -35.5 14.5t-14.5 35.5v100 q0 21 14.5 35.5t35.5 14.5zM338 867l324 -284q16 -14 16 -33t-16 -33l-324 -284q-16 -14 -27 -9t-11 26v150h-250q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h250v150q0 21 11 26t27 -9z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
<div class="menu-divider" id="logout_menu_divider" class="hide_it"></div>
<a href="#" onclick="confirmdlg(translate_text_item('Disconnection requested'), translate_text_item('Please confirm disconnection.'), DisconnectLogin); " id="logout_menu" class="hide_it">
<span class="pull-right" translate>Log out</span>
<span class="pull-left">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path d='M350 1100h400q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-450q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h450q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400 q0 165 92.5 257.5t257.5 92.5zM938 867l324 -284q16 -14 16 -33t-16 -33l-324 -284q-16 -14 -27 -9t-11 26v150h-250q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h250v150q0 21 11 26t27 -9z'></path>
</g>
</svg>
</span>
<span class="clearfix"></span>
</a>
</div>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<a id="DHT_humidity">20%</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-right">
<li>
<a id="DHT_temperature">20&deg;C</a>
</li>
</ul>
<ul class="nav navbar-nav navbar-right" id='lock_ui_btn'>
<li class="dropdown">
<a href="#" onclick="ontoggleLock()">
<i class="dropbtn">
<label>
<input type="checkbox" id="lock_UI" />
<span id='lock_UI_btn_txt'>Unlock interface</span>
</label>
</i>
</a>
</li>
</ul>
</nav>
<!-- /topnavbar -->
<!-- tabbar -->
<div class="tab" id="mainuitablinks">
<button class="tablinks" onclick="opentab(event, 'maintab', 'mainuitabscontent', 'mainuitablinks')" id="maintablink">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M100 1196h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 1096h-200v-100h200v100zM100 796h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000 q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 696h-500v-100h500v100zM100 396h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 296h-300v-100h300v100z '></path>
</g>
</svg>
<span translate>Dashboard</span>
</button>
<button class="tablinks hide_it" onclick="opentab(event, 'cameratab', 'mainuitabscontent', 'mainuitablinks')" id="camtablink">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M75 1000h750q31 0 53 -22t22 -53v-650q0 -31 -22 -53t-53 -22h-750q-31 0 -53 22t-22 53v650q0 31 22 53t53 22zM1200 300l-300 300l300 300v-600z'></path>
</g>
</svg>
<span translate>Camera</span>
</button>
<button class="tablinks hide_it" onclick="opentab(event, 'configtab', 'mainuitabscontent', 'mainuitablinks')" id="configtablink">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M756 1157q164 92 306 -9l-259 -138l145 -232l251 126q6 -89 -34 -156.5t-117 -110.5q-60 -34 -127 -39.5t-126 16.5l-596 -596q-15 -16 -36.5 -16t-36.5 16l-111 110q-15 15 -15 36.5t15 37.5l600 599q-34 101 5.5 201.5t135.5 154.5z'></path>
</g>
</svg>
<span id='tab_printer_configuration'><span translate>Printer</span><span>
</button>
<button class="tablinks" onclick="opentab(event, 'settingstab', 'mainuitabscontent', 'mainuitablinks')" id="settingtablink">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M212 1198h780q86 0 147 -61t61 -147v-416q0 -51 -18 -142.5t-36 -157.5l-18 -66q-29 -87 -93.5 -146.5t-146.5 -59.5h-572q-82 0 -147 59t-93 147q-8 28 -20 73t-32 143.5t-20 149.5v416q0 86 61 147t147 61zM600 1045q-70 0 -132.5 -11.5t-105.5 -30.5t-78.5 -41.5 t-57 -45t-36 -41t-20.5 -30.5l-6 -12l156 -243h560l156 243q-2 5 -6 12.5t-20 29.5t-36.5 42t-57 44.5t-79 42t-105 29.5t-132.5 12zM762 703h-157l195 261z'></path>
</g>
</svg>
<span translate>ESP3D</span>
</button>
</div>
<!-- / tabbar -->
<!-- content -->
<div id="mainuitabscontent">
<div id="maintab" class="tabcontent">
<div class="panel-flex-col">
<div class="grid-container">
<div id="controlPanel" class="panel panel-default panel-flex-col panel-min-width">
<div class="panel-heading ">
<div class="row ">
<div class="col-md-12">
<div class="pull-left">
<b><span translate>Controls</span></b>
</div>
<div class="pull-right">
<div id="auto_check_control" class="panel-flex-row">
<table class="checkbox">
<tr>
<td>&nbsp;&nbsp;</td>
<td>
<label>
<input type="checkbox" id="autocheck_position" onclick="on_autocheck_position()" />
<span translate>auto-check position every:</span>
</label>
</td>
</tr>
</table>
<table class="input-group">
<tr>
<td>
<input class="form-control w4" type="number" min="1" max="99" id="posInterval_check" onchange="onPosIntervalChange()" />
<span class="input-group-addon form_control" translate>sec</span>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div id="control-body" class="panel-body panel-flex-main">
<div class="row">
<div id="JogUI" class="col col-md-7 col-lg-7">
<object type="image/svg+xml">


<svg width="310" height="260" xmlns="http://www.w3.org/2000/svg" version="1.1">
<script type="text/ecmascript">
function Onhover(evt, id) {
document.getElementById(id).style.opacity="1";
}
function Onout(evt,id) {
document.getElementById(id).style.opacity="0.2";
}
</script>
<defs><style type="text/css">
<![CDATA[
text.home {
font-weight:900;
font-size:16;
pointer-events:none;
}
text.scl {
stroke:white;
fill:white;
pointer-events:none;
}
circle.scl {
fill:black;
fill-opacity:0.5;
stroke:red;
stroke-width:3;
filter:url(#f1);
pointer-events:none;
}
path.home {
stroke:black;
}
path.std {
stroke:black;
stroke-width:1;
filter:url(#f1);
}
path.std2 {
stroke:black;
stroke-width:1;
filter:url(#f1);
}
path.std:hover {
fill:orange;
}
rect.std {
stroke:black;
stroke-width:1;
filter:url(#f1);
}
rect.std:hover {
fill:orange;
}
]]>
</style><filter id="f1" x="-1" y="-1" width="300%" height="300%">
<feOffset result="offOut" in="SourceAlpha" dx="3" dy="3"></feOffset>
<feGaussianBlur result="blurOut" in="offOut" stdDeviation="4"></feGaussianBlur>
<feBlend in="SourceGraphic" in2="blurOut" mode="normal"></feBlend></filter>
<symbol id="HomeIcon" viewBox="0 0 20 18" pointer-events="none">
<desc>HomeIcon - house</desc><path class="home" d="M3,18 v-8 l7,-6 l7,6 v8 h-5 v-6 h-4 v6 z" fill="black"></path><path class="home" d="M0,10 l10-8.5 l10,8.5" stroke-width="1.5" fill="none"></path><path class="home" d="M15,3 v2.8 l1,.8 v-3.6 z"></path>
</symbol>
</defs>
<g id="JogRose"><g id="HomeAll" onmouseup="SendHomecommand('G28')"><path class="std" d="M10 182.5 h-10 v57.5 h57.5 v-10 a 125,125 0 0,1 -47.5 -47.5 Z" fill="#f0f0f0"></path>
<use x="3" y="217" width="20" height="18" xlink:href="#HomeIcon"></use></g>
<g id="HomeX" onmouseup="SendHomecommand('G28 X0')"><path class="std" d="M10 57.50 h-10 v-57.5 h57.5 v10 a 125,125 0 0,0 -47.5 47.5 Z" fill="Khaki"></path><use x="3" y="5" width="20" height="18" xlink:href="#HomeIcon"></use><text x="25" y="20" class="home"> X </text></g>
<g id="HomeY" onmouseup="SendHomecommand('G28 Y0')"><path class="std" d="M230 57.50 h10 v-57.5 h-57.5 v10 a 125,125 0 0,1 47.5 47.5 z" fill="SteelBlue"></path><use x="217" y="5" width="20" height="18" xlink:href="#HomeIcon"></use><text x="202" y="20" class="home"> Y </text></g>
<g id="HomeZ" onmouseup="SendHomecommand('G28 Z0')"><path class="std" d="M230 182.5 h10 v57.5 h-57.5 v-10 a 125,125 0 0,0 47.5 -47.5 z" fill="DarkSeaGreen"></path><use x="217" y="217" width="20" height="18" xlink:href="#HomeIcon"></use><text x="202" y="232" class="home" id="homeZlabel"> Z </text></g>
<g id="CornerZ" ><path  class="std2" d="M230 182.5 h10 v57.5 h-57.5 v-10 a 125,125 0 0,0 47.5 -47.5 z" fill="DarkSeaGreen"></path></g>

<g id="Jog100" fill="#c0c0c0" class="std"><g id="Y+100" onmouseover="Onhover(evt, 'xy100')" onmouseout="Onout(evt, 'xy100')"  onmouseup="SendJogcommand('Y100','XYfeedrate')" transform="translate(120 120)"><path class="std" d="M-60 -67.07 L-75.93,-83 A112.5,112.5 0 0,1 75,-83 L60,-67.07 A90,90 0 0,0 -60.00,-67.07 z"></path></g>
<g id="X+100" onmouseup="SendJogcommand('X100','XYfeedrate')" onmouseover="Onhover(evt, 'xy100')" onmouseout="Onout(evt, 'xy100')"  transform="translate(120 120)"><path class="std" d="M67.07,-60 L83,-75.93 A112.5,112.5 0 0,1 83,75.93 L67.07,60 A90,90 0 0,0 67.07,-60"></path></g>
<g id="Y-100" onmouseup="SendJogcommand('Y-100','XYfeedrate')" onmouseover="Onhover(evt, 'xy100')" onmouseout="Onout(evt, 'xy100')" transform="translate(120 120)"><path class="std" d="M-60,67.07 L-75.93,83 A112.5,112.5 0 0,0 75,83 L60,67.07 A90,90 0 0,1 -60.00,67.07 z"></path></g>
<g id="X-100" onmouseup="SendJogcommand('X-100','XYfeedrate')" onmouseover="Onhover(evt, 'xy100')" onmouseout="Onout(evt, 'xy100')" transform="translate(120 120)"><path class="std" d="M-67.07,-60 L-83,-75.93 A112.5,112.5 0 0,0 -83,75.93 L-67.07,60 A90,90 0 0,1 -67.07,-60 z"></path></g></g>
<g id="Jog10" fill="#d0d0d0"><g id="Y+10" onmouseup="SendJogcommand('Y10','XYfeedrate')" onmouseover="Onhover(evt, 'xy10')" onmouseout="Onout(evt, 'xy10')" transform="translate(120 120)"><path class="std" d="M-44.06 -51.13 L-60,-67.07 A90,90 0 0,1 60,-67 L44.06,-51.13 A67.5,67.5 0 0,0 -44.06,-51.13 z"></path></g>
<g id="X+10" onmouseup="SendJogcommand('X10','XYfeedrate')" onmouseover="Onhover(evt, 'xy10')" onmouseout="Onout(evt, 'xy10')"transform="translate(120 120)"><path class="std" d="M51.13 44.06 L67.07,60 A90,90 0 0,0 67.07,-60 L51.13,-44.06 A67.5,67.5 0 0,1 51.13,44.06 z"></path></g>
<g id="Y-10" onmouseup="SendJogcommand('Y-10','XYfeedrate')" onmouseover="Onhover(evt, 'xy10')" onmouseout="Onout(evt, 'xy10')" transform="translate(120 120)"><path class="std" d="M-44.06 51.13 L-60,67.07 A90,90 0 0,0 60,67 L44.06,51.13 A67.5,67.5 0 0,1 -44.06,51.13 z"></path></g>
<g id="X-10" onmouseup="SendJogcommand('X-10','XYfeedrate')" onmouseover="Onhover(evt, 'xy10')" onmouseout="Onout(evt, 'xy10')" transform="translate(120 120)"><path class="std" d="M-51.13 44.06 L-67.07,60 A90,90 0 0,1 -67.07,-60 L-51.13,-44.06 A67.5,67.5 0 0,0 -51.13,44.06 z"></path></g></g>
<g id="Jog1" fill="#e0e0e0">
<g id="Y+1" onmouseup="SendJogcommand('Y1','XYfeedrate')" onmouseover="Onhover(evt, 'xy1')" onmouseout="Onout(evt, 'xy1')" transform="translate(120 120)"><path class="std" d="M-28.09 -35.16 L-44.06,-51.13 A67.5,67.5 0 0,1 44.06,-51.13 L28.09,-35.16 A45,45 0 0,0 -28.09,-35.16 z"></path></g>
<g id="X+1" onmouseup="SendJogcommand('X1','XYfeedrate')" onmouseover="Onhover(evt, 'xy1')" onmouseout="Onout(evt, 'xy1')" transform="translate(120 120)"><path class="std" d="M35.16 -28.09 L51.13,-44.06 A67.5,67.05 0 0,1 51.13,44.06 L35.16,28.09 A45,45 0 0,0 35.16,-28.09 z"></path></g>
<g id="Y-1" onmouseup="SendJogcommand('Y-1','XYfeedrate')" onmouseover="Onhover(evt, 'xy1')" onmouseout="Onout(evt, 'xy1')" transform="translate(120 120)"><path class="std" d="M-28.09 35.16 L-44.06,51.13 A67.5,67.5 0 0,0 44.06,51.13 L28.09,35.16 A45,45 0 0,1 -28.09,35.16 z"></path></g>
<g id="X-1" onmouseup="SendJogcommand('X-1','XYfeedrate')" onmouseover="Onhover(evt, 'xy1')" onmouseout="Onout(evt, 'xy1')" transform="translate(120 120)"><path class="std" d="M-35.16 -28.09 L-51.13,-44.06 A67.5,67.05 0 0,0 -51.13,44.06 L-35.16,28.09 A45,45 0 0,1 -35.16,-28.09 z"></path></g></g>
<g id="Jog0_1" fill="#f0f0f0">
<g id="Y+0.1" onmouseup="SendJogcommand('Y0.1','XYfeedrate')" onmouseover="Onhover(evt, 'xy01')" onmouseout="Onout(evt, 'xy01')" transform="translate(120 120)"><path class="std" d="M-28.09 -35.16 A45,45 0 0,1 29.09,-35.16 L0,-7.07 z"></path></g>
<g id="X+0_1" onmouseup="SendJogcommand('X0.1','XYfeedrate')" onmouseover="Onhover(evt, 'xy01')" onmouseout="Onout(evt, 'xy01')"  transform="translate(120 120)"><path class="std" d="M35.16 -28.09 A45,45 0 0,1 35.16,28.09 L7.07,0 z"></path></g>
<g id="Y-0_1" onmouseup="SendJogcommand('Y-0.1','XYfeedrate')" onmouseover="Onhover(evt, 'xy01')" onmouseout="Onout(evt, 'xy01')"  transform="translate(120 120)"><path class="std" d="M-28.09 35.16 A45,45 0 0,0 29.09,35.16 L0,7.07 z"></path></g>
<g id="X-0_1" onmouseup="SendJogcommand('X-0.1','XYfeedrate')" onmouseover="Onhover(evt, 'xy01')" onmouseout="Onout(evt, 'xy01')" transform="translate(120 120)"><path class="std" d="M-35.16 -28.09 A45,45 0 0,0 -35.16,28.09 L-7.07,0 z"></path></g></g>
<g id="RoseScale">
<g id="xy01" style="opacity:0.2">
<circle class="scl" cx="144" cy="96" r="9.5"></circle>
<text class="scl" x="137" y="99" font-size="10"> 0.1 </text>
</g>
<g id="xy1" style="opacity:0.2">
<circle class="scl" cx="159.5" cy="80.5" r="10.5"></circle>
<text class="scl" x="155" y="85" font-size="14"> 1 </text>
</g>
<g id="xy10" style="opacity:0.2">
<circle class="scl" cx="175" cy="65" r="12"></circle>
<text class="scl" x="166" y="70" font-size="15"> 10 </text>
</g>
<g id="xy100" style="opacity:0.2">
<circle class="scl" cx="195" cy="45" r="15"></circle>
<text class="scl" x="182" y="50" font-size="15"> 100 </text>
</g>
</g>
<g id="Decoration" pointer-events="none" font-weight="900" font-size="11" fill-opacity=".6"><path class="std" d="M120,20 l17,17 h-10 v11 h-14 v-11 h-10 z" fill="SteelBlue"></path><path class="std" d="M120,220 l17,-17 h-10 v-11 h-14 v11 h-10 z" fill="SteelBlue"></path><path class="std" d="M20,120 l17,17 v-10 h11 v-14 h-11 v-10 z" fill="Khaki"></path><path class="std" d="M220,120 l-17,-17 v10 h-11 v14 h11 v10 z" fill="Khaki"></path><text x="113" y="37" > +Y </text><text x="113" y="212"> -Y </text><text x="27" y="124"> -X </text><text x="196" y="124"> +X </text></g></g>

<g id="JogBar" transform="translate(250,0)"><desc>JogBar - Z jogging bar</desc>
<g id="+Z" fill="#b0b0b0" style="pointer-events:none;"><path class="std" d=" M5,0 h30 a5,5 0 0,1 5,5 v27 h-40 v-27 a5,5 0 0,1 5,-5 z"></path><path class="std" d="M20,2 l17,17 h-10 v11 h-14 v-11 h-10 z" fill="DarkSeaGreen"></path><text stroke="black" x="11" y="18" font-size="12" id="axisup"> +Z </text></g>
<g id="-Z" fill="#b0b0b0" style="pointer-events:none;"><path class="std" d=" M0,208 h40 v27 a5,5 0 0,1 -5,5 h-30 a5,5 0 0,1 -5,-5 z"></path><path class="std" d="M20,238 l-17,-17 h10 v-11 h14 v11 h10 z" fill="DarkSeaGreen"></path><text stroke="black" x="13" y="230" font-size="12" id="axisdown"> -Z </text></g>
<g id="Z+10" fill="#d0d0d0" onmouseup="SendJogcommand('Z10','Zfeedrate')" onmouseover="Onhover(evt, 'z10')" onmouseout="Onout(evt, 'z10')"><rect class="std" x="0" y="32" width="40" height="30"></rect>
<g id="z10" style="opacity:0.2">
<circle class="scl" cx="20" cy="47" r="13"></circle>
<text class="scl" x="9" y="53" font-size="18"> 10 </text>
</g>
</g>
<g id="Z+1" fill="#e0e0e0" onmouseup="SendJogcommand('Z1','Zfeedrate')" onmouseover="Onhover(evt, 'z1')" onmouseout="Onout(evt, 'z1')"><rect class="std" x="0" y="62" width="40" height="26"></rect>
<g id="z1" style="opacity:0.2">
<circle class="scl" cx="20" cy="75" r="11"></circle>
<text class="scl" x="15" y="81.5" font-size="18"> 1 </text>
</g>
</g>
<g id="Z+0.1" fill="#f0f0f0" onmouseup="SendJogcommand('Z0.1','Zfeedrate')" onmouseover="Onhover(evt, 'z01')" onmouseout="Onout(evt, 'z01')"><rect class="std" x="0" y="88" width="40" height="24"></rect>
<g id="z01" style="opacity:0.2">
<circle class="scl" cx="20" cy="100" r="9.5"></circle>
<text class="scl" x="13" y="103.5" font-size="10"> 0.1 </text>
</g>
</G>
<g id="Z-10" fill="#d0d0d0" onmouseup="SendJogcommand('Z-10','Zfeedrate')" onmouseover="Onhover(evt, 'z10')" onmouseout="Onout(evt, 'z10')"><rect class="std r10" x="0" y="178" width="40" height="30"></rect></g>
<g id="Z-1" fill="#e0e0e0" onmouseup="SendJogcommand('Z-1','Zfeedrate')" onmouseover="Onhover(evt, 'z1')" onmouseout="Onout(evt, 'z1')"><rect class="std" x="0" y="152" width="40" height="26"></rect></g>
<g id="Z-0_1" fill="#f0f0f0" onmouseup="SendJogcommand('Z-0.1','Zfeedrate')" onmouseover="Onhover(evt, 'z01')" onmouseout="Onout(evt, 'z01')"><rect class="std" x="0" y="128" width="40" height="24"></rect></g>
<g id="ZSpace" fill="#000000" style="pointer-events:none;"><rect class="std" x="0" y="112" width="40" height="16"></rect></g>
</g>
</g></svg>



</object>
</div>
<div class="col col-lg-4 " >
<div id="Macro_list" class="macro-container">
</div>
</div>
<div class="col">
&nbsp;
</div>
</div>
<div>
<button class="btn btn-xs btn-default" id="zero_xyz_btn" onclick="SendZerocommand(grblzerocmd)">&Oslash;<span style="font-size:8px;" id="zero_xyz_btn_txt">XY</span></button>
</div><br>
<div class="position-container" id="positions_labels">
<div class="position_text">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_x_btn" onclick="SendZerocommand('X0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_x_position_label">X</span>:<span id="control_x_position">&nbsp;</span></span>
</td>
<td>
</td>
</tr>
<tr id="control_xm_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_xm_position_label">Xm</span>:<span id="control_xm_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="position_text">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_y_btn" onclick="SendZerocommand('Y0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_y_position_label">Y</span>:<span id="control_y_position">&nbsp;</span></span>
</td>
<td>
</td>
</tr>
<tr id="control_ym_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_yt_position_label">Ym</span>:<span id="control_ym_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="position_text" id="control_z_position_display">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_z_btn" onclick="SendZerocommand('Z0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_z_position_label">Z</span>:<span id="control_z_position">&nbsp;</span></span>
</td>
</tr>
<tr id="control_zm_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_zm_position_label">Zm</span>:<span id="control_zm_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</div>
<br>
<div class="position-container hide_it" id="positions_labels2">
<div class="position_text hide_it" id="control_a_position_display">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_a_btn" onclick="SendZerocommand('A0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_a_position_label">Aw</span>:<span id="control_a_position">&nbsp;</span></span>
</td>
<td>
</td>
</tr>
<tr id="control_am_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_am_position_label">Am</span>:<span id="control_am_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="position_text hide_it" id="control_b_position_display">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_b_btn" onclick="SendZerocommand('B0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_b_position_label">Bw</span>:<span id="control_b_position">&nbsp;</span></span>
</td>
<td>
</td>
</tr>
<tr id="control_bm_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_bt_position_label">Bm</span>:<span id="control_bm_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
<div class="position_text hide_it" id="control_c_position_display">
<table>
<tr>
<td>
<button class="btn btn-xs btn-default" id="zero_c_btn" onclick="SendZerocommand('C0')">&Oslash;</button>
</td>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_c_position_label">Cw</span>:<span id="control_c_position">&nbsp;</span></span>
</td>
</tr>
<tr id="control_zm_position_row">
<td></td>
<td>
<table>
<tr style="height: 5px;">
</tr>
<tr>
<td>
<span class="label label-default" style="padding: 5px 5px 3px 5px;"><span id="control_cm_position_label">Cm</span>:<span id="control_cm_position">&nbsp;</span></span>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="panel-footer">
<div class="panel-flex-row">

<table class="input-group">
<tr>
<td>
<span class="input-group-addon form_control">XY:</span>
<input class="hide_it"></input>
</td>
<td>
<span class="input-group-addon hide_it"></span>
<input class="form-control w8" type="number" min="1" id="control_xy_velocity" onchange="onXYvelocityChange()" />
<span class="input-group-addon form_control" translate>mm/min</span>
</td>
</tr>
</table>

&nbsp;
<table id="z_velocity_display" class="input-group">
<tr>
<td >
<span class="input-group-addon form_control" id="axis_label">Z:</span>
<input class="hide_it"></input>
</td>
<td class="hide_it" id="axis_selection">
</td>
<td>
<span class="input-group-addon hide_it"></span>
<input class="form-control w5" type="number" min="1" id="control_z_velocity" onchange="onZvelocityChange()" />
<span class="input-group-addon form_control" translate>mm/min</span>
</td>
</tr>
</table>

&nbsp;
<button id='motor_off_control' class="btn btn-primary" onclick="control_motorsOff()" translate>Motors off</button>
</div>
</div>
</div>
<div id="grblPanel" class="panel panel-default panel-flex-col panel-min-width">
<div class="panel-heading ">
<div class="row ">
<div class="col-md-12">
<div class="pull-left">
<b><span translate>GRBL</span></b>
</div>
<div class="pull-right">
<div class="panel-flex-row">
<table class="checkbox">
<tr>
<td>&nbsp;&nbsp;</td>
<td>
<label>
<input type="checkbox" id="autocheck_status" onclick="on_autocheck_status()" />
<span translate>auto-check every:</span>
</label>
</td>
</tr>
</table>
<table class="input-group">
<tr>
<td>
<input class="form-control w4" type="number" min="1" max="99" id="statusInterval_check" value=3 onchange="onstatusIntervalChange()" />
<span class="input-group-addon form_control" translate>sec</span>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>

<div id="control-body" class="panel-body panel-flex-main">
<div class="panel-flex-col">
<table width="100%">
<tr>
<td class="td_center">
<table>
<tr>
<td>
<button id="clear_status_btn" class="btn btn-default btn-xs hide_it" onclick="SendPrinterCommand('$X', true, null,null, 114, 1);" style="padding: 5px 5px 0 5px;">
<svg width="2em" height="1.8em" viewBox="-200 -200 1700 1600">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M553 1200h94q20 0 29 -10.5t3 -29.5l-18 -37q83 -19 144 -82.5t76 -140.5l63 -327l118 -173h17q19 0 33 -14.5t14 -35t-13 -40.5t-31 -27q-8 -4 -23 -9.5t-65 -19.5t-103 -25t-132.5 -20t-158.5 -9q-57 0 -115 5t-104 12t-88.5 15.5t-73.5 17.5t-54.5 16t-35.5 12l-11 4 q-18 8 -31 28t-13 40.5t14 35t33 14.5h17l118 173l63 327q15 77 76 140t144 83l-18 32q-6 19 3.5 32t28.5 13zM498 110q50 -6 102 -6q53 0 102 6q-12 -49 -39.5 -79.5t-62.5 -30.5t-63 30.5t-39 79.5z"></path>
<circle cx="600" cy="600" r="700" stroke="red" stroke-width="100" fill="none"></circle>
<line x1="106" y1="106" x2="1094" y2="1094" stroke="red" stroke-width="100"></line>
</g>
</svg>
</button>
</td>
<td style="text-align: left; width:100%;height:30px;">
<div id="grbl_status" class="status_text" ></div>
</td>
</tr>
<tr>
<td colspan="2" style="text-align: left; height:20px;" id="grbl_status_text"></td>
</tr>
</table>
</td>
<td>
<table>
<tr>
<td style="width:100%;height:2em;"></td>
<td>
<button id="sd_pause_btn" class="btn btn-default hide_it" onclick="SendRealtimeCmd('!');" style="padding: 5px 4px 0 5px;">
<svg width="2em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="blue" d="M250 1000h200q21 0 35.5 -14.5t14.5 -35.5v-800q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v800q0 21 14.5 35.5t35.5 14.5zM650 1000h200q21 0 35.5 -14.5t14.5 -35.5v-800q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v800 q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</button>
</td>
<td>
&nbsp;
</td>
<td>
<button id="sd_resume_btn" class="btn btn-default hide_it" onclick="SendRealtimeCmd('~');" style="padding: 5px 4px 0 5px;">
<svg width="2em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="green" d="M243 1074l814 -498q18 -11 18 -26t-18 -26l-814 -498q-18 -11 -30.5 -4t-12.5 28v1000q0 21 12.5 28t30.5 -4z"></path>
</g>
</svg>
</button>
</td>
<td>
&nbsp;
</td>
<td>
<button id="sd_reset_btn" class="btn btn-danger hide_it" onclick="grbl_reset();" style="padding: 5px 0px 0px 0px;">
<svg width="2em" height="1.4em" viewBox="0 0 1200 1200">
<g transform="translate(1200,1200) scale(-1, -1)">
<path fill="white" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-362q0 -10 -7.5 -17.5t-17.5 -7.5h-362q-11 0 -13 5.5t5 12.5l133 133q-109 76 -238 76q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5h150q0 -117 -45.5 -224 t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117z"></path>
</g>
</svg>
</button>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td colspan=2 class="td_center">
<center>
<div id="grbl_SD_status"></div>
</center>
</td>
</tr>
</table>
<br>
<div class="tab" id="grbluitablinks">
<button class="tablinks" onclick="opentab(event, 'grblcontroltab', 'grbluitabscontent', 'grbluitablinks')" id="grblcontroltablink">
<span translate>Override</span>
</button>
<button class="tablinks hide_it" onclick="opentab(event, 'grblprobetab', 'grbluitabscontent', 'grbluitablinks')" id="grblprobetablink">
<span translate>Probe</span>
</button>
</div>
<div class="panel panel-default">
<div class="panel-body panel-flex-main">
<div id="grbluitabscontent">
<div id="grblcontroltab" class="tabcontent">
<table width="100%">
<tr>
<td style="height:10px;"></td>
</tr>
<tr>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x92,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M50 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5 t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">F10%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x94,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M250 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">&nbsp;F1%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x90,0x0));" style="padding: 5px 4px 0 5px;">
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-362q0 -10 -7.5 -17.5t-17.5 -7.5h-362q-11 0 -13 5.5t5 12.5l133 133q-109 76 -238 76q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5h150q0 -117 -45.5 -224 t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117z"></path>
</g>
</svg>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x93,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M850 1100h100q21 0 35.5 -14.5t14.5 -35.5v-1000q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v438l-464 -453q-15 -14 -25.5 -10t-10.5 25v1000q0 21 10.5 25t25.5 -10l464 -453v438q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">&nbsp;F1%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x91,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M1048 1102l100 1q20 0 35 -14.5t15 -35.5l5 -1000q0 -21 -14.5 -35.5t-35.5 -14.5l-100 -1q-21 0 -35.5 14.5t-14.5 35.5l-2 437l-463 -454q-14 -15 -24.5 -10.5t-10.5 25.5l-2 437l-462 -455q-15 -14 -25.5 -9.5t-10.5 24.5l-5 1000q0 21 10.5 25.5t25.5 -10.5l466 -450 l-2 438q0 20 10.5 24.5t25.5 -9.5l466 -451l-2 438q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">F10%</span>
</td>
</tr>
</table>
</button>
</td>
</tr>
<tr>
<td style="height:10px;"></td>
</tr>
<tr>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x9B,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M50 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5 t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">S10%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x9D,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M250 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">&nbsp;S1%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x99,0x0));" style="padding: 5px 4px 0 5px;">
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-362q0 -10 -7.5 -17.5t-17.5 -7.5h-362q-11 0 -13 5.5t5 12.5l133 133q-109 76 -238 76q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5h150q0 -117 -45.5 -224 t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117z"></path>
</g>
</svg>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x9C,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M850 1100h100q21 0 35.5 -14.5t14.5 -35.5v-1000q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v438l-464 -453q-15 -14 -25.5 -10t-10.5 25v1000q0 21 10.5 25t25.5 -10l464 -453v438q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">&nbsp;S1%</span>
</td>
</tr>
</table>
</button>
</td>
<td class="td_center">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x9A,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M1048 1102l100 1q20 0 35 -14.5t15 -35.5l5 -1000q0 -21 -14.5 -35.5t-35.5 -14.5l-100 -1q-21 0 -35.5 14.5t-14.5 35.5l-2 437l-463 -454q-14 -15 -24.5 -10.5t-10.5 25.5l-2 437l-462 -455q-15 -14 -25.5 -9.5t-10.5 24.5l-5 1000q0 21 10.5 25.5t25.5 -10.5l466 -450 l-2 438q0 20 10.5 24.5t25.5 -9.5l466 -451l-2 438q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt">S10%</span>
</td>
</tr>
</table>
</button>
</td>
</tr>
<tr>
<td style="height:10px;"></td>
</tr>
</table>
<table width="100%">
<tr>
<td class="td_center" width="33%">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0x9E,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M600 1186q119 0 227.5 -46.5t187 -125t125 -187t46.5 -227.5t-46.5 -227.5t-125 -187t-187 -125t-227.5 -46.5t-227.5 46.5t-187 125t-125 187t-46.5 227.5t46.5 227.5t125 187t187 125t227.5 46.5zM600 1022q-115 0 -212 -56.5t-153.5 -153.5t-56.5 -212t56.5 -212 t153.5 -153.5t212 -56.5t212 56.5t153.5 153.5t56.5 212t-56.5 212t-153.5 153.5t-212 56.5zM600 794q80 0 137 -57t57 -137t-57 -137t-137 -57t-137 57t-57 137t57 137t137 57z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt" translate>Spindle</span>
</td>
</tr>
</table>
</button>
</td>
<td>&nbsp;</td>
<td class="td_center" width="33%">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0xA0,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M554 1295q21 -72 57.5 -143.5t76 -130t83 -118t82.5 -117t70 -116t49.5 -126t18.5 -136.5q0 -71 -25.5 -135t-68.5 -111t-99 -82t-118.5 -54t-125.5 -23q-84 5 -161.5 34t-139.5 78.5t-99 125t-37 164.5q0 69 18 136.5t49.5 126.5t69.5 116.5t81.5 117.5t83.5 119 t76.5 131t58.5 143zM344 710q-23 -33 -43.5 -70.5t-40.5 -102.5t-17 -123q1 -37 14.5 -69.5t30 -52t41 -37t38.5 -24.5t33 -15q21 -7 32 -1t13 22l6 34q2 10 -2.5 22t-13.5 19q-5 4 -14 12t-29.5 40.5t-32.5 73.5q-26 89 6 271q2 11 -6 11q-8 1 -15 -10z"></path>
</g>
</svg>
</td>
<td>
<span class="button_txt" translate>Flood</span>
</td>
</tr>
</table>
</button>
</td>
<td>&nbsp;</td>
<td class="td_center" width="33%">
<button class="btn btn-default" onclick="SendRealtimeCmd(String.fromCharCode(0xA1,0x0));" style="padding: 5px 4px 0 5px;">
<table>
<tr>
<td>
<svg width="1.3em" height="1.4em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="black" d="M503 1089q110 0 200.5 -59.5t134.5 -156.5q44 14 90 14q120 0 205 -86.5t85 -207t-85 -207t-205 -86.5h-128v250q0 21 -14.5 35.5t-35.5 14.5h-300q-21 0 -35.5 -14.5t-14.5 -35.5v-250h-222q-80 0 -136 57.5t-56 136.5q0 69 43 122.5t108 67.5q-2 19 -2 37q0 100 49 185 t134 134t185 49zM525 500h150q10 0 17.5 -7.5t7.5 -17.5v-275h137q21 0 26 -11.5t-8 -27.5l-223 -244q-13 -16 -32 -16t-32 16l-223 244q-13 16 -8 27.5t26 11.5h137v275q0 10 7.5 17.5t17.5 7.5z"></path>
<circle cx="600" cy="450" r="300" stroke="black" fill="black"></circle>
</g>
</svg>
</td>
<td>
<span class="button_txt" translate>Mist</span>
</td>
</tr>
</table>
</button>
</td>
</tr>
</table>
</div>
<div id="grblprobetab" class="tabcontent" style="margin: auto;">
<table>
<tr>
<td>
<div class="input-group">
<span class="input-group-addon form_control"><span translate>Max travel</span>:</span>
<input class="hide_it" />
</div>
</td>
<td>
<div class="input-group">
<span class="input-group-addon hide_it"></span>
<input class="form-control w6" type="number" min="1" id="probemaxtravel" onchange="onprobemaxtravelChange()" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
<br>
<table>
<tr>
<td>
<div class="input-group">
<span class="input-group-addon form_control"><span translate>Feed rate</span>:</span>
<input class="hide_it" />
</div>
</td>
<td>
<div class="input-group">
<span class="input-group-addon hide_it"></span>
<input class="form-control w6" type="number" min="1" id="probefeedrate" onchange="onprobefeedrateChange()" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
<br>
<table>
<tr>
<td>
<div class="input-group">
<span class="input-group-addon form_control"><span translate>Plate thickness</span>:</span>
<input class="hide_it" />
</div>
</td>
<td>
<div class="input-group">
<span class="input-group-addon hide_it"></span>
<input class="form-control w5" type="number" min="0" id="probetouchplatethickness" onchange="onprobetouchplatethicknessChange()" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
<br>
<table>
<tr>
<td nowrap translate style="vertical-align: middle; "><span translate>Touch status</span>:</td>
<td id="touch_status_icon">

</td>
<td width='100%'>&nbsp;</td>
<td>
<span class="hide_it" id="probingtext">
<table>
<tr>
<td><span translate>Probing...</span></td>
<td>
<div class="loader" style="width:2em;height:2em;"></div>
</td>
</tr>
</table>
</span>
<button class="btn btn-primary" id="probingbtn" onclick="StartProbeProcess();" translate>Start Probe</button>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="panel-footer">
<div class="panel-flex-row">
<button id="global_reset_btn" class="btn btn-danger" onclick="grbl_reset();" style="padding: 5px 0px 0px 0px;">
<svg width="2em" height="1.4em" viewBox="0 0 1200 1200">
<g transform="translate(1200,1200) scale(-1, -1)">
<path fill="white" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-362q0 -10 -7.5 -17.5t-17.5 -7.5h-362q-11 0 -13 5.5t5 12.5l133 133q-109 76 -238 76q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5h150q0 -117 -45.5 -224 t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117z"></path>
</g>
</svg>
</button>
</div>
</div>
</div>
<div id="temperaturesPanel" class="panel panel-default panel-min-width">
<div class="panel-heading">
<div class="row">
<div class="col-md-12">
<div class="pull-left">
<b><span translate>Temperatures</span></b>
</div>
<div class="pull-right">
<div class="panel-flex-row">
<table class="checkbox">
<tr>
<td>&nbsp;&nbsp;</td>
<td>
<label>
<input type="checkbox" id="autocheck_temperature" onclick="on_autocheck_temperature()" />
<span translate>auto-check every:</span>
</label>
</td>
</tr>
</table>
<table class="input-group">
<tr>
<td>
<input class="form-control w4" type="number" min="1" max="99" id="tempInterval_check" onchange="onTempIntervalChange()" />
<span class="input-group-addon form_control" translate>sec</span>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="panel-body panel-height-temp">
<table class="table table-responsive">
<thead>
<tr>
<th translate>Name</th>
<th translate>Options</th>
<th translate nowrap>Value | Target</th>
</tr>
</thead>
<tbody>
<tr>
<td><span translate>Heater T0</span></td>
<td>
<div class="panel-flex-row">
<button onclick="temperature_heatOff('T0')" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z"></path>
</g>
</svg>
</button>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="0" max="999" id="heaterT0SelectedTemp" value=0 onkeyup="temperature_handleKeyUp(event, 'T0')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&deg;C</span>
</div>
</td>
</tr>
</table>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<button onclick="temperature_heatSet('T0')" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="heaterT0DisplayTemp"></span><span id="heaterT0TargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
<tr id="temperature_redundant" class="hide_it">
<td><span translate>Redundant</span></td>
<td>
<div class="panel-flex-row">
<span class="noshowonlowres">&nbsp;&nbsp;</span>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="heaterRDisplayTemp"></span><span id="heaterRTargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
<tr id="temperature_secondExtruder" class="hide_it">
<td><span translate>Heater T1</span></td>
<td>
<div class="panel-flex-row">
<button onclick="temperature_heatOff('T1')" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z"></path>
</g>
</svg>
</button>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="0" max="999" id="heaterT1SelectedTemp" value=0 onkeyup="temperature_handleKeyUp(event, 'T1')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&deg;C</span>
</div>
</td>
</tr>
</table>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<button onclick="temperature_heatSet('T1')" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="heaterT1DisplayTemp"></span><span id="heaterT1TargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
<tr id="temperature_probe" class="hide_it">
<td><span translate>Probe</span></td>
<td>
<div class="panel-flex-row">
<span class="noshowonlowres">&nbsp;&nbsp;</span>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="probeDisplayTemp"></span><span id="probeTargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
<tr id="temperature_bed" class="hide_it">
<td><span translate>Bed</span></td>
<td>
<div class="panel-flex-row">
<button onclick="temperature_heatOff('bed')" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z"></path>
</g>
</svg>
</button>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="0" max="999" id="bedSelectedTemp" value=0 onkeyup="temperature_handleKeyUp(event, 'bed')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&deg;C</span>
</div>
</td>
</tr>
</table>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<button onclick="temperature_heatSet('bed')" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="bedDisplayTemp"></span><span id="bedTargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
<tr id="temperature_chamber" class="hide_it">
<td><span translate>Chamber</span></td>
<td>
<div class="panel-flex-row">
<button onclick="temperature_heatOff('chamber')"  class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z"></path>
</g>
</svg>
</button>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="0" max="999" id="chamberSelectedTemp" value=0 onkeyup="temperature_handleKeyUp(event, 'chamber')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&deg;C</span>
</div>
</td>
</tr>
</table>
<span class="noshowonlowres">&nbsp;&nbsp;</span>
<button onclick="temperature_heatSet('chamber')" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</td>
<td>
<div class="panel-flex-col panel-flex-center"><span class="tempDisplay" id="chamberDisplayTemp"></span><span id="chamberTargetTemp_anime" class="not_visible loader-pulse pull-right" style="color:red"></span></div>
</td>
</tr>
</tbody>
</table>
<ul class="list-group">
<li class="list-group-item hide_it" id="temperatures_output">
<div class="panel-flex-row">
<div id="extruderstemperaturesgraphic">
<canvas id="extruderTempgraph" height="130" width="200"></canvas>
&nbsp;&nbsp;
</div>
<div id="bedtemperaturesgraphic">
<canvas id="bedTempgraph" height="130" width="200"></canvas>
</div>
</div>
</li>
</ul>
</div>
</div>
<div id="extruderPanel" class="panel panel-default panel-flex-col panel-min-width">
<div class="panel-heading">
<div class="row">
<div class="col-md-12">
<div class="pull-left">
<b><span translate>Extruders</span></b>
</div>
</div>
</div>
</div>
<div id="extruder-body" class="panel-body panel-height panel-flex-main">
<ul class="list-group">
<li class="list-group-item">
<div class="row">
<div class="col-md-4"><b><label translate>Name</label></b></div>
<div class="col-md-8"><b><label translate>Options</label></b></div>
</div>
</li>
<li class="list-group-item hide_it" id="mixed_extruder_UI">
<div class="row">
<div class="col-md-4">
<table>
<tr>
<td><span translate>Extruder</span></td>
<td>&nbsp;</td>
<td id="extruder_list"><select style="width:4em" class="form-control" id="active_extruder" onchange="Set_active_extruder(); ">
<option value="0">0</option>
<option value="1">1</option>
</select></td>
</tr>
</table>
</div>
<div class="col-md-8">
<div class="form-inline">
<div class="form-group">
<button onclick="Extrude_cmd(current_active_extruder, 1)" class="btn btn-primary" translate>Extrude</button>
<button onclick="Extrude_cmd(current_active_extruder, -1)" class="btn btn-info" translate>Reverse</button>
</div>
</div>
</div>
</div>
</li>
<li class="list-group-item hide_it" id="first_extruder_UI">
<div class="row">
<div class="col-md-4"><span translate>Extruder T0</span></div>
<div class="col-md-8">
<div class="form-inline">
<div class="form-group">
<button onclick="Extrude_cmd('T0', 1)" class="btn btn-primary" translate>Extrude</button>
<button onclick="Extrude_cmd('T0', -1)" class="btn btn-info" translate>Reverse</button>
</div>
</div>
</div>
</div>
</li>
<li class="list-group-item hide_it" id="second_extruder_UI">
<div class="row">
<div class="col-md-4"><span translate>Extruder T1</span></div>
<div class="col-md-8">
<div class="form-inline">
<div class="form-group">
<button onclick="Extrude_cmd('T1', 1)" class="btn btn-primary" translate>Extrude</button>
<button onclick="Extrude_cmd('T1', -1)" class="btn btn-info" translate>Reverse</button>
</div>
</div>
</div>
</div>
</li>
<li class="list-group-item">
<div class="row">
<div class="col-md-4"><span translate>Flow (50-300%)</span>&nbsp;<span id="flowratecatched"></span></div>
<div class="col-md-8">
<div class="panel-flex-row">
<button onclick="flowInit_cmd()" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M650 1200h50q40 0 70 -40.5t30 -84.5v-150l-28 -125h328q40 0 70 -40.5t30 -84.5v-100q0 -45 -29 -74l-238 -344q-16 -24 -38 -40.5t-45 -16.5h-250q-7 0 -42 25t-66 50l-31 25h-61q-45 0 -72.5 18t-27.5 57v400q0 36 20 63l145 196l96 198q13 28 37.5 48t51.5 20z M650 1100l-100 -212l-150 -213v-375h100l136 -100h214l250 375v125h-450l50 225v175h-50zM50 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</button>
&nbsp;&nbsp;
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="50" max="300" id="flowSelectedValue" value="" onkeyup="extruder_handleKeyUp(event, 'Flow')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&#37;</span>
</div>
</td>
</tr>
</table>
&nbsp;&nbsp;
<button onclick="flowSet_cmd()" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</div>
</div>
</li>
<li class="list-group-item">
<div class="row">
<div class="col-md-4"><span translate>Feed (25-150%)</span>&nbsp;<span id="feedratecatched"></span></div>
<div class="col-md-8">
<div class="panel-flex-row">
<button onclick="feedInit_cmd()" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M650 1200h50q40 0 70 -40.5t30 -84.5v-150l-28 -125h328q40 0 70 -40.5t30 -84.5v-100q0 -45 -29 -74l-238 -344q-16 -24 -38 -40.5t-45 -16.5h-250q-7 0 -42 25t-66 50l-31 25h-61q-45 0 -72.5 18t-27.5 57v400q0 36 20 63l145 196l96 198q13 28 37.5 48t51.5 20z M650 1100l-100 -212l-150 -213v-375h100l136 -100h214l250 375v125h-450l50 225v175h-50zM50 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500q0 21 14.5 35.5t35.5 14.5z"></path>
</g>
</svg>
</button>
&nbsp;&nbsp;
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="25" max="150" id="feedSelectedValue" value="" onkeyup="extruder_handleKeyUp(event,'Feed')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&#37;</span>
</div>
</td>
</tr>
</table>
&nbsp;&nbsp;
<button onclick="feedSet_cmd()" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</div>
</div>
</li>
<li class="list-group-item hide_it" id="fan_UI">
<div class="row">
<div class="col-md-4"><span translate>Fan (0-100%)</span></div>
<div class="col-md-8">
<div class="panel-flex-row">
<button onclick="fanOff_cmd()" class="btn btn-primary">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z"></path>
</g>
</svg>
</button>
&nbsp;&nbsp;
<table>
<tr>
<td>
<div class="input-group">
<input class="form-control w5" type="number" min="0" max="100" value=0 id="fanSelectedValue" onkeyup="extruder_handleKeyUp(event, 'Fan')" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>&#37;</span>
</div>
</td>
</tr>
</table>
&nbsp;&nbsp;
<button onclick="fanSet_cmd()" class="btn btn-danger">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z"></path>
</g>
</svg>
</button>
</div>
</div>
</div>
</li>
</ul>
</div>
<div class="panel-footer">
<div class="panel-flex-row">
<table>
<tr>
<td>
<div class="input-group">
<span class="input-group-addon form_control" translate>Extrude</span>
<input class="hide_it"></input>
</div>
</td>
<td>
<div class="input-group">
<span class="input-group-addon hide_it"></span>
<input class="form-control w4" type="number" min="1" max="9999" onchange="on_extruder_length_Change()" onkeyup="on_extruder_length_Change()" id="filament_length" value=5 />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
&nbsp;
<table>
<tr>
<td>
<div class="input-group">
<span class="input-group-addon form_control">@</span>
<input class="hide_it"></input>
</div>
</td>
<td>
<div class="input-group">
<span class="input-group-addon hide_it"></span>
<input class="form-control w5" type="number" min="1" max="9999" onkeyup="on_extruder_velocity_Change()" id="extruder_velocity" />
<span class="input-group-addon hide_it"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div id="filesPanel" class="panel panel-default panel-flex-col">
<div class="panel-heading">
<div class="row">
<div class="col-md-12">
<div class="pull-left">
<table>
<tr>
<td><b><span id="fileSource" translate>SD Files</span></b></td>
<td>&nbsp;&nbsp;</td>
<td>
<button id="files_createdir_btn" onclick="files_Createdir()" class="btn btn-info btn-xs hide_it" style="padding: -2px 2px 0x 0px;">
<svg width="1.5em" height="1.2em" viewBox="5 10 30 10">
<rect x="5" y="10" width="30" height="20" rx="2" ry="2" fill="currentColor"></rect>
<rect x="20" y="5" width="15" height="15" rx="2" ry="2" fill="currentColor"></rect>
<text x="15" y="25" font-size="18" font-weight="800" fill="#5BC0DE">+</text>
</svg>
</button>
</td>
<td>&nbsp;&nbsp;</td>
<td><span id="files_currentPath"></span></td>
<td>&nbsp;&nbsp;</td>
<td>
<div id="files_nav_loader" style="width:1em;height:1em" class="loader hide_it"></div>
</td>
</tr>
</table>
</div>
<div class="hide_it pull-right" id="files_uploading_msg">
<table>
<tr>
<td><span translate>Uploading </span></td>
<td>&nbsp;</td>
<td><span class="text-info" id="files_currentUpload_msg"></span></td>
<td>&nbsp;</td>
<td width='100px'><progress name='prg' id='files_prg' max='100'></progress></td>
<td><span id="files_percent_upload"></span>%</td>
</tr>
</table>
</div>
<div class="pull-right" id="files_navigation_buttons">
<div class="item-flex-row-wrap">
<button class="btn btn-xs btn-primary" onclick="files_filter_button(this);">
<span id="files_filter_glyph" style="position:relative; top:2px">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M150 1200h900q21 0 35.5 -14.5t14.5 -35.5t-14.5 -35.5t-35.5 -14.5h-900q-21 0 -35.5 14.5t-14.5 35.5t14.5 35.5t35.5 14.5zM700 500v-300l-200 -200v500l-350 500h900z'></path>
</g>
</svg>
</span>
</button>
&nbsp;
<button class="btn btn-xs btn-primary hide_it" id="files_refresh_btn" onclick="files_refreshFiles(files_currentPath)" translate>Refresh</button>
<button class="btn btn-xs btn-primary hide_it" id="files_refresh_primary_sd_btn" onclick="files_refreshFiles(primary_sd)">SD 1</button>
&nbsp;
<button class="btn btn-xs btn-primary hide_it" id="files_refresh_secondary_sd_btn" onclick="files_refreshFiles(secondary_sd)">SD 2</button>
&nbsp;
<span class="hide_it" id="files_refresh_printer_sd_btn">
<button class="btn btn-xs btn-primary"  onclick="current_source = printer_sd ;files_refreshFiles(files_currentPath)">SD</button>
&nbsp;
</span>
<span class="hide_it" id="files_refresh_tft_sd_btn">
<button class="btn btn-xs btn-primary"  onclick="current_source = tft_sd ;files_refreshFiles(files_currentPath)">TFT SD</button>
&nbsp;
</span>
<span class="hide_it" id="files_refresh_tft_usb_btn">
<button class="btn btn-xs btn-primary"  onclick="current_source = tft_usb ;files_refreshFiles(files_currentPath)">TFT USB</button>
&nbsp;
</span>
<button id="progress_btn" class="btn btn-xs btn-primary" onclick="files_progress()" translate>Progress</button>
&nbsp;
<button id="abort_btn" class="btn btn-xs btn-primary" onclick="files_abort()" translate>Abort</button>
&nbsp;
<button id="print_upload_btn" class="btn btn-xs btn-primary" onclick="files_select_upload()" translate>Upload</button>
<input type="file" id="files_input_file" onchange="files_check_if_upload()" accept=" .g, .gco, .gcode, .G, .GCO, .GCODE" style="display:none" />
</div>
</div>
</div>
</div>
</div>
<div id="file-body" class="panel-body panel-height panel-max-height panel-scroll panel-flex-main">
<div id="files_list_loader" class="loader hide_it" style="margin:auto"></div>
<ul class="list-group" id="files_fileList">
</ul>
</div>
<div class="panel-footer panel-footer-height">
<div class="row hide_it" id="files_space_sd_status">
<div class="col-md-12">
<div class="form-inline">
<div class="form-group">
<span><span translate>Total:</span>&nbsp;<span id="files_sd_status_total"></span></span>
<span>&nbsp;|&nbsp;</span>
<span><span translate>Used:</span>&nbsp;<span id="files_sd_status_used"> </span></span>
<span>&nbsp;</span>
<span class="noshowonlowres">| &nbsp;</span>
<span class="form-inline">
<div class="form-group">
<span><span translate>Ocupation:</span>
<meter id="files_sd_status_occupation" style='width:150px' min='0' max='100' high='90' value=50></meter></span>
<span id="files_sd_status_percent"></span><span>%</span>
</div>
</span>
</div>
</div>
</div>
</div>
<div class="row hide_it" id="files_status_sd_status">
<div class="col-md-12">
<span id="files_sd_status_msg">Ok</span>
</div>
</div>
</div>
</div>
<div id="commandsPanel" class="panel panel-default panel-flex-col">
<div class="panel-heading">
<b><span translate>Commands</span></b>
<button id="clear_monitor_btn" class="btn btn-primary btn-xs pull-right" onclick="Monitor_output_Clear()" translate>Clear</button>
</div>
<div id="command-body" class="panel-body panel-flex-main">
<pre id="cmd_content" style="min-height: 350px; max-height: 350px;"></pre>
</div>
<div class="panel-footer">
<div class="panel-flex-row">
<div class="input-group">
<div class="input-group">
<form autocomplete="off" onsubmit="return false;">
<input autocomplete="off" class="form-control w14" type="text" onkeyup="CustomCommand_OnKeyUp(event)" value="" id="custom_cmd_txt" translateph placeholder="Send Command..." />
</form>
<div class="input-group-btn">
<button class="btn btn-success" onclick="SendCustomCommand();" translate>Send</button>
</div>
</div>
</div>
&nbsp;&nbsp;
<div class="form-group">
<div class="checkbox">
<label>
<input type="checkbox" onclick=" Monitor_check_autoscroll()" id="monitor_enable_autoscroll" />
<span translate>Autoscroll</span>
</label>
</div>
</div>
&nbsp;&nbsp;
<div class="form-group" id="cmd_verbose">
<div class="checkbox">
<label>
<input type="checkbox" onclick=" Monitor_check_verbose_mode()" id="monitor_enable_verbose_mode" />
<span translate>Verbose mode</span>
</label>
</div>

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="cameratab" class="tabcontent">
<center>
<br>
<form class="form-inline">
<div class="form-group">
<div class="input-group">
<div class="input-group-addon">@</div>
<input type="text" class="form-control w50" id="camera_webaddress" onkeyup="camera_OnKeyUp(event)" translateph placeholder="Camera address">
</div>
</div>
<button type="button" class="btn btn-primary" onclick="camera_loadframe();">
<span><svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M639 1109l522 -427q16 -13 16 -32t-16 -32l-522 -427q-16 -13 -27.5 -8t-11.5 26v291q-94 -2 -182 -20t-170.5 -52t-147 -92.5t-100.5 -135.5q5 105 27 193.5t67.5 167t113 135t167 91.5t225.5 42v262q0 21 11.5 26t27.5 -8z'></path>
</g>
</svg></span>
</button>
<button type="button" class="btn btn-info" onclick="camera_GetAddress();">
<span>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M583 1182l378 -435q14 -15 9 -31t-26 -16h-244v-250q0 -20 -17 -35t-39 -15h-200q-20 0 -32 14.5t-12 35.5v250h-250q-20 0 -25.5 16.5t8.5 31.5l383 431q14 16 33.5 17t33.5 -14zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z'></path>
</g>
</svg>
</span>
</button>
<button type="button" class="btn btn-warning" onclick="camera_saveaddress();">
<span><svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M450 1200h200q21 0 35.5 -14.5t14.5 -35.5v-350h245q20 0 25 -11t-9 -26l-383 -426q-14 -15 -33.5 -15t-32.5 15l-379 426q-13 15 -8.5 26t25.5 11h250v350q0 21 14.5 35.5t35.5 14.5zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z'></path>
</g>
</svg>
</span>
</button>
</form>
<br>
<table id="camera_frame_display">
<tr>
<td width="100%">
<div class="embed-responsive embed-responsive-16by9">
<iframe class="embed-responsive-item" id="camera_frame"></iframe>
</div>
</td>
<td valign="top">
<button type="button" id="camera_detach_button" onclick="camera_detachcam()" class="hide_it">
<span>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M750 1200h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -10.5 -25t-24.5 10l-109 109l-312 -312q-15 -15 -35.5 -15t-35.5 15l-141 141q-15 15 -15 35.5t15 35.5l312 312l-109 109q-14 14 -10 24.5t25 10.5zM456 900h-156q-41 0 -70.5 -29.5t-29.5 -70.5v-500 q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5v148l200 200v-298q0 -165 -93.5 -257.5t-256.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5h300z'></path>
</g>
</svg>
</span>
</button>
</td>
<td>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</td>
</tr>
</table>
</center>

</div>
<div id="configtab" class="tabcontent">
<center>
<h2 id='tab_title_configuration'>
<span translate>Printer configuration</span>
</h2>
<button type="button" id="config_refresh_btn" class="btn btn-primary" onclick="refreshconfig();">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z"></path>
</g>
</svg>
</button>
<br>
<span id="config_status"></span>
<hr>
<div class="loader hide_it" id="config_loader"></div>
<div class="hide_it" id="config_list_content">
<div id="config_smoothie_nav" class="hide_it">
<center>
<table>
<tr>
<td style="padding:10px">
<div class="radio-inline">
<label>
<input type="radio" id="config_main_file" name="config_filter" value="config" onclick="config_display_override(false);">
<span id="config_main_file_name">config</span>
</label>
</div>
</td>
<td style="padding:10px">
<div class="radio-inline">
<label>
<input type="radio" id="config_override_file" name="config_filter" value="override" onclick="config_display_override(true);">
<span id="config_override_file_name">smoothieware</span>
</label>
</div>
</td>
</tr>
</table>
</center>
</div>
<div id="config_main_content">
<table class="table table-bordered table-striped table-hover table-responsive" style="width:auto; max-width: 90% !important; word-wrap: break-word;">
<thead>
<tr>
<th width="0%" translate>Label</th>
<th width="auto" translate>Value</th>
<th width="0%" translate>Help</th>
</tr>
</thead>
<tbody id="config_list_data"></tbody>
</table>
</div>
<div class="hide_it" id="config_override_list_content">
<table>
<tr>
<td style="padding:10px">
<button type="button" id="config_apply_override" class="btn btn-success" onclick="Apply_config_override()">
<span><svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M450 1200h200q21 0 35.5 -14.5t14.5 -35.5v-350h245q20 0 25 -11t-9 -26l-383 -426q-14 -15 -33.5 -15t-32.5 15l-379 426q-13 15 -8.5 26t25.5 11h250v350q0 21 14.5 35.5t35.5 14.5zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z"></path>
</g>
</svg>
</span>
</button>
</td>
<td style="padding:10px">
<button type="button" id="config_delete_override" class="btn btn-warning" onclick="Delete_config_override()">
<span><svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M500 1300h300q41 0 70.5 -29.5t29.5 -70.5v-100h275q10 0 17.5 -7.5t7.5 -17.5v-75h-1100v75q0 10 7.5 17.5t17.5 7.5h275v100q0 41 29.5 70.5t70.5 29.5zM500 1200v-100h300v100h-300zM1100 900v-800q0 -41 -29.5 -70.5t-70.5 -29.5h-700q-41 0 -70.5 29.5t-29.5 70.5 v800h900zM300 800v-700h100v700h-100zM500 800v-700h100v700h-100zM700 800v-700h100v700h-100zM900 800v-700h100v700h-100z"></path>
</g>
</svg>
</span>
</button>
</td>
</tr>
</table>
<table class="table table-bordered table-striped table-hover table-responsive" style="width:auto; max-width: 90% !important; word-wrap: break-word;">
<tbody id="config_override_data"></tbody>
</table>
</div>
</center>
</div>
<div id="settingstab" class="tabcontent">
<center>
<h2>
<span translate>ESP3D Settings</span>
</h2>
<table>
<tr>
<td style='padding:10px'>
<button type="button" class="btn btn-info" onclick="statusdlg();">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M50 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 1100h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200 q0 21 14.5 35.5t35.5 14.5zM50 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 700h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700 q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 300h700q21 0 35.5 -14.5t14.5 -35.5v-200 q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5z'></path>
</g>
</svg>
</button>
</td>
<td style='padding:10px'>
<button type="button" class="btn btn-success" onclick="SPIFFSdlg('/');">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M200 800l-200 -400v600h200q0 41 29.5 70.5t70.5 29.5h300q42 0 71 -29.5t29 -70.5h500v-200h-1000zM1500 700l-300 -700h-1200l300 700h1200z'></path>
</g>
</svg>
</button>
</td>
<td style='padding:10px'>
<button id="settings_update_fw_btn" type="button" class="btn btn-warning" onclick="updatedlg();">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M503 1089q110 0 200.5 -59.5t134.5 -156.5q44 14 90 14q120 0 205 -86.5t85 -207t-85 -207t-205 -86.5h-128v250q0 21 -14.5 35.5t-35.5 14.5h-300q-21 0 -35.5 -14.5t-14.5 -35.5v-250h-222q-80 0 -136 57.5t-56 136.5q0 69 43 122.5t108 67.5q-2 19 -2 37q0 100 49 185 t134 134t185 49zM525 500h150q10 0 17.5 -7.5t7.5 -17.5v-275h137q21 0 26 -11.5t-8 -27.5l-223 -244q-13 -16 -32 -16t-32 16l-223 244q-13 16 -8 27.5t26 11.5h137v275q0 10 7.5 17.5t17.5 7.5z'></path>
</g>
</svg>
</button>
</td>
<td style='padding:10px'>
<button type="button" id="settings_restart_btn" class="btn btn-danger" onclick="restart_esp();">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z'></path>
</g>
</svg>
</button>
</td>
<td style='padding:10px'>
<button type="button" id="settings_refresh_btn" class="btn btn-primary" onclick="refreshSettings(current_setting_filter);">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill="currentColor" d='M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z'></path>
</g>
</svg>
</button>
</td>
</tr>
</table>
<br>
<span id="settings_status"></span>
<hr>
<div class="loader hide_it" id="settings_loader"></div>
<div class="container hide_it" id="settings_list_content">
<span id="settings_filters">
<div class="radio-inline">
<label>
<input type="radio" id="network_setting_filter" name="setting_filter" value="network" onclick="build_HTML_setting_list('network')">
<span translate>Network</span>
</label>
</div>
<div class="radio-inline">
<label>
<input type="radio" id="printer_setting_filter" name="setting_filter" value="network" onclick="build_HTML_setting_list('printer')">
<span translate>Printer</span>
</label>
</div>
</span>
<table class="table table-bordered table-striped table-hover table-responsive" style='width:auto;'>
<thead>
<tr>
<th translate>Label</th>
<th translate>Value</th>
</tr>
</thead>
<tbody id="settings_list_data"></tbody>
</table>
</div>
</center>
</div>
</div>
<!-- / content -->
</div>
<!-- template -->
<!-- Connect Modal -->
<div id="connectdlg.html" class="modal">
<!-- Connect content -->
<div class="modal-content">
<div class="modal-header">
<h3>
<div class="modal-title" translate>Connecting ESP3D...</div>
</h3>
</div>
<div class="modal-body">
<center>
<span id="connecting_msg">
<span translate>Please wait...</span>
<progress id='load_prg' max='100'></progress>
</span>
<span class="hide_it" id="failed_connect_msg">
<span translate>Connection failed! is your FW correct?</span>
</span>
</center>
</div>
<div class="modal-footer">
<center><button class="btn btn-primary" id="connectbtn" onclick="retryconnect() " translate>Retry</button></center>
</div>
</div>
<!-- /Connect content -->
</div>
<!-- /Connect Modal -->
<!-- alert Modal -->
<div id="alertdlg.html" class="modal supertopmodal">
<!-- alert content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title"></div>
</h3>
</div>
<div class="modal-body">
<span>
<span>
<svg width='26px' height='24px' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='red' d='M-90 100l642 1066q20 31 48 28.5t48 -35.5l642 -1056q21 -32 7.5 -67.5t-50.5 -35.5h-1294q-37 0 -50.5 34t7.5 66zM155 200h345v75q0 10 7.5 17.5t17.5 7.5h150q10 0 17.5 -7.5t7.5 -17.5v-75h345l-445 723zM496 700h208q20 0 32 -14.5t8 -34.5l-58 -252 q-4 -20 -21.5 -34.5t-37.5 -14.5h-54q-20 0 -37.5 14.5t-21.5 34.5l-58 252q-4 20 8 34.5t32 14.5z'></path>
</g>
</svg>
</span>
&nbsp;&nbsp;
<span class="modal-text"></span>
</span>
</div>
<div class="modal-footer">
<span class="pull-right"><button class="btn btn-primary" onclick="closeModal('Ok') " translate>Ok</button></span>
</div>
</div>
<!-- /alert content -->
</div>
<!-- /alert Modal -->
<!-- password Modal -->
<div id="passworddlg.html" class="modal topmodal">
<div class="loader hide_it" id="password_loader" style="margin:auto"></div>
<!-- password content -->
<div class="modal-content" id="change_password_content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M600 1200q124 0 212 -88t88 -212v-250q0 -46 -31 -98t-69 -52v-75q0 -10 6 -21.5t15 -17.5l358 -230q9 -5 15 -16.5t6 -21.5v-93q0 -10 -7.5 -17.5t-17.5 -7.5h-1150q-10 0 -17.5 7.5t-7.5 17.5v93q0 10 6 21.5t15 16.5l358 230q9 6 15 17.5t6 21.5v75q-38 0 -69 52 t-31 98v250q0 124 88 212t212 88z'></path>
</g>
</svg>
<span translate>Change Password</span>
</div>
</h3>
</div>
<div class="modal-body">
<span>
<span class="modal-text" translate>Current Password:</span>
<input class='form-control' type="password" id="password_password_text" style="width:auto" />
</span>
<hr>
<span>
<span class="modal-text" translate>New Password:</span>
<input class='form-control' type="password" id="password_password_text1" onkeyup="checkpassword()" style="width:auto" />
</span>
<hr>
<span>
<span class="modal-text" translate>Confirm New Password:</span>
<input class='form-control' type="password" id="password_password_text2" onkeyup="checkpassword()" style="width:auto" />
</span>
<hr>
<span>
<span id="password_content"></span>
</span>
</div>
<div class="modal-footer">
<span class="pull-right">
<button class="btn btn-warning" onclick="closeModal('cancel');" translate>Cancel</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
<span class="pull-right">
<button class="btn btn-primary" onclick="SubmitChangePassword()" id="change_password_btn" translate>Change Password</button>
</span>
</div>
</div>
<!-- /password content -->
</div>
<!-- /password Modal -->
<!-- alert Modal -->
<div id="confirmdlg.html" class="modal topmodal">
<!-- alert content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title"></div>
</h3>
</div>
<div class="modal-body">
<span>
<svg width='26px' height='24px' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='#337ab7' d='M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM588 941q-29 0 -59 -5.5t-63 -20.5t-58 -38.5t-41.5 -63t-16.5 -89.5 q0 -25 20 -25h131q30 -5 35 11q6 20 20.5 28t45.5 8q20 0 31.5 -10.5t11.5 -28.5q0 -23 -7 -34t-26 -18q-1 0 -13.5 -4t-19.5 -7.5t-20 -10.5t-22 -17t-18.5 -24t-15.5 -35t-8 -46q-1 -8 5.5 -16.5t20.5 -8.5h173q7 0 22 8t35 28t37.5 48t29.5 74t12 100q0 47 -17 83 t-42.5 57t-59.5 34.5t-64 18t-59 4.5zM675 400h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5z'></path>
</g>
</svg>
&nbsp;&nbsp;
<span class="modal-text"></span>
</span>
</div>
<div class="modal-footer">
<span class="pull-right">
<button class="btn btn-primary" onclick="closeModal('yes');" translate>Yes</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
<span class="pull-right">
<button class="btn btn-warning" onclick="closeModal('no');" translate>No</button>
</span>
</div>
</div>
<!-- /alert content -->
</div>
<!-- /alert Modal -->
<!-- login Modal -->
<div id="logindlg.html" class="modal topmodal">
<div class="loader hide_it" id="login_loader" style="margin:auto"></div>
<!-- login content -->
<div class="modal-content" id="login_content">
<div class="modal-header">
<h3>
<div class="modal-title">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M550 1100h400q165 0 257.5 -92.5t92.5 -257.5v-400q0 -165 -92.5 -257.5t-257.5 -92.5h-400q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h450q41 0 70.5 29.5t29.5 70.5v500q0 41 -29.5 70.5t-70.5 29.5h-450q-21 0 -35.5 14.5t-14.5 35.5v100 q0 21 14.5 35.5t35.5 14.5zM338 867l324 -284q16 -14 16 -33t-16 -33l-324 -284q-16 -14 -27 -9t-11 26v150h-250q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h250v150q0 21 11 26t27 -9z'></path>
</g>
</svg>
<span id="login_title">Identification requested</span>
</div>
</h3>
</div>
<div class="modal-body">
<span>
<span class="modal-text" translate>User:</span>
<input class='form-control' type="text" onkeyup="login_id_OnKeyUp(event)" id="login_user_text" style="width:auto" />
</span>
<hr>
<span>
<span class="modal-text" translate>Password:</span>
<input class='form-control' type="password" onkeyup="login_password_OnKeyUp(event)" id="login_password_text" style="width:auto" />
</span>
<br>
</div>
<div class="modal-footer">
<span class="pull-right">
<button id="login_submit_btn" class="btn btn-primary" onclick="SubmitLogin()" translate>Submit</button>
</span>
</div>
</div>
<!-- /login content -->
</div>
<!-- /login Modal -->
<!-- input Modal -->
<div id="inputdlg.html" class="modal topmodal">
<!-- input content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeInputModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title"></div>
</h3>
</div>
<div class="modal-body">
<span>
<span class="modal-text">
</span>
<input class='form-control' type="text" id="inputldg_text" style="width:auto" />
</span>
</div>
<div class="modal-footer">
<span class="pull-right">
<button class="btn btn-warning" onclick="closeInputModal('cancel');" translate>Cancel</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
<span class="pull-right">
<button class="btn btn-primary" onclick="closeInputModal('ok');" translate>Ok</button>
</span>
</div>
</div>
<!-- /input content -->
</div>
<!-- /input Modal -->
<!-- Credits Modal -->
<div id="creditsdlg.html" class="modal">
<!-- Credits content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title" translate>Credits</div>
</h3>
</div>
<div class="modal-body">
<span>
<ul>
<li>Thanks to <a href='https://github.com/imrahil/smoothieware-webui' target='_blank'>imrahil/smoothieware-webui</a> for the inspiration and the code base.</li>
<li>Current UI use a customized version of <a href='http://getbootstrap.com' target='_blank'>bootstrap</a> including a local limited version of svg version of<a href='http://glyphicons.com/' target='_blank'> Glyphicons Halflings</a> to get a small footprint.</li>
<li>A customized version of <a href='http://smoothiecharts.org/' target='_blank'>smoothiecharts</a> is used to display temperatures charts, it is simple and perfectly sized for the current purpose.</li>
</ul>
</span>
</div>
<div class="modal-footer">
<span class="pull-right"><button class="btn btn-primary" onclick="closeModal('Ok') " translate>Ok</button></span>
</div>
</div>
<!-- /Credits content -->
</div>
<!-- /Credits Modal -->
<!-- scanwifi Modal -->
<div id="scanwifidlg.html" class="modal topmodal">
<!-- scanwifi content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title"><span translate>List of available Access Points</span></div>
</h3>
</div>
<div class="modal-body">
<center>
<span id="AP_scan_status" translate>Scanning</span>
<div class="loader hide_it" id="AP_scan_loader"></div>
<span class='hide_it' id="AP_scan_list">
<div class="table-responsive">
<table class="table table-bordered table-striped">
<thead class="noshowonlowrestab">
<tr>
<th translate>SSID</th>
<th translate>Signal</th>
<th translate>Protected</th>
<th translate>Join</th>
</tr>
</thead>
<tbody id="AP_scan_data"></tbody>
</table>
</div>
</span>
</center>
</div>
<div class="modal-footer">
<div style="float:right; padding-right:20px;">
<table>
<tr>
<td>
<button class="btn btn-warning " onclick="closeModal('cancel') " translate>Close</button>
</td>
<td>
<span class=""> &nbsp;&nbsp;</span>
</td>
<td>
<button class="btn btn-primary" id="refresh_scanwifi_btn" onclick="refresh_scanwifi() ">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z"></path>
</g>
</svg>
</button>
</td>
</tr>
</table>
</div>
</div>
</div>
<!-- /scanwifi content -->
</div>
<!-- /scanwifi Modal -->
<!-- SPIFFS Modal -->
<div id="SPIFFSdlg.html" class="modal">
<!-- SPIFFS content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeSPIFFSDialog('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title" translate>ESP3D Filesystem</div>
</h3>
</div>
<div class="modal-body">
<div class="panel" id="SPIFFS">
<div class="panel-body">
<div class="panel-flex-row">
<input type="file" style="display:none" id="SPIFFS-select" name="myfiles[]" multiple onchange="checkSPIFFSfiles()" />
<table id="SPIFFS-select_form">
<tr>
<td>
<button class="btn btn-info" type="button" id="SPIFFS_select_files" onclick="document.getElementById('SPIFFS-select').click();" translate>Select files</button>
</td>
<td>
<div class="filetext no_overflow" id="SPIFFS_file_name" onmouseup="document.getElementById('SPIFFS_select_files').click();"></div>
</td>
</tr>
</table>
&nbsp;
<button class="btn btn-primary btn-svg" type="button" id="SPIFFS_uploadbtn" onclick="SPIFFS_UploadFile();">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(0,1200) scale(1, -1)'>
<path fill='currentColor' d='M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM632 914l223 -275q13 -16 8 -27.5t-26 -11.5h-137v-275q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v275h-137q-21 0 -26 11.5t8 27.5l223 275q13 16 32 16 t32 -16z'></path>
</g>
</svg>
</button>
<progress style="display:none;" name="prg" id="SPIFFS_prg" max="100"></progress>
&nbsp;
<span id="uploadSPIFFSmsg" style="display:none;" translate>Uploading</span>
</div>

<br><br>
<div class="panel">
<div class="panel-body">
<div class="panel-flex-row">
<button onclick="SPIFFS_Createdir()" class="btn btn-info btn-svg-no_pad">
<svg width="35px" height="25px" viewBox="0 0 40 30">
<rect x="5" y="10" width="30" height="20" rx="2" ry="2" fill="currentColor"></rect>
<rect x="20" y="5" width="15" height="15" rx="2" ry="2" fill="currentColor"></rect>
<text x="15" y="25" font-size="18" font-weight="800" fill="#5BC0DE">+</text>
</svg>
</button>
<div id="SPIFFS_loader" class="loader" style="width:2em;height:2em;"></div>
<div id="SPIFFS_path" class="info">&nbsp;</div>
</div>
<table class="table table-striped" style="border:1px;solid #dddddd;margin-bottom:20px;">
<thead>
<tr>
<th width="0%" translate>Type</th>
<th width="auto" translate>Name</th>
<th translate>Size</th>
<th width="0%"></th>
</tr>
</thead>
<tbody id="SPIFFS_file_list"></tbody>
</table>
</div>
<div class="panel-footer" id="SPIFFS_status"></div>
</div>
</div>
</div>


</div>
<div class="modal-footer">
<div style="float:right; padding-right:20px;">
<table>
<tr>
<td>
<button class="btn btn-warning " onclick="closeSPIFFSDialog('cancel') " translate>Close</button>
</td>
<td>
<span class=""> &nbsp;&nbsp;</span>
</td>
<td>
<button class="btn btn-primary" id="refreshSPIFFSbtn" onclick="refreshSPIFFS() ">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z"></path>
</g>
</svg>
</button>
</td>
</tr>
</table>
</div>
</div>
</div>
<!-- /SPIFFS content -->
</div>
<!-- /SPIFFS Modal -->
<!-- status Modal -->
<div id="statusdlg.html" class="modal">
<!-- status content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title" translate>ESP3D Status</div>
</h3>
</div>
<div class="modal-body">
<center>
<div class="loader hide_it" id="status_loader"></div>
</center>
<span id="status_msg"></span>
<span class="modal-text"></span>
<table width="100%">
<tr>
<td width="100%">&nbsp;</td>
<td><button class="btn btn-xs btn-default" style="padding-top: 2px;padding-left: 2px;padding-right: 2px;padding-bottom: 0px;" onclick="next_status();" id="next_status_btn"></button></td>
</tr>
</table>
</div>
<div class="modal-footer">
<div style="float:right; padding-right:20px;">
<table>
<tr>
<td>
<button class="btn btn-warning " onclick="closeModal('cancel') " translate>Close</button>
</td>
<td>
<span class=""> &nbsp;&nbsp;</span>
</td>
<td>
<button class="btn btn-primary" id="refreshstatusbtn" onclick="refreshstatus() ">
<svg width="1.3em" height="1.2em" viewBox="0 0 1300 1200">
<g transform="translate(50,1200) scale(1, -1)">
<path fill="currentColor" d="M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z"></path>
</g>
</svg>
</button>
</td>
</tr>
</table>
</div>
</div>
</div>
<!-- /status content -->
</div>
<!-- /status Modal -->
<!-- update Modal -->
<div id="updatedlg.html" class="modal">
<!-- update content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeUpdateDialog('cancel')"><b>&times;</b></span>
<h3>
<div class="modal-title" id="fw_update_dlg_title" translate>ESP3D Firmware Update</div>
</h3>
</div>
<div class="modal-body">
<table>
<tr>
<td>
<input type="file" style='display:none' id="fw-select" name="myfiles[]" accept=".bin, .bin.gz" onchange="checkupdatefile();" />
<table id="fw-select_form">
<tr>
<td>
<button class="btn btn-info" type="button" id="fw_select_files" onclick="document.getElementById('fw-select').click();" translate>Select file</button>
</td>
<td>
<div class="filetext no_overflow" id="fw_file_name" onmouseup="document.getElementById('fw_select_files').click();"></div>
</td>
</tr>
</table>
</td>

<td>&nbsp;</td>
<td><button class="btn btn-primary" id="uploadfw-button" style='display:none;' onclick="UploadUpdatefile();" translate>Update</button></td>
<td><progress style='display:none;' name='prgfw' id='prgfw' max='100'></progress></td>
<td>&nbsp;</td>
<td><span id='updatemsg' style='display:none;' translate>Restarting, please wait....</span><span id='counter'></span></td>
</tr>
</table>
</div>
<div class="modal-footer">
<span class="pull-right">
<button class="btn btn-warning" onclick="closeUpdateDialog('cancel')" translate>Close</button>
</span>
</div>
</div>
<!-- /update content -->
</div>
<!-- /update Modal -->
<!-- setup Modal -->
<div id="setupdlg.html" class="modal">
<!-- setup content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeModal('cancel')"><b>&times;</b></span>
<br>
<div class="step no_navigationr">
<div class="steplinks spacer"></div>
<button class="steplinks" onclick="openstep(event, 'startstep')" id="startsteplink">
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M658 1197l637 -1104q23 -38 7 -65.5t-60 -27.5h-1276q-44 0 -60 27.5t7 65.5l637 1104q22 39 54 39t54 -39zM704 800h-208q-20 0 -32 -14.5t-8 -34.5l58 -302q4 -20 21.5 -34.5t37.5 -14.5h54q20 0 37.5 14.5t21.5 34.5l58 302q4 20 -8 34.5t-32 14.5zM500 300v-100h200 v100h-200z'></path>
</g>
</svg>
</button>
<div class="steplinks connecting-line" id="wizard_line1"></div>
<button class="steplinks disabled" onclick="openstep(event, 'step1')" id="step1link" disabled>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M600 1174q33 0 74 -5l38 -152l5 -1q49 -14 94 -39l5 -2l134 80q61 -48 104 -105l-80 -134l3 -5q25 -44 39 -93l1 -6l152 -38q5 -43 5 -73q0 -34 -5 -74l-152 -38l-1 -6q-15 -49 -39 -93l-3 -5l80 -134q-48 -61 -104 -105l-134 81l-5 -3q-44 -25 -94 -39l-5 -2l-38 -151 q-43 -5 -74 -5q-33 0 -74 5l-38 151l-5 2q-49 14 -94 39l-5 3l-134 -81q-60 48 -104 105l80 134l-3 5q-25 45 -38 93l-2 6l-151 38q-6 42 -6 74q0 33 6 73l151 38l2 6q13 48 38 93l3 5l-80 134q47 61 105 105l133 -80l5 2q45 25 94 39l5 1l38 152q43 5 74 5zM600 815 q-89 0 -152 -63t-63 -151.5t63 -151.5t152 -63t152 63t63 151.5t-63 151.5t-152 63z'></path>
</g>
</svg>
</button>
<div class="steplinks connecting-line" id="wizard_line2"></div>
<button class="steplinks disabled" onclick="openstep(event, 'step2')" id="step2link" disabled>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M1025 1200h150q10 0 17.5 -7.5t7.5 -17.5v-1150q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v1150q0 10 7.5 17.5t17.5 7.5zM725 800h150q10 0 17.5 -7.5t7.5 -17.5v-750q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v750 q0 10 7.5 17.5t17.5 7.5zM425 500h150q10 0 17.5 -7.5t7.5 -17.5v-450q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v450q0 10 7.5 17.5t17.5 7.5zM125 300h150q10 0 17.5 -7.5t7.5 -17.5v-250q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5 v250q0 10 7.5 17.5t17.5 7.5z'></path>
</g>
</svg>
</button>
<div class="steplinks connecting-line" id="wizard_line3"></div>
<button class="steplinks disabled" onclick="openstep(event, 'step3')" id="step3link" disabled>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M200 1100h700q124 0 212 -88t88 -212v-500q0 -124 -88 -212t-212 -88h-700q-124 0 -212 88t-88 212v500q0 124 88 212t212 88zM100 900v-700h900v700h-900zM500 700h-200v-100h200v-300h-300v100h200v100h-200v300h300v-100zM900 700v-300l-100 -100h-200v500h200z M700 700v-300h100v300h-100z'></path>
</g>
</svg>
</button>
<div class="steplinks connecting-line" id="wizard_line4"></div>
<button class="steplinks disabled" onclick="openstep(event, 'endstep')" id="endsteplink" disabled>
<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>
<g transform='translate(50,1200) scale(1, -1)'>
<path fill='currentColor' d='M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z'></path>
</g>
</svg>
</button>
</div>

</div>
<div class="modal-body">
<div id="startstep" class="stepcontent">
<span translate>This wizard will help you to configure the basic settings.</span><br><br>
<center>
<div id="setup_langage_list"></div>
</center>
<br><span translate>Press start to proceed.</span>
</div>
<div id="step1" class="stepcontent">
fw / baud
<br>
</div>
<div id="step2" class="stepcontent">
wifi
<br>
</div>
<div id="step3" class="stepcontent">
SD
<br>
</div>
<div id="endstep" class="stepcontent">
<span translate>Setup is finished.</span><br> <br>
<span translate>After closing, you will still be able to change or to fine tune your settings in main interface anytime.</span><br>
<span translate>You may need to restart the board to apply the new settings and connect again.</span>
</div>
</div>
<div class="modal-footer">
<span class="pull-right">
<button class="btn btn-warning" onclick="continue_setup_wizard()" id="wizard_button" translate>Start setup</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
</div>
</div>
<!-- /setup content -->
</div>
<!-- /setup Modal -->
<!-- macro Modal -->
<div id="macrodlg.html" class="modal" onclick="clear_drop_menu(event)">
<!-- macro content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closeMacroDialog()"><b>&times;</b></span>
<h3>
<div class="modal-title" translate>Macro Editor</div>
</h3>
</div>
<div class="modal-body">
<div class="table-responsive">
<table class="table">
<thead>
<tr>
<th></th>
<th translate>Name</th>
<th translate>Icon</th>
<th translate>Color</th>
<th translate>Target</th>
<th translate>Filename/URI</th>
</tr>
</thead>
<tbody id="dlg_macro_list">
</tbody>
</table>
</div>
</div>
<div class="modal-footer">
<div class="pull-left" id="macrodlg_upload_msg">
<span translate>Saving</span>
&nbsp;
<progress name='prg' id='macrodlg_prg' max='100'></progress>
&nbsp;
<span id="macrodlg_upload_percent">0</span>%</td>
</div>
<span class="pull-right">
<button class="btn btn-warning" onclick="closeMacroDialog()" translate>Cancel</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
<span class="pull-right">
<button class="btn btn-primary" onclick="SaveNewMacroList()" translate>Save</button>
</span>
</div>
</div>
<!-- /macro content -->
</div>
<!-- /macro Modal -->
<!-- preference Modal -->
<div id="preferencesdlg.html" class="modal" onclick="clear_drop_menu(event)">
<!-- preferences content -->
<div class="modal-content">
<div class="modal-header">
<span class="close" onclick="closePreferencesDialog()"><b>&times;</b></span>
<h3>
<div class="modal-title" translate>Preferences</div>
</h3>
</div>
<div class="modal-body panel-scroll">
<center>
<div id="preferences_langage_list"></div>
</center>
<br>
<div class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="enable_lock_UI" />
<span translate>Enable lock interface</span>
</label>
</div>
</div>
</div>
<div class="panel panel-default hide_it">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="enable_ping" />
<span translate>Connection monitoring</span>
</label>
</div>
</div>
</div>
<div id="DHT_pref_panel" class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="enable_DHT" />
<span translate>Show DHT output</span>
</label>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_camera_panel" onclick="prefs_toggledisplay('show_camera_panel')" />
<span translate>Show camera panel</span>
</label>
</div>
</div>
<div id="camera_preferences" class="panel-body">
<div class="checkbox">
<label>
<input type="checkbox" id="autoload_camera_panel" />
<span translate>Auto load camera</span>
</label>
</div>
<div class="form-inline">
<div class="form-group">
<span><span translate>Camera address</span>:</span>
<input type="text" class="form-control w14" id="preferences_camera_webaddress" translateph placeholder="Camera address" />
</div>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_control_panel" onclick="prefs_toggledisplay('show_control_panel')" />
<span translate>Show control panel</span>
</label>
</div>
</div>
<div id="control_preferences" class="panel-body">
<div id="preferences_pos_Interval_check_group">
<table>
<tr>
<td>
<span><span translate>Position Refresh Time</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w4" type="number" min="1" max="99" id="preferences_pos_Interval_check" onchange="Checkvalues('preferences_pos_Interval_check')" />
<span id="preferences_pos_Interval_check_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>sec</span>
</div>
</td>
</tr>
</table>

</div>
<br>
<div id="preferences_control_xy_velocity_group">
<table>
<tr>
<td>
<span><span translate>XY feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group  has-control">
<input class="form-control w8" type="number" min="1" id="preferences_control_xy_velocity" onchange="Checkvalues('preferences_control_xy_velocity')" />
<span id="preferences_control_xy_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>

<br>

<div id="preferences_control_z_velocity_group">
<table>
<tr>
<td>
<span><span translate>Z feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" id="preferences_control_z_velocity" onchange="Checkvalues('preferences_control_z_velocity')" />
<span id="preferences_control_z_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
<div id="preferences_control_a_velocity_group" class="hide_it topmarginspace">
<table>
<tr>
<td>
<span><span translate>A feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" id="preferences_control_a_velocity" onchange="Checkvalues('preferences_control_a_velocity')" />
<span id="preferences_control_a_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
<div id="preferences_control_b_velocity_group" class="hide_it topmarginspace">
<table>
<tr>
<td>
<span><span translate>B feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" id="preferences_control_b_velocity" onchange="Checkvalues('preferences_control_b_velocity')" />
<span id="preferences_control_b_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
<div id="preferences_control_c_velocity_group" class="hide_it topmarginspace">
<table>
<tr>
<td>
<span><span translate>C feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" id="preferences_control_c_velocity" onchange="Checkvalues('preferences_control_c_velocity')" />
<span id="preferences_control_c_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div id="temp_pref_panel" class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_temperatures_panel" onclick="prefs_toggledisplay('show_temperatures_panel')" />
<span translate>Show temperatures panel</span>
</label>
</div>
</div>
<div id="temperatures_preferences" class="panel-body">
<div id="preferences_tempInterval_check_group">
<table>
<tr>
<td>
<span><span translate>Temperature Refresh Time</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w4" type="number" min="1" max="99" id="preferences_tempInterval_check" onchange="Checkvalues('preferences_tempInterval_check')" />
<span id="preferences_tempInterval_check_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>sec</span>
</div>
</td>
</tr>
</table>
</div>
<div class="checkbox" id="redundant_controls_option" class="hide_it">
<label>
<input type="checkbox" id="enable_redundant_controls" />
<span translate>Enable heater T0 redundant temperatures</span>
</label>
</div>
<div class="checkbox" id="probe_controls_option" class="hide_it">
<label>
<input type="checkbox" id="enable_probe_controls" />
<span translate>Enable probe temperatures</span>
</label>
</div>
<div class="checkbox" id="bed_controls_option">
<label>
<input type="checkbox" id="enable_bed_controls" />
<span translate>Enable bed controls</span>
</label>
</div>
<div class="checkbox" id="chamber_controls_option" class="hide_it">
<label>
<input type="checkbox" id="enable_chamber_controls" />
<span translate>Enable chamber controls</span>
</label>
</div>
</div>
</div>
<div id="ext_pref_panel" class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_extruder_panel" onclick="prefs_toggledisplay('show_extruder_panel')" />
<span translate>Show extruder panel</span>
</label>
</div>
</div>
<div class="panel-body" id="extruder_preferences">
<div id="preferences_filament_length_group">
<table>
<tr>
<td>
<span><span translate>Length</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" max="9999" id="preferences_filament_length" onchange="Checkvalues('preferences_filament_length')" />
<span id="preferences_filament_length_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
</div>
<br>
<div id="preferences_e_velocity_group">
<table>
<tr>
<td>
<span><span translate>E feedrate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w6" type="number" min="1" max="9999" id="preferences_e_velocity" onchange="Checkvalues('preferences_e_velocity')" />
<span id="preferences_e_velocity_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>

<br>

<div id="preferences_control_nb_extruders_group">
<table>
<tr>
<td>
<span><span translate>Number of extruders</span>:&nbsp;</span>
</td>
<td>
<select class="form-control" id="preferences_control_nb_extruders">
<option value="1">1</option>
</select>
</td>
</tr>
</table>
</div>
<div class="checkbox">
<label>
<input type="checkbox" id="enable_mixed_E_controls" onclick="build_extruder_list()" />
<span translate>Mixed extruders</span>
</label>
</div>
<div class="checkbox">
<label>
<input type="checkbox" id="enable_fan_controls" />
<span translate>Enable fan controls</span>
</label>
</div>

</div>
</div>
<div class="panel panel-default" id="grbl_pref_panel">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_grbl_panel" onclick="prefs_toggledisplay('show_grbl_panel')" />
<span translate>Show GRBL panel</span>
</label>
</div>
</div>
<div id="grbl_preferences" class="panel-body">
<div id="preferences_status_Interval_check_group">
<table>
<tr>
<td>
<span><span translate>Status Refresh Time</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w4" type="number" min="1" max="99" id="preferences_status_Interval_check" onchange="Checkvalues('preferences_status_Interval_check')" />
<span id="preferences_status_Interval_check_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>sec</span>
</div>
</td>
</tr>
</table>
</div>
<br>
<div class="panel panel-default" id="grbl_pref_probe_tab">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_grbl_probe_tab" onclick="prefs_toggledisplay('show_grbl_probe_tab')" />
<span translate>Show probe panel</span>
</label>
</div>
</div>
<div id="grbl_probe_preferences" class="panel-body">
<div id="preferences_probemaxtravel_group">
<table>
<tr>
<td>
<span><span translate>Max travel</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w8" type="number" min="1" max="99999" id="preferences_probemaxtravel" onchange="Checkvalues('preferences_probemaxtravel')" />
<span id="preferences_probemaxtravel_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
</div>
<br>
<div id="preferences_probefeedrate_group">
<table>
<tr>
<td>
<span><span translate>Feed rate</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w8" type="number" min="1" max="99999" id="preferences_probefeedrate" onchange="Checkvalues('preferences_probefeedrate')" />
<span id="preferences_probefeedrate_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm/min</span>
</div>
</td>
</tr>
</table>
</div>
<br>
<div id="preferences_probetouchplatethickness_group">
<table>
<tr>
<td>
<span><span translate>Touch plate thickness</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w8" type="number" min="0" max="99999" id="preferences_probetouchplatethickness" onchange="Checkvalues('preferences_probetouchplatethickness')" />
<span id="preferences_probetouchplatethickness_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
<td>
<div class="input-group">
<input class="hide_it"></input>
<span class="input-group-addon form_control" translate>mm</span>
</div>
</td>
</tr>
</table>
</div>

</div>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_files_panel" onclick="prefs_toggledisplay('show_files_panel')" />
<span translate>Show files panel</span>
</label>
</div>
</div>
<div class="panel-body" id="files_preferences">
<div id="preferences_filters_group">
<table>
<tr>
<td colspan=2>
<div class="checkbox">
<label>
<input type="checkbox" id="has_tft_sd" onclick="" />
<span translate>TFT SD card</span>
</label>
</div>
</td>
</tr>
<tr>
<td colspan=2>
<div class="checkbox">
<label>
<input type="checkbox" id="has_tft_usb" onclick="" />
<span translate>TFT USB disk</span>
</label>
</div>
</td>
</tr>
<tr>
<td>
<span><span translate>File extensions (use ; to separate)</span>:&nbsp;</span>
</td>
<td>
<div class="input-group has-control">
<input class="form-control w25" type="text" id="preferences_filters" onchange="Checkvalues('preferences_filters')" />
<span id="preferences_filters_icon" class="form-control-feedback ico_feedback"></span>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="panel panel-default">
<div class="panel-heading">
<div class="checkbox">
<label>
<input type="checkbox" id="show_commands_panel" onclick="prefs_toggledisplay('show_commands_panel')" />
<span translate>Show commands panel</span>
</label>
</div>
</div>
<div class="panel-body" id="cmd_preferences">
<div class="checkbox">
<label>
<input type="checkbox" id="preferences_autoscroll" />
<span translate>Autoscroll</span>
</label>
</div>
<div id="verbose_mode_prefs_check" class="checkbox">
<label>
<input type="checkbox" id="preferences_verbose_mode" />
<span translate>Verbose mode</span>
</label>
</div>
</div>
</div>
</div>
<div class="modal-footer">
<div class="pull-left" id="preferencesdlg_upload_msg">
<span translate>Saving</span>
&nbsp;
<progress name="prg" id="preferencesdlg_prg" max="100"></progress>
&nbsp;
<span id="preferencesdlg_upload_percent">0</span>%
</div>
<span class="pull-right">
<button class="btn btn-warning" onclick="closePreferencesDialog()" translate>Cancel</button>
</span>
<span class="pull-right">
&nbsp;&nbsp;
</span>
<span class="pull-right">
<button class="btn btn-primary" onclick="SavePreferences()" translate>Save</button>
</span>
</div>
</div>
<!-- /preferences content -->
</div>
<!-- /preferences Modal -->
<!-- restart Modal -->
<div id="restartdlg.html" class="modal topmodal">
<!-- restart content -->
<div class="modal-content">
<div class="modal-header">
<h3>
<div class="modal-title" translate>Restarting ESP3D</div>
</h3>
</div>
<div class="modal-body">
<table>
<tr>
<td><progress id='prgrestart' max='100'></progress></td>
<td>&nbsp;</td>
<td><span id='restartmsg' translate>Restarting, please wait....</span></td>
</tr>
</table>
</div>
<div class="modal-footer">
</div>
</div>
<!-- /restart content -->
</div>
<!-- /restart Modal -->
<!-- UIdisabled Modal -->
<div id="UIdisableddlg.html" class="modal topmodal">
<!-- UIdisabled content -->
<div class="modal-content">
<div class="modal-header">
<h3>
<div class="modal-title" translate>You are disconnected</div>
</h3>
</div>
<div class="modal-body">
<span id="disconnection_msg" translate>Looks like you are connected from another place, so this page is now disconnected</span>
</div>
<div class="modal-footer">
<span class="pull-right"><button class="btn btn-primary" onclick="window.location.reload() " translate>Please reconnect me</button></span>
</div>
</div>
<!-- /UIdisabled content -->
</div>
<!-- /UIdisabled Modal -->
<!-- / template -->
<!--removeIf(cleanheader)-->
<script>
var can_revert_wizard = false;

function openstep(evt, stepname) {
var i, stepcontent, steplinks;
if (evt.currentTarget.className.indexOf("wizard_done") > -1 && !can_revert_wizard) return;
stepcontent = document.getElementsByClassName("stepcontent");
for (i = 0; i < stepcontent.length; i++) {
stepcontent[i].style.display = "none";
}
steplinks = document.getElementsByClassName("steplinks");
for (i = 0; i < steplinks.length; i++) {
steplinks[i].className = steplinks[i].className.replace(" active", "");
}
document.getElementById(stepname).style.display = "block";
evt.currentTarget.className += " active";
}

</script>
<script>
var http_communication_locked = false;
var http_cmd_list = [];
var processing_cmd = false;
var xmlhttpupload;

var max_cmd = 20;

function clear_cmd_list() {
http_cmd_list = [];
processing_cmd = false;
}

function http_resultfn(response_text) {
if ((http_cmd_list.length > 0) && (typeof http_cmd_list[0].resultfn != 'undefined')) {
var fn = http_cmd_list[0].resultfn;
fn(response_text);
} //else console.log ("No resultfn");
http_cmd_list.shift();
processing_cmd = false;
process_cmd();
}

function http_errorfn(errorcode, response_text) {
if ((http_cmd_list.length > 0) && (typeof http_cmd_list[0].errorfn != 'undefined')) {
var fn = http_cmd_list[0].errorfn;
if (errorcode == 401) {
logindlg();
console.log("Authentication issue pls log");
}
fn(errorcode, response_text);
} //else console.log ("No errorfn");
http_cmd_list.shift();
processing_cmd = false;
process_cmd();
}

function process_cmd() {
if ((http_cmd_list.length > 0) && (!processing_cmd)) {
//console.log("Processing 1/" + http_cmd_list.length);
//console.log("Processing " + http_cmd_list[0].cmd);
if (http_cmd_list[0].type == "GET") {
processing_cmd = true;
ProcessGetHttp(http_cmd_list[0].cmd, http_resultfn, http_errorfn);
} else if (http_cmd_list[0].type == "POST") {
processing_cmd = true;
if (!(http_cmd_list[0].isupload)) {
ProcessPostHttp(http_cmd_list[0].cmd, http_cmd_list[0].data, http_resultfn, http_errorfn);
} else {
//console.log("Uploading");
ProcessFileHttp(http_cmd_list[0].cmd, http_cmd_list[0].data, http_cmd_list[0].progressfn, http_resultfn, http_errorfn);
}
} else if (http_cmd_list[0].type == "CMD") {
processing_cmd = true;
var fn = http_cmd_list[0].cmd;
fn();
http_cmd_list.shift();
processing_cmd = false;
process_cmd();
}

} //else if (http_cmd_list.length > 0)console.log("processing");
}

function AddCmd(cmd_fn, id) {
if (http_cmd_list.length > max_cmd) {
//console.log("adding rejected");
return;
}
var cmd_id = 0;
if (typeof id != 'undefined') cmd_id = id;
//onsole.log("adding command");
var cmd = {
cmd: cmd_fn,
type: "CMD",
id: cmd_id
};
http_cmd_list.push(cmd);
//console.log("Now " + http_cmd_list.length);
process_cmd();
}

function SendGetHttp(url, result_fn, error_fn, id, max_id) {
if ((http_cmd_list.length > max_cmd) && (max_cmd != -1)) {
console.log("adding rejected");
error_fn();
return;
}
var cmd_id = 0;
var cmd_max_id = 1;
//console.log("ID = " + id);
//console.log("Max ID = " + max_id);
//console.log("+++ " + url);
if (typeof id != 'undefined') {
cmd_id = id;
if (typeof max_id != 'undefined') cmd_max_id = max_id;
//else console.log("No Max ID defined");
for (p = 0; p < http_cmd_list.length; p++) {
//console.log("compare " + (max_id - cmd_max_id));
if (http_cmd_list[p].id == cmd_id) {
cmd_max_id--;
//console.log("found " + http_cmd_list[p].id + " and " + cmd_id);
}
if (cmd_max_id <= 0) {
//console.log("Limit reched for " + id);
return;
}
}
} //else console.log("No ID defined");
//console.log("adding " + url);
var cmd = {
cmd: url,
type: "GET",
isupload: false,
resultfn: result_fn,
errorfn: error_fn,
id: cmd_id
};
http_cmd_list.push(cmd);
//console.log("Now " + http_cmd_list.length);
process_cmd();
}

function ProcessGetHttp(url, resultfn, errorfn) {
if (http_communication_locked) {
errorfn(503, translate_text_item("Communication locked!"));
console.log("locked");
return;
}
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
if (xmlhttp.readyState == 4) {
if (xmlhttp.status == 200) {
//console.log("*** " + url + " done");
if (typeof resultfn != 'undefined' && resultfn != null) resultfn(xmlhttp.responseText);
} else {
if (xmlhttp.status == 401) GetIdentificationStatus();
if (typeof errorfn != 'undefined' && errorfn != null) errorfn(xmlhttp.status, xmlhttp.responseText);
}
}
}
if (url.indexOf("?") != -1) url += "&PAGEID=" + page_id;
//console.log("GET:" + url);
xmlhttp.open("GET", url, true);
xmlhttp.send();
}

function SendPostHttp(url, postdata, result_fn, error_fn, id, max_id) {
if ((http_cmd_list.length > max_cmd) && (max_cmd != -1)) {
//console.log("adding rejected");
error_fn();
return;
}
var cmd_id = 0;
var cmd_max_id = 1;
if (typeof id != 'undefined') {
cmd_id = id;
if (typeof max_id != 'undefined') cmd_max_id = max_id;
for (p = 0; p < http_cmd_list.length; p++) {
if (http_cmd_list[p].id == cmd_id) cmd_max_id--;
if (cmd_max_id <= 0) return;
}
}

//console.log("adding " + url);
var cmd = {
cmd: url,
type: "POST",
isupload: false,
data: postdata,
resultfn: result_fn,
errorfn: error_fn,
initfn: init_fn,
id: cmd_id
};
http_cmd_list.push(cmd);
process_cmd();
}

function ProcessPostHttp(url, postdata, resultfn, errorfn) {
if (http_communication_locked) {
errorfn(503, translate_text_item("Communication locked!"));
return;
}
var xmlhttp = new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
if (xmlhttp.readyState == 4) {
if (xmlhttp.status == 200) {
if (typeof resultfn != 'undefined' && resultfn != null) resultfn(xmlhttp.responseText);
} else {
if (xmlhttp.status == 401) GetIdentificationStatus();
if (typeof errorfn != 'undefined' && errorfn != null) errorfn(xmlhttp.status, xmlhttp.responseText);
}
}
}
//console.log(url);
xmlhttp.open("POST", url, true);
xmlhttp.send(postdata);
}

function SendFileHttp(url, postdata, progress_fn, result_fn, error_fn) {
if ((http_cmd_list.length > max_cmd) && (max_cmd != -1)) {
//console.log("adding rejected");
error_fn();
return;
}
if (http_cmd_list.length != 0) process = false;
var cmd = {
cmd: url,
type: "POST",
isupload: true,
data: postdata,
progressfn: progress_fn,
resultfn: result_fn,
errorfn: error_fn,
id: 0
};
http_cmd_list.push(cmd);
process_cmd();
}

function CancelCurrentUpload() {
xmlhttpupload.abort();
//http_communication_locked = false;
console.log("Cancel Upload");
}

function ProcessFileHttp(url, postdata, progressfn, resultfn, errorfn) {
if (http_communication_locked) {
errorfn(503, translate_text_item("Communication locked!"));
return;
}
http_communication_locked = true;
xmlhttpupload = new XMLHttpRequest();
xmlhttpupload.onreadystatechange = function() {
if (xmlhttpupload.readyState == 4) {
http_communication_locked = false;
if (xmlhttpupload.status == 200) {
if (typeof resultfn != 'undefined' && resultfn != null) resultfn(xmlhttpupload.responseText);
} else {
if (xmlhttpupload.status == 401) GetIdentificationStatus();
if (typeof errorfn != 'undefined' && errorfn != null) errorfn(xmlhttpupload.status, xmlhttpupload.responseText);
}
}
}
//console.log(url);
xmlhttpupload.open("POST", url, true);
if (typeof progressfn != 'undefined' && progressfn != null) xmlhttpupload.upload.addEventListener("progress", progressfn, false);
xmlhttpupload.send(postdata);
}

</script>
<script>
//bootstrap icons
var list_icon = {
"hourglass": "M1000 1200v-150q0 -21 -14.5 -35.5t-35.5 -14.5h-50v-100q0 -91 -49.5 -165.5t-130.5 -109.5q81 -35 130.5 -109.5t49.5 -165.5v-150h50q21 0 35.5 -14.5t14.5 -35.5v-150h-800v150q0 21 14.5 35.5t35.5 14.5h50v150q0 91 49.5 165.5t130.5 109.5q-81 35 -130.5 109.5 t-49.5 165.5v100h-50q-21 0 -35.5 14.5t-14.5 35.5v150h800zM400 1000v-100q0 -60 32.5 -109.5t87.5 -73.5q28 -12 44 -37t16 -55t-16 -55t-44 -37q-55 -24 -87.5 -73.5t-32.5 -109.5v-150h400v150q0 60 -32.5 109.5t-87.5 73.5q-28 12 -44 37t-16 55t16 55t44 37 q55 24 87.5 73.5t32.5 109.5v100h-400z",
"cloud": "M503 1089q110 0 200.5 -59.5t134.5 -156.5q44 14 90 14q120 0 205 -86.5t85 -206.5q0 -121 -85 -207.5t-205 -86.5h-750q-79 0 -135.5 57t-56.5 137q0 69 42.5 122.5t108.5 67.5q-2 12 -2 37q0 153 108 260.5t260 107.5z",
"envelope": "M25 1100h1150q10 0 12.5 -5t-5.5 -13l-564 -567q-8 -8 -18 -8t-18 8l-564 567q-8 8 -5.5 13t12.5 5zM18 882l264 -264q8 -8 8 -18t-8 -18l-264 -264q-8 -8 -13 -5.5t-5 12.5v550q0 10 5 12.5t13 -5.5zM918 618l264 264q8 8 13 5.5t5 -12.5v-550q0 -10 -5 -12.5t-13 5.5 l-264 264q-8 8 -8 18t8 18zM818 482l364 -364q8 -8 5.5 -13t-12.5 -5h-1150q-10 0 -12.5 5t5.5 13l364 364q8 8 18 8t18 -8l164 -164q8 -8 18 -8t18 8l164 164q8 8 18 8t18 -8z",
"pencil": "M1011 1210q19 0 33 -13l153 -153q13 -14 13 -33t-13 -33l-99 -92l-214 214l95 96q13 14 32 14zM1013 800l-615 -614l-214 214l614 614zM317 96l-333 -112l110 335z",
"music": "M368 1017l645 163q39 15 63 0t24 -49v-831q0 -55 -41.5 -95.5t-111.5 -63.5q-79 -25 -147 -4.5t-86 75t25.5 111.5t122.5 82q72 24 138 8v521l-600 -155v-606q0 -42 -44 -90t-109 -69q-79 -26 -147 -5.5t-86 75.5t25.5 111.5t122.5 82.5q72 24 138 7v639q0 38 14.5 59 t53.5 34z",
"search": "M500 1191q100 0 191 -39t156.5 -104.5t104.5 -156.5t39 -191l-1 -2l1 -5q0 -141 -78 -262l275 -274q23 -26 22.5 -44.5t-22.5 -42.5l-59 -58q-26 -20 -46.5 -20t-39.5 20l-275 274q-119 -77 -261 -77l-5 1l-2 -1q-100 0 -191 39t-156.5 104.5t-104.5 156.5t-39 191 t39 191t104.5 156.5t156.5 104.5t191 39zM500 1022q-88 0 -162 -43t-117 -117t-43 -162t43 -162t117 -117t162 -43t162 43t117 117t43 162t-43 162t-117 117t-162 43z",
"heart": "M649 949q48 68 109.5 104t121.5 38.5t118.5 -20t102.5 -64t71 -100.5t27 -123q0 -57 -33.5 -117.5t-94 -124.5t-126.5 -127.5t-150 -152.5t-146 -174q-62 85 -145.5 174t-150 152.5t-126.5 127.5t-93.5 124.5t-33.5 117.5q0 64 28 123t73 100.5t104 64t119 20 t120.5 -38.5t104.5 -104z",
"star": "M407 800l131 353q7 19 17.5 19t17.5 -19l129 -353h421q21 0 24 -8.5t-14 -20.5l-342 -249l130 -401q7 -20 -0.5 -25.5t-24.5 6.5l-343 246l-342 -247q-17 -12 -24.5 -6.5t-0.5 25.5l130 400l-347 251q-17 12 -14 20.5t23 8.5h429z",
"star-empty": "M407 800l131 353q7 19 17.5 19t17.5 -19l129 -353h421q21 0 24 -8.5t-14 -20.5l-342 -249l130 -401q7 -20 -0.5 -25.5t-24.5 6.5l-343 246l-342 -247q-17 -12 -24.5 -6.5t-0.5 25.5l130 400l-347 251q-17 12 -14 20.5t23 8.5h429zM477 700h-240l197 -142l-74 -226 l193 139l195 -140l-74 229l192 140h-234l-78 211z",
"user": "M600 1200q124 0 212 -88t88 -212v-250q0 -46 -31 -98t-69 -52v-75q0 -10 6 -21.5t15 -17.5l358 -230q9 -5 15 -16.5t6 -21.5v-93q0 -10 -7.5 -17.5t-17.5 -7.5h-1150q-10 0 -17.5 7.5t-7.5 17.5v93q0 10 6 21.5t15 16.5l358 230q9 6 15 17.5t6 21.5v75q-38 0 -69 52 t-31 98v250q0 124 88 212t212 88z",
"th-large": "M50 1100h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM650 1100h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400 q0 21 14.5 35.5t35.5 14.5zM50 500h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM650 500h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-400 q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5z",
"th": "M50 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200 q0 21 14.5 35.5t35.5 14.5zM850 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200 q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM850 700h200q21 0 35.5 -14.5t14.5 -35.5v-200 q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 300h200 q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM850 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5 t35.5 14.5z",
"th-list": "M50 1100h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 1100h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200 q0 21 14.5 35.5t35.5 14.5zM50 700h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 700h700q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-700 q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM50 300h200q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5zM450 300h700q21 0 35.5 -14.5t14.5 -35.5v-200 q0 -21 -14.5 -35.5t-35.5 -14.5h-700q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5z",
"ok": "M465 477l571 571q8 8 18 8t17 -8l177 -177q8 -7 8 -17t-8 -18l-783 -784q-7 -8 -17.5 -8t-17.5 8l-384 384q-8 8 -8 18t8 17l177 177q7 8 17 8t18 -8l171 -171q7 -7 18 -7t18 7z",
"remove": "M904 1083l178 -179q8 -8 8 -18.5t-8 -17.5l-267 -268l267 -268q8 -7 8 -17.5t-8 -18.5l-178 -178q-8 -8 -18.5 -8t-17.5 8l-268 267l-268 -267q-7 -8 -17.5 -8t-18.5 8l-178 178q-8 8 -8 18.5t8 17.5l267 268l-267 268q-8 7 -8 17.5t8 18.5l178 178q8 8 18.5 8t17.5 -8 l268 -267l268 268q7 7 17.5 7t18.5 -7z",
"zoom-in": "M507 1177q98 0 187.5 -38.5t154.5 -103.5t103.5 -154.5t38.5 -187.5q0 -141 -78 -262l300 -299q8 -8 8 -18.5t-8 -18.5l-109 -108q-7 -8 -17.5 -8t-18.5 8l-300 299q-119 -77 -261 -77q-98 0 -188 38.5t-154.5 103t-103 154.5t-38.5 188t38.5 187.5t103 154.5 t154.5 103.5t188 38.5zM506.5 1023q-89.5 0 -165.5 -44t-120 -120.5t-44 -166t44 -165.5t120 -120t165.5 -44t166 44t120.5 120t44 165.5t-44 166t-120.5 120.5t-166 44zM425 900h150q10 0 17.5 -7.5t7.5 -17.5v-75h75q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5 t-17.5 -7.5h-75v-75q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v75h-75q-10 0 -17.5 7.5t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5h75v75q0 10 7.5 17.5t17.5 7.5z",
"zoom-out": "M507 1177q98 0 187.5 -38.5t154.5 -103.5t103.5 -154.5t38.5 -187.5q0 -141 -78 -262l300 -299q8 -8 8 -18.5t-8 -18.5l-109 -108q-7 -8 -17.5 -8t-18.5 8l-300 299q-119 -77 -261 -77q-98 0 -188 38.5t-154.5 103t-103 154.5t-38.5 188t38.5 187.5t103 154.5 t154.5 103.5t188 38.5zM506.5 1023q-89.5 0 -165.5 -44t-120 -120.5t-44 -166t44 -165.5t120 -120t165.5 -44t166 44t120.5 120t44 165.5t-44 166t-120.5 120.5t-166 44zM325 800h350q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5t-17.5 -7.5h-350q-10 0 -17.5 7.5 t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5z",
"off": "M550 1200h100q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM800 975v166q167 -62 272 -209.5t105 -331.5q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5 t-184.5 123t-123 184.5t-45.5 224q0 184 105 331.5t272 209.5v-166q-103 -55 -165 -155t-62 -220q0 -116 57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5q0 120 -62 220t-165 155z",
"signal": "M1025 1200h150q10 0 17.5 -7.5t7.5 -17.5v-1150q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v1150q0 10 7.5 17.5t17.5 7.5zM725 800h150q10 0 17.5 -7.5t7.5 -17.5v-750q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v750 q0 10 7.5 17.5t17.5 7.5zM425 500h150q10 0 17.5 -7.5t7.5 -17.5v-450q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v450q0 10 7.5 17.5t17.5 7.5zM125 300h150q10 0 17.5 -7.5t7.5 -17.5v-250q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5 v250q0 10 7.5 17.5t17.5 7.5z",
"cog": "M600 1174q33 0 74 -5l38 -152l5 -1q49 -14 94 -39l5 -2l134 80q61 -48 104 -105l-80 -134l3 -5q25 -44 39 -93l1 -6l152 -38q5 -43 5 -73q0 -34 -5 -74l-152 -38l-1 -6q-15 -49 -39 -93l-3 -5l80 -134q-48 -61 -104 -105l-134 81l-5 -3q-44 -25 -94 -39l-5 -2l-38 -151 q-43 -5 -74 -5q-33 0 -74 5l-38 151l-5 2q-49 14 -94 39l-5 3l-134 -81q-60 48 -104 105l80 134l-3 5q-25 45 -38 93l-2 6l-151 38q-6 42 -6 74q0 33 6 73l151 38l2 6q13 48 38 93l3 5l-80 134q47 61 105 105l133 -80l5 2q45 25 94 39l5 1l38 152q43 5 74 5zM600 815 q-89 0 -152 -63t-63 -151.5t63 -151.5t152 -63t152 63t63 151.5t-63 151.5t-152 63z",
"trash": "M500 1300h300q41 0 70.5 -29.5t29.5 -70.5v-100h275q10 0 17.5 -7.5t7.5 -17.5v-75h-1100v75q0 10 7.5 17.5t17.5 7.5h275v100q0 41 29.5 70.5t70.5 29.5zM500 1200v-100h300v100h-300zM1100 900v-800q0 -41 -29.5 -70.5t-70.5 -29.5h-700q-41 0 -70.5 29.5t-29.5 70.5 v800h900zM300 800v-700h100v700h-100zM500 800v-700h100v700h-100zM700 800v-700h100v700h-100zM900 800v-700h100v700h-100z",
"home": "M18 618l620 608q8 7 18.5 7t17.5 -7l608 -608q8 -8 5.5 -13t-12.5 -5h-175v-575q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10 0 -17.5 7.5t-7.5 17.5v375h-300v-375q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10 0 -17.5 7.5t-7.5 17.5v575h-175q-10 0 -12.5 5t5.5 13z",
"file": "M600 1200v-400q0 -41 29.5 -70.5t70.5 -29.5h300v-650q0 -21 -14.5 -35.5t-35.5 -14.5h-800q-21 0 -35.5 14.5t-14.5 35.5v1100q0 21 14.5 35.5t35.5 14.5h450zM1000 800h-250q-21 0 -35.5 14.5t-14.5 35.5v250z",
"time": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM525 900h50q10 0 17.5 -7.5t7.5 -17.5v-275h175q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-250q-10 0 -17.5 7.5t-7.5 17.5v350q0 10 7.5 17.5t17.5 7.5z",
"download-alt": "M550 1200h200q21 0 35.5 -14.5t14.5 -35.5v-450h191q20 0 25.5 -11.5t-7.5 -27.5l-327 -400q-13 -16 -32 -16t-32 16l-327 400q-13 16 -7.5 27.5t25.5 11.5h191v450q0 21 14.5 35.5t35.5 14.5zM1125 400h50q10 0 17.5 -7.5t7.5 -17.5v-350q0 -10 -7.5 -17.5t-17.5 -7.5 h-1050q-10 0 -17.5 7.5t-7.5 17.5v350q0 10 7.5 17.5t17.5 7.5h50q10 0 17.5 -7.5t7.5 -17.5v-175h900v175q0 10 7.5 17.5t17.5 7.5z",
"download": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM525 900h150q10 0 17.5 -7.5t7.5 -17.5v-275h137q21 0 26 -11.5t-8 -27.5l-223 -275q-13 -16 -32 -16t-32 16l-223 275q-13 16 -8 27.5t26 11.5h137v275q0 10 7.5 17.5t17.5 7.5z ",
"upload": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM632 914l223 -275q13 -16 8 -27.5t-26 -11.5h-137v-275q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v275h-137q-21 0 -26 11.5t8 27.5l223 275q13 16 32 16 t32 -16z",
"inbox": "M225 1200h750q10 0 19.5 -7t12.5 -17l186 -652q7 -24 7 -49v-425q0 -12 -4 -27t-9 -17q-12 -6 -37 -6h-1100q-12 0 -27 4t-17 8q-6 13 -6 38l1 425q0 25 7 49l185 652q3 10 12.5 17t19.5 7zM878 1000h-556q-10 0 -19 -7t-11 -18l-87 -450q-2 -11 4 -18t16 -7h150 q10 0 19.5 -7t11.5 -17l38 -152q2 -10 11.5 -17t19.5 -7h250q10 0 19.5 7t11.5 17l38 152q2 10 11.5 17t19.5 7h150q10 0 16 7t4 18l-87 450q-2 11 -11 18t-19 7z",
"play-circle": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM540 820l253 -190q17 -12 17 -30t-17 -30l-253 -190q-16 -12 -28 -6.5t-12 26.5v400q0 21 12 26.5t28 -6.5z",
"repeat": "M947 1060l135 135q7 7 12.5 5t5.5 -13v-362q0 -10 -7.5 -17.5t-17.5 -7.5h-362q-11 0 -13 5.5t5 12.5l133 133q-109 76 -238 76q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5h150q0 -117 -45.5 -224 t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117z",
"refresh": "M947 1060l135 135q7 7 12.5 5t5.5 -13v-361q0 -11 -7.5 -18.5t-18.5 -7.5h-361q-11 0 -13 5.5t5 12.5l134 134q-110 75 -239 75q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5h-150q0 117 45.5 224t123 184.5t184.5 123t224 45.5q192 0 347 -117zM1027 600h150 q0 -117 -45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5q-192 0 -348 118l-134 -134q-7 -8 -12.5 -5.5t-5.5 12.5v360q0 11 7.5 18.5t18.5 7.5h360q10 0 12.5 -5.5t-5.5 -12.5l-133 -133q110 -76 240 -76q116 0 214.5 57t155.5 155.5t57 214.5z",
"list-alt": "M125 1200h1050q10 0 17.5 -7.5t7.5 -17.5v-1150q0 -10 -7.5 -17.5t-17.5 -7.5h-1050q-10 0 -17.5 7.5t-7.5 17.5v1150q0 10 7.5 17.5t17.5 7.5zM1075 1000h-850q-10 0 -17.5 -7.5t-7.5 -17.5v-850q0 -10 7.5 -17.5t17.5 -7.5h850q10 0 17.5 7.5t7.5 17.5v850 q0 10 -7.5 17.5t-17.5 7.5zM325 900h50q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-50q-10 0 -17.5 7.5t-7.5 17.5v50q0 10 7.5 17.5t17.5 7.5zM525 900h450q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-450q-10 0 -17.5 7.5t-7.5 17.5v50 q0 10 7.5 17.5t17.5 7.5zM325 700h50q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-50q-10 0 -17.5 7.5t-7.5 17.5v50q0 10 7.5 17.5t17.5 7.5zM525 700h450q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-450q-10 0 -17.5 7.5t-7.5 17.5v50 q0 10 7.5 17.5t17.5 7.5zM325 500h50q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-50q-10 0 -17.5 7.5t-7.5 17.5v50q0 10 7.5 17.5t17.5 7.5zM525 500h450q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-450q-10 0 -17.5 7.5t-7.5 17.5v50 q0 10 7.5 17.5t17.5 7.5zM325 300h50q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-50q-10 0 -17.5 7.5t-7.5 17.5v50q0 10 7.5 17.5t17.5 7.5zM525 300h450q10 0 17.5 -7.5t7.5 -17.5v-50q0 -10 -7.5 -17.5t-17.5 -7.5h-450q-10 0 -17.5 7.5t-7.5 17.5v50 q0 10 7.5 17.5t17.5 7.5z",
"lock": "M900 800v200q0 83 -58.5 141.5t-141.5 58.5h-300q-82 0 -141 -59t-59 -141v-200h-100q-41 0 -70.5 -29.5t-29.5 -70.5v-600q0 -41 29.5 -70.5t70.5 -29.5h900q41 0 70.5 29.5t29.5 70.5v600q0 41 -29.5 70.5t-70.5 29.5h-100zM400 800v150q0 21 15 35.5t35 14.5h200 q20 0 35 -14.5t15 -35.5v-150h-300z",
"flag": "M125 1100h50q10 0 17.5 -7.5t7.5 -17.5v-1075h-100v1075q0 10 7.5 17.5t17.5 7.5zM1075 1052q4 0 9 -2q16 -6 16 -23v-421q0 -6 -3 -12q-33 -59 -66.5 -99t-65.5 -58t-56.5 -24.5t-52.5 -6.5q-26 0 -57.5 6.5t-52.5 13.5t-60 21q-41 15 -63 22.5t-57.5 15t-65.5 7.5 q-85 0 -160 -57q-7 -5 -15 -5q-6 0 -11 3q-14 7 -14 22v438q22 55 82 98.5t119 46.5q23 2 43 0.5t43 -7t32.5 -8.5t38 -13t32.5 -11q41 -14 63.5 -21t57 -14t63.5 -7q103 0 183 87q7 8 18 8z",
"volume-off": "M321 814l258 172q9 6 15 2.5t6 -13.5v-750q0 -10 -6 -13.5t-15 2.5l-258 172q-21 14 -46 14h-250q-10 0 -17.5 7.5t-7.5 17.5v350q0 10 7.5 17.5t17.5 7.5h250q25 0 46 14zM900 668l120 120q7 7 17 7t17 -7l34 -34q7 -7 7 -17t-7 -17l-120 -120l120 -120q7 -7 7 -17 t-7 -17l-34 -34q-7 -7 -17 -7t-17 7l-120 119l-120 -119q-7 -7 -17 -7t-17 7l-34 34q-7 7 -7 17t7 17l119 120l-119 120q-7 7 -7 17t7 17l34 34q7 8 17 8t17 -8z",
"volume-down": "M321 814l258 172q9 6 15 2.5t6 -13.5v-750q0 -10 -6 -13.5t-15 2.5l-258 172q-21 14 -46 14h-250q-10 0 -17.5 7.5t-7.5 17.5v350q0 10 7.5 17.5t17.5 7.5h250q25 0 46 14zM766 900h4q10 -1 16 -10q96 -129 96 -290q0 -154 -90 -281q-6 -9 -17 -10l-3 -1q-9 0 -16 6 l-29 23q-7 7 -8.5 16.5t4.5 17.5q72 103 72 229q0 132 -78 238q-6 8 -4.5 18t9.5 17l29 22q7 5 15 5z",
"volume-up": "M967 1004h3q11 -1 17 -10q135 -179 135 -396q0 -105 -34 -206.5t-98 -185.5q-7 -9 -17 -10h-3q-9 0 -16 6l-42 34q-8 6 -9 16t5 18q111 150 111 328q0 90 -29.5 176t-84.5 157q-6 9 -5 19t10 16l42 33q7 5 15 5zM321 814l258 172q9 6 15 2.5t6 -13.5v-750q0 -10 -6 -13.5 t-15 2.5l-258 172q-21 14 -46 14h-250q-10 0 -17.5 7.5t-7.5 17.5v350q0 10 7.5 17.5t17.5 7.5h250q25 0 46 14zM766 900h4q10 -1 16 -10q96 -129 96 -290q0 -154 -90 -281q-6 -9 -17 -10l-3 -1q-9 0 -16 6l-29 23q-7 7 -8.5 16.5t4.5 17.5q72 103 72 229q0 132 -78 238 q-6 8 -4.5 18.5t9.5 16.5l29 22q7 5 15 5z",
"tag": "M500 1200l682 -682q8 -8 8 -18t-8 -18l-464 -464q-8 -8 -18 -8t-18 8l-682 682l1 475q0 10 7.5 17.5t17.5 7.5h474zM319.5 1024.5q-29.5 29.5 -71 29.5t-71 -29.5t-29.5 -71.5t29.5 -71.5t71 -29.5t71 29.5t29.5 71.5t-29.5 71.5z",
"print": "M822 1200h-444q-11 0 -19 -7.5t-9 -17.5l-78 -301q-7 -24 7 -45l57 -108q6 -9 17.5 -15t21.5 -6h450q10 0 21.5 6t17.5 15l62 108q14 21 7 45l-83 301q-1 10 -9 17.5t-19 7.5zM1175 800h-150q-10 0 -21 -6.5t-15 -15.5l-78 -156q-4 -9 -15 -15.5t-21 -6.5h-550 q-10 0 -21 6.5t-15 15.5l-78 156q-4 9 -15 15.5t-21 6.5h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-650q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 7.5 17.5t17.5 7.5h750q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5 t7.5 17.5v650q0 10 -7.5 17.5t-17.5 7.5zM850 200h-500q-10 0 -19.5 -7t-11.5 -17l-38 -152q-2 -10 3.5 -17t15.5 -7h600q10 0 15.5 7t3.5 17l-38 152q-2 10 -11.5 17t-19.5 7z",
"camera": "M500 1100h200q56 0 102.5 -20.5t72.5 -50t44 -59t25 -50.5l6 -20h150q41 0 70.5 -29.5t29.5 -70.5v-600q0 -41 -29.5 -70.5t-70.5 -29.5h-1000q-41 0 -70.5 29.5t-29.5 70.5v600q0 41 29.5 70.5t70.5 29.5h150q2 8 6.5 21.5t24 48t45 61t72 48t102.5 21.5zM900 800v-100 h100v100h-100zM600 730q-95 0 -162.5 -67.5t-67.5 -162.5t67.5 -162.5t162.5 -67.5t162.5 67.5t67.5 162.5t-67.5 162.5t-162.5 67.5zM600 603q43 0 73 -30t30 -73t-30 -73t-73 -30t-73 30t-30 73t30 73t73 30z",
"align-justify": "M50 1100h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5zM50 800h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100 q0 21 14.5 35.5t35.5 14.5zM50 500h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5zM50 200h1100q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1100 q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5z",
"facetime-video": "M75 1000h750q31 0 53 -22t22 -53v-650q0 -31 -22 -53t-53 -22h-750q-31 0 -53 22t-22 53v650q0 31 22 53t53 22zM1200 300l-300 300l300 300v-600z",
"picture": "M44 1100h1112q18 0 31 -13t13 -31v-1012q0 -18 -13 -31t-31 -13h-1112q-18 0 -31 13t-13 31v1012q0 18 13 31t31 13zM100 1000v-737l247 182l298 -131l-74 156l293 318l236 -288v500h-1000zM342 884q56 0 95 -39t39 -94.5t-39 -95t-95 -39.5t-95 39.5t-39 95t39 94.5 t95 39z",
"map-maker": "M648 1169q117 0 216 -60t156.5 -161t57.5 -218q0 -115 -70 -258q-69 -109 -158 -225.5t-143 -179.5l-54 -62q-9 8 -25.5 24.5t-63.5 67.5t-91 103t-98.5 128t-95.5 148q-60 132 -60 249q0 88 34 169.5t91.5 142t137 96.5t166.5 36zM652.5 974q-91.5 0 -156.5 -65 t-65 -157t65 -156.5t156.5 -64.5t156.5 64.5t65 156.5t-65 157t-156.5 65z",
"adjust": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 173v854q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57z",
"tint": "M554 1295q21 -72 57.5 -143.5t76 -130t83 -118t82.5 -117t70 -116t49.5 -126t18.5 -136.5q0 -71 -25.5 -135t-68.5 -111t-99 -82t-118.5 -54t-125.5 -23q-84 5 -161.5 34t-139.5 78.5t-99 125t-37 164.5q0 69 18 136.5t49.5 126.5t69.5 116.5t81.5 117.5t83.5 119 t76.5 131t58.5 143zM344 710q-23 -33 -43.5 -70.5t-40.5 -102.5t-17 -123q1 -37 14.5 -69.5t30 -52t41 -37t38.5 -24.5t33 -15q21 -7 32 -1t13 22l6 34q2 10 -2.5 22t-13.5 19q-5 4 -14 12t-29.5 40.5t-32.5 73.5q-26 89 6 271q2 11 -6 11q-8 1 -15 -10z",
"edit": "M1000 1013l108 115q2 1 5 2t13 2t20.5 -1t25 -9.5t28.5 -21.5q22 -22 27 -43t0 -32l-6 -10l-108 -115zM350 1100h400q50 0 105 -13l-187 -187h-368q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5v182l200 200v-332 q0 -165 -93.5 -257.5t-256.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5zM1009 803l-362 -362l-161 -50l55 170l355 355z",
"share": "M350 1100h361q-164 -146 -216 -200h-195q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5l200 153v-103q0 -165 -92.5 -257.5t-257.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5z M824 1073l339 -301q8 -7 8 -17.5t-8 -17.5l-340 -306q-7 -6 -12.5 -4t-6.5 11v203q-26 1 -54.5 0t-78.5 -7.5t-92 -17.5t-86 -35t-70 -57q10 59 33 108t51.5 81.5t65 58.5t68.5 40.5t67 24.5t56 13.5t40 4.5v210q1 10 6.5 12.5t13.5 -4.5z",
"check": "M350 1100h350q60 0 127 -23l-178 -177h-349q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5v69l200 200v-219q0 -165 -92.5 -257.5t-257.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5z M643 639l395 395q7 7 17.5 7t17.5 -7l101 -101q7 -7 7 -17.5t-7 -17.5l-531 -532q-7 -7 -17.5 -7t-17.5 7l-248 248q-7 7 -7 17.5t7 17.5l101 101q7 7 17.5 7t17.5 -7l111 -111q8 -7 18 -7t18 7z",
"move": "M318 918l264 264q8 8 18 8t18 -8l260 -264q7 -8 4.5 -13t-12.5 -5h-170v-200h200v173q0 10 5 12t13 -5l264 -260q8 -7 8 -17.5t-8 -17.5l-264 -265q-8 -7 -13 -5t-5 12v173h-200v-200h170q10 0 12.5 -5t-4.5 -13l-260 -264q-8 -8 -18 -8t-18 8l-264 264q-8 8 -5.5 13 t12.5 5h175v200h-200v-173q0 -10 -5 -12t-13 5l-264 265q-8 7 -8 17.5t8 17.5l264 260q8 7 13 5t5 -12v-173h200v200h-175q-10 0 -12.5 5t5.5 13z",
"step-backward": "M250 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z",
"fast-backward": "M50 1100h100q21 0 35.5 -14.5t14.5 -35.5v-438l464 453q15 14 25.5 10t10.5 -25v-438l464 453q15 14 25.5 10t10.5 -25v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5 t-14.5 35.5v1000q0 21 14.5 35.5t35.5 14.5z",
"backward": "M1200 1050v-1000q0 -21 -10.5 -25t-25.5 10l-464 453v-438q0 -21 -10.5 -25t-25.5 10l-492 480q-15 14 -15 35t15 35l492 480q15 14 25.5 10t10.5 -25v-438l464 453q15 14 25.5 10t10.5 -25z",
"play": "M243 1074l814 -498q18 -11 18 -26t-18 -26l-814 -498q-18 -11 -30.5 -4t-12.5 28v1000q0 21 12.5 28t30.5 -4z",
"pause": "M250 1000h200q21 0 35.5 -14.5t14.5 -35.5v-800q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v800q0 21 14.5 35.5t35.5 14.5zM650 1000h200q21 0 35.5 -14.5t14.5 -35.5v-800q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v800 q0 21 14.5 35.5t35.5 14.5z",
"stop": "M1100 950v-800q0 -21 -14.5 -35.5t-35.5 -14.5h-800q-21 0 -35.5 14.5t-14.5 35.5v800q0 21 14.5 35.5t35.5 14.5h800q21 0 35.5 -14.5t14.5 -35.5z",
"forward": "M500 612v438q0 21 10.5 25t25.5 -10l492 -480q15 -14 15 -35t-15 -35l-492 -480q-15 -14 -25.5 -10t-10.5 25v438l-464 -453q-15 -14 -25.5 -10t-10.5 25v1000q0 21 10.5 25t25.5 -10z",
"fast-forward": "M1048 1102l100 1q20 0 35 -14.5t15 -35.5l5 -1000q0 -21 -14.5 -35.5t-35.5 -14.5l-100 -1q-21 0 -35.5 14.5t-14.5 35.5l-2 437l-463 -454q-14 -15 -24.5 -10.5t-10.5 25.5l-2 437l-462 -455q-15 -14 -25.5 -9.5t-10.5 24.5l-5 1000q0 21 10.5 25.5t25.5 -10.5l466 -450 l-2 438q0 20 10.5 24.5t25.5 -9.5l466 -451l-2 438q0 21 14.5 35.5t35.5 14.5z",
"step-forward": "M850 1100h100q21 0 35.5 -14.5t14.5 -35.5v-1000q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v438l-464 -453q-15 -14 -25.5 -10t-10.5 25v1000q0 21 10.5 25t25.5 -10l464 -453v438q0 21 14.5 35.5t35.5 14.5z",
"eject": "M686 1081l501 -540q15 -15 10.5 -26t-26.5 -11h-1042q-22 0 -26.5 11t10.5 26l501 540q15 15 36 15t36 -15zM150 400h1000q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-1000q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5z",
"key": "M250 1200h600q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -14.5 -35.5t-35.5 -14.5h-150v-500l-255 -178q-19 -9 -32 -1t-13 29v650h-150q-21 0 -35.5 14.5t-14.5 35.5v400q0 21 14.5 35.5t35.5 14.5zM400 1100v-100h300v100h-300z",
"exit": "M250 1200h750q39 0 69.5 -40.5t30.5 -84.5v-933l-700 -117v950l600 125h-700v-1000h-100v1025q0 23 15.5 49t34.5 26zM500 525v-100l100 20v100z",
"plus-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM650 900h-100q-21 0 -35.5 -14.5t-14.5 -35.5v-150h-150 q-21 0 -35.5 -14.5t-14.5 -35.5v-100q0 -21 14.5 -35.5t35.5 -14.5h150v-150q0 -21 14.5 -35.5t35.5 -14.5h100q21 0 35.5 14.5t14.5 35.5v150h150q21 0 35.5 14.5t14.5 35.5v100q0 21 -14.5 35.5t-35.5 14.5h-150v150q0 21 -14.5 35.5t-35.5 14.5z",
"minus-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM850 700h-500q-21 0 -35.5 -14.5t-14.5 -35.5v-100q0 -21 14.5 -35.5 t35.5 -14.5h500q21 0 35.5 14.5t14.5 35.5v100q0 21 -14.5 35.5t-35.5 14.5z",
"remove-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM741.5 913q-12.5 0 -21.5 -9l-120 -120l-120 120q-9 9 -21.5 9 t-21.5 -9l-141 -141q-9 -9 -9 -21.5t9 -21.5l120 -120l-120 -120q-9 -9 -9 -21.5t9 -21.5l141 -141q9 -9 21.5 -9t21.5 9l120 120l120 -120q9 -9 21.5 -9t21.5 9l141 141q9 9 9 21.5t-9 21.5l-120 120l120 120q9 9 9 21.5t-9 21.5l-141 141q-9 9 -21.5 9z",
"ok-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM546 623l-84 85q-7 7 -17.5 7t-18.5 -7l-139 -139q-7 -8 -7 -18t7 -18 l242 -241q7 -8 17.5 -8t17.5 8l375 375q7 7 7 17.5t-7 18.5l-139 139q-7 7 -17.5 7t-17.5 -7z",
"question-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM588 941q-29 0 -59 -5.5t-63 -20.5t-58 -38.5t-41.5 -63t-16.5 -89.5 q0 -25 20 -25h131q30 -5 35 11q6 20 20.5 28t45.5 8q20 0 31.5 -10.5t11.5 -28.5q0 -23 -7 -34t-26 -18q-1 0 -13.5 -4t-19.5 -7.5t-20 -10.5t-22 -17t-18.5 -24t-15.5 -35t-8 -46q-1 -8 5.5 -16.5t20.5 -8.5h173q7 0 22 8t35 28t37.5 48t29.5 74t12 100q0 47 -17 83 t-42.5 57t-59.5 34.5t-64 18t-59 4.5zM675 400h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5z",
"info-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM675 1000h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5 t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5zM675 700h-250q-10 0 -17.5 -7.5t-7.5 -17.5v-50q0 -10 7.5 -17.5t17.5 -7.5h75v-200h-75q-10 0 -17.5 -7.5t-7.5 -17.5v-50q0 -10 7.5 -17.5t17.5 -7.5h350q10 0 17.5 7.5t7.5 17.5v50q0 10 -7.5 17.5 t-17.5 7.5h-75v275q0 10 -7.5 17.5t-17.5 7.5z",
"screenshot": "M525 1200h150q10 0 17.5 -7.5t7.5 -17.5v-194q103 -27 178.5 -102.5t102.5 -178.5h194q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5t-17.5 -7.5h-194q-27 -103 -102.5 -178.5t-178.5 -102.5v-194q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v194 q-103 27 -178.5 102.5t-102.5 178.5h-194q-10 0 -17.5 7.5t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5h194q27 103 102.5 178.5t178.5 102.5v194q0 10 7.5 17.5t17.5 7.5zM700 893v-168q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v168q-68 -23 -119 -74 t-74 -119h168q10 0 17.5 -7.5t7.5 -17.5v-150q0 -10 -7.5 -17.5t-17.5 -7.5h-168q23 -68 74 -119t119 -74v168q0 10 7.5 17.5t17.5 7.5h150q10 0 17.5 -7.5t7.5 -17.5v-168q68 23 119 74t74 119h-168q-10 0 -17.5 7.5t-7.5 17.5v150q0 10 7.5 17.5t17.5 7.5h168 q-23 68 -74 119t-119 74z",
"remove-circle": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM759 823l64 -64q7 -7 7 -17.5t-7 -17.5l-124 -124l124 -124q7 -7 7 -17.5t-7 -17.5l-64 -64q-7 -7 -17.5 -7t-17.5 7l-124 124l-124 -124q-7 -7 -17.5 -7t-17.5 7l-64 64 q-7 7 -7 17.5t7 17.5l124 124l-124 124q-7 7 -7 17.5t7 17.5l64 64q7 7 17.5 7t17.5 -7l124 -124l124 124q7 7 17.5 7t17.5 -7z",
"ok-circle": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5t57 -214.5 t155.5 -155.5t214.5 -57t214.5 57t155.5 155.5t57 214.5t-57 214.5t-155.5 155.5t-214.5 57zM782 788l106 -106q7 -7 7 -17.5t-7 -17.5l-320 -321q-8 -7 -18 -7t-18 7l-202 203q-8 7 -8 17.5t8 17.5l106 106q7 8 17.5 8t17.5 -8l79 -79l197 197q7 7 17.5 7t17.5 -7z",
"ban-circle": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM600 1027q-116 0 -214.5 -57t-155.5 -155.5t-57 -214.5q0 -120 65 -225 l587 587q-105 65 -225 65zM965 819l-584 -584q104 -62 219 -62q116 0 214.5 57t155.5 155.5t57 214.5q0 115 -62 219z",
"arrow-left": "M39 582l522 427q16 13 27.5 8t11.5 -26v-291h550q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-550v-291q0 -21 -11.5 -26t-27.5 8l-522 427q-16 13 -16 32t16 32z",
"arrow-right": "M639 1009l522 -427q16 -13 16 -32t-16 -32l-522 -427q-16 -13 -27.5 -8t-11.5 26v291h-550q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h550v291q0 21 11.5 26t27.5 -8z",
"arrow-up": "M682 1161l427 -522q13 -16 8 -27.5t-26 -11.5h-291v-550q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v550h-291q-21 0 -26 11.5t8 27.5l427 522q13 16 32 16t32 -16z",
"arrow-down": "M550 1200h200q21 0 35.5 -14.5t14.5 -35.5v-550h291q21 0 26 -11.5t-8 -27.5l-427 -522q-13 -16 -32 -16t-32 16l-427 522q-13 16 -8 27.5t26 11.5h291v550q0 21 14.5 35.5t35.5 14.5z",
"share-alt": "M639 1109l522 -427q16 -13 16 -32t-16 -32l-522 -427q-16 -13 -27.5 -8t-11.5 26v291q-94 -2 -182 -20t-170.5 -52t-147 -92.5t-100.5 -135.5q5 105 27 193.5t67.5 167t113 135t167 91.5t225.5 42v262q0 21 11.5 26t27.5 -8z",
"resize-full": "M850 1200h300q21 0 35.5 -14.5t14.5 -35.5v-300q0 -21 -10.5 -25t-24.5 10l-94 94l-249 -249q-8 -7 -18 -7t-18 7l-106 106q-7 8 -7 18t7 18l249 249l-94 94q-14 14 -10 24.5t25 10.5zM350 0h-300q-21 0 -35.5 14.5t-14.5 35.5v300q0 21 10.5 25t24.5 -10l94 -94l249 249 q8 7 18 7t18 -7l106 -106q7 -8 7 -18t-7 -18l-249 -249l94 -94q14 -14 10 -24.5t-25 -10.5z",
"resize-small": "M1014 1120l106 -106q7 -8 7 -18t-7 -18l-249 -249l94 -94q14 -14 10 -24.5t-25 -10.5h-300q-21 0 -35.5 14.5t-14.5 35.5v300q0 21 10.5 25t24.5 -10l94 -94l249 249q8 7 18 7t18 -7zM250 600h300q21 0 35.5 -14.5t14.5 -35.5v-300q0 -21 -10.5 -25t-24.5 10l-94 94 l-249 -249q-8 -7 -18 -7t-18 7l-106 106q-7 8 -7 18t7 18l249 249l-94 94q-14 14 -10 24.5t25 10.5z",
"exclamation-sign": "M600 1177q117 0 224 -45.5t184.5 -123t123 -184.5t45.5 -224t-45.5 -224t-123 -184.5t-184.5 -123t-224 -45.5t-224 45.5t-184.5 123t-123 184.5t-45.5 224t45.5 224t123 184.5t184.5 123t224 45.5zM704 900h-208q-20 0 -32 -14.5t-8 -34.5l58 -302q4 -20 21.5 -34.5 t37.5 -14.5h54q20 0 37.5 14.5t21.5 34.5l58 302q4 20 -8 34.5t-32 14.5zM675 400h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5z",
"fire": "M653 1231q-39 -67 -54.5 -131t-10.5 -114.5t24.5 -96.5t47.5 -80t63.5 -62.5t68.5 -46.5t65 -30q-4 7 -17.5 35t-18.5 39.5t-17 39.5t-17 43t-13 42t-9.5 44.5t-2 42t4 43t13.5 39t23 38.5q96 -42 165 -107.5t105 -138t52 -156t13 -159t-19 -149.5q-13 -55 -44 -106.5 t-68 -87t-78.5 -64.5t-72.5 -45t-53 -22q-72 -22 -127 -11q-31 6 -13 19q6 3 17 7q13 5 32.5 21t41 44t38.5 63.5t21.5 81.5t-6.5 94.5t-50 107t-104 115.5q10 -104 -0.5 -189t-37 -140.5t-65 -93t-84 -52t-93.5 -11t-95 24.5q-80 36 -131.5 114t-53.5 171q-2 23 0 49.5 t4.5 52.5t13.5 56t27.5 60t46 64.5t69.5 68.5q-8 -53 -5 -102.5t17.5 -90t34 -68.5t44.5 -39t49 -2q31 13 38.5 36t-4.5 55t-29 64.5t-36 75t-26 75.5q-15 85 2 161.5t53.5 128.5t85.5 92.5t93.5 61t81.5 25.5z",
"eye-open": "M600 1094q82 0 160.5 -22.5t140 -59t116.5 -82.5t94.5 -95t68 -95t42.5 -82.5t14 -57.5t-14 -57.5t-43 -82.5t-68.5 -95t-94.5 -95t-116.5 -82.5t-140 -59t-159.5 -22.5t-159.5 22.5t-140 59t-116.5 82.5t-94.5 95t-68.5 95t-43 82.5t-14 57.5t14 57.5t42.5 82.5t68 95 t94.5 95t116.5 82.5t140 59t160.5 22.5zM888 829q-15 15 -18 12t5 -22q25 -57 25 -119q0 -124 -88 -212t-212 -88t-212 88t-88 212q0 59 23 114q8 19 4.5 22t-17.5 -12q-70 -69 -160 -184q-13 -16 -15 -40.5t9 -42.5q22 -36 47 -71t70 -82t92.5 -81t113 -58.5t133.5 -24.5 t133.5 24t113 58.5t92.5 81.5t70 81.5t47 70.5q11 18 9 42.5t-14 41.5q-90 117 -163 189zM448 727l-35 -36q-15 -15 -19.5 -38.5t4.5 -41.5q37 -68 93 -116q16 -13 38.5 -11t36.5 17l35 34q14 15 12.5 33.5t-16.5 33.5q-44 44 -89 117q-11 18 -28 20t-32 -12z",
"eye-close": "M592 0h-148l31 120q-91 20 -175.5 68.5t-143.5 106.5t-103.5 119t-66.5 110t-22 76q0 21 14 57.5t42.5 82.5t68 95t94.5 95t116.5 82.5t140 59t160.5 22.5q61 0 126 -15l32 121h148zM944 770l47 181q108 -85 176.5 -192t68.5 -159q0 -26 -19.5 -71t-59.5 -102t-93 -112 t-129 -104.5t-158 -75.5l46 173q77 49 136 117t97 131q11 18 9 42.5t-14 41.5q-54 70 -107 130zM310 824q-70 -69 -160 -184q-13 -16 -15 -40.5t9 -42.5q18 -30 39 -60t57 -70.5t74 -73t90 -61t105 -41.5l41 154q-107 18 -178.5 101.5t-71.5 193.5q0 59 23 114q8 19 4.5 22 t-17.5 -12zM448 727l-35 -36q-15 -15 -19.5 -38.5t4.5 -41.5q37 -68 93 -116q16 -13 38.5 -11t36.5 17l12 11l22 86l-3 4q-44 44 -89 117q-11 18 -28 20t-32 -12z",
"warning-sign": "M-90 100l642 1066q20 31 48 28.5t48 -35.5l642 -1056q21 -32 7.5 -67.5t-50.5 -35.5h-1294q-37 0 -50.5 34t7.5 66zM155 200h345v75q0 10 7.5 17.5t17.5 7.5h150q10 0 17.5 -7.5t7.5 -17.5v-75h345l-445 723zM496 700h208q20 0 32 -14.5t8 -34.5l-58 -252 q-4 -20 -21.5 -34.5t-37.5 -14.5h-54q-20 0 -37.5 14.5t-21.5 34.5l-58 252q-4 20 8 34.5t32 14.5z",
"shopping-cart": "M56 1200h94q17 0 31 -11t18 -27l38 -162h896q24 0 39 -18.5t10 -42.5l-100 -475q-5 -21 -27 -42.5t-55 -21.5h-633l48 -200h535q21 0 35.5 -14.5t14.5 -35.5t-14.5 -35.5t-35.5 -14.5h-50v-50q0 -21 -14.5 -35.5t-35.5 -14.5t-35.5 14.5t-14.5 35.5v50h-300v-50 q0 -21 -14.5 -35.5t-35.5 -14.5t-35.5 14.5t-14.5 35.5v50h-31q-18 0 -32.5 10t-20.5 19l-5 10l-201 961h-54q-20 0 -35 14.5t-15 35.5t15 35.5t35 14.5z",
"folder-close": "M1200 1000v-100h-1200v100h200q0 41 29.5 70.5t70.5 29.5h300q41 0 70.5 -29.5t29.5 -70.5h500zM0 800h1200v-800h-1200v800z",
"folder-open": "M200 800l-200 -400v600h200q0 41 29.5 70.5t70.5 29.5h300q42 0 71 -29.5t29 -70.5h500v-200h-1000zM1500 700l-300 -700h-1200l300 700h1200z",
"resize-vertical": "M635 1184l230 -249q14 -14 10 -24.5t-25 -10.5h-150v-601h150q21 0 25 -10.5t-10 -24.5l-230 -249q-14 -15 -35 -15t-35 15l-230 249q-14 14 -10 24.5t25 10.5h150v601h-150q-21 0 -25 10.5t10 24.5l230 249q14 15 35 15t35 -15z",
"resize-horizontal": "M936 864l249 -229q14 -15 14 -35.5t-14 -35.5l-249 -229q-15 -15 -25.5 -10.5t-10.5 24.5v151h-600v-151q0 -20 -10.5 -24.5t-25.5 10.5l-249 229q-14 15 -14 35.5t14 35.5l249 229q15 15 25.5 10.5t10.5 -25.5v-149h600v149q0 21 10.5 25.5t25.5 -10.5z",
"hdd": "M1169 400l-172 732q-5 23 -23 45.5t-38 22.5h-672q-20 0 -38 -20t-23 -41l-172 -739h1138zM1100 300h-1000q-41 0 -70.5 -29.5t-29.5 -70.5v-100q0 -41 29.5 -70.5t70.5 -29.5h1000q41 0 70.5 29.5t29.5 70.5v100q0 41 -29.5 70.5t-70.5 29.5zM800 100v100h100v-100h-100 zM1000 100v100h100v-100h-100z",
"bell": "M553 1200h94q20 0 29 -10.5t3 -29.5l-18 -37q83 -19 144 -82.5t76 -140.5l63 -327l118 -173h17q19 0 33 -14.5t14 -35t-13 -40.5t-31 -27q-8 -4 -23 -9.5t-65 -19.5t-103 -25t-132.5 -20t-158.5 -9q-57 0 -115 5t-104 12t-88.5 15.5t-73.5 17.5t-54.5 16t-35.5 12l-11 4 q-18 8 -31 28t-13 40.5t14 35t33 14.5h17l118 173l63 327q15 77 76 140t144 83l-18 32q-6 19 3.5 32t28.5 13zM498 110q50 -6 102 -6q53 0 102 6q-12 -49 -39.5 -79.5t-62.5 -30.5t-63 30.5t-39 79.5z",
"certificate": "M800 946l224 78l-78 -224l234 -45l-180 -155l180 -155l-234 -45l78 -224l-224 78l-45 -234l-155 180l-155 -180l-45 234l-224 -78l78 224l-234 45l180 155l-180 155l234 45l-78 224l224 -78l45 234l155 -180l155 180z",
"thumbs-up": "M650 1200h50q40 0 70 -40.5t30 -84.5v-150l-28 -125h328q40 0 70 -40.5t30 -84.5v-100q0 -45 -29 -74l-238 -344q-16 -24 -38 -40.5t-45 -16.5h-250q-7 0 -42 25t-66 50l-31 25h-61q-45 0 -72.5 18t-27.5 57v400q0 36 20 63l145 196l96 198q13 28 37.5 48t51.5 20z M650 1100l-100 -212l-150 -213v-375h100l136 -100h214l250 375v125h-450l50 225v175h-50zM50 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500q0 21 14.5 35.5t35.5 14.5z",
"thumbs-down": "M600 1100h250q23 0 45 -16.5t38 -40.5l238 -344q29 -29 29 -74v-100q0 -44 -30 -84.5t-70 -40.5h-328q28 -118 28 -125v-150q0 -44 -30 -84.5t-70 -40.5h-50q-27 0 -51.5 20t-37.5 48l-96 198l-145 196q-20 27 -20 63v400q0 39 27.5 57t72.5 18h61q124 100 139 100z M50 1000h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500q0 21 14.5 35.5t35.5 14.5zM636 1000l-136 -100h-100v-375l150 -213l100 -212h50v175l-50 225h450v125l-250 375h-214z",
"hand-right": "M356 873l363 230q31 16 53 -6l110 -112q13 -13 13.5 -32t-11.5 -34l-84 -121h302q84 0 138 -38t54 -110t-55 -111t-139 -39h-106l-131 -339q-6 -21 -19.5 -41t-28.5 -20h-342q-7 0 -90 81t-83 94v525q0 17 14 35.5t28 28.5zM400 792v-503l100 -89h293l131 339 q6 21 19.5 41t28.5 20h203q21 0 30.5 25t0.5 50t-31 25h-456h-7h-6h-5.5t-6 0.5t-5 1.5t-5 2t-4 2.5t-4 4t-2.5 4.5q-12 25 5 47l146 183l-86 83zM50 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5v500 q0 21 14.5 35.5t35.5 14.5z",
"hand-left": "M475 1103l366 -230q2 -1 6 -3.5t14 -10.5t18 -16.5t14.5 -20t6.5 -22.5v-525q0 -13 -86 -94t-93 -81h-342q-15 0 -28.5 20t-19.5 41l-131 339h-106q-85 0 -139.5 39t-54.5 111t54 110t138 38h302l-85 121q-11 15 -10.5 34t13.5 32l110 112q22 22 53 6zM370 945l146 -183 q17 -22 5 -47q-2 -2 -3.5 -4.5t-4 -4t-4 -2.5t-5 -2t-5 -1.5t-6 -0.5h-6h-6.5h-6h-475v-100h221q15 0 29 -20t20 -41l130 -339h294l106 89v503l-342 236zM1050 800h100q21 0 35.5 -14.5t14.5 -35.5v-500q0 -21 -14.5 -35.5t-35.5 -14.5h-100q-21 0 -35.5 14.5t-14.5 35.5 v500q0 21 14.5 35.5t35.5 14.5z",
"hand-up": "M550 1294q72 0 111 -55t39 -139v-106l339 -131q21 -6 41 -19.5t20 -28.5v-342q0 -7 -81 -90t-94 -83h-525q-17 0 -35.5 14t-28.5 28l-9 14l-230 363q-16 31 6 53l112 110q13 13 32 13.5t34 -11.5l121 -84v302q0 84 38 138t110 54zM600 972v203q0 21 -25 30.5t-50 0.5 t-25 -31v-456v-7v-6v-5.5t-0.5 -6t-1.5 -5t-2 -5t-2.5 -4t-4 -4t-4.5 -2.5q-25 -12 -47 5l-183 146l-83 -86l236 -339h503l89 100v293l-339 131q-21 6 -41 19.5t-20 28.5zM450 200h500q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-500 q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5z",
"hand-down": "M350 1100h500q21 0 35.5 14.5t14.5 35.5v100q0 21 -14.5 35.5t-35.5 14.5h-500q-21 0 -35.5 -14.5t-14.5 -35.5v-100q0 -21 14.5 -35.5t35.5 -14.5zM600 306v-106q0 -84 -39 -139t-111 -55t-110 54t-38 138v302l-121 -84q-15 -12 -34 -11.5t-32 13.5l-112 110 q-22 22 -6 53l230 363q1 2 3.5 6t10.5 13.5t16.5 17t20 13.5t22.5 6h525q13 0 94 -83t81 -90v-342q0 -15 -20 -28.5t-41 -19.5zM308 900l-236 -339l83 -86l183 146q22 17 47 5q2 -1 4.5 -2.5t4 -4t2.5 -4t2 -5t1.5 -5t0.5 -6v-5.5v-6v-7v-456q0 -22 25 -31t50 0.5t25 30.5 v203q0 15 20 28.5t41 19.5l339 131v293l-89 100h-503z",
"circle-arrow-right": "M600 1178q118 0 225 -45.5t184.5 -123t123 -184.5t45.5 -225t-45.5 -225t-123 -184.5t-184.5 -123t-225 -45.5t-225 45.5t-184.5 123t-123 184.5t-45.5 225t45.5 225t123 184.5t184.5 123t225 45.5zM914 632l-275 223q-16 13 -27.5 8t-11.5 -26v-137h-275 q-10 0 -17.5 -7.5t-7.5 -17.5v-150q0 -10 7.5 -17.5t17.5 -7.5h275v-137q0 -21 11.5 -26t27.5 8l275 223q16 13 16 32t-16 32z",
"circle-arrow-left": "M600 1178q118 0 225 -45.5t184.5 -123t123 -184.5t45.5 -225t-45.5 -225t-123 -184.5t-184.5 -123t-225 -45.5t-225 45.5t-184.5 123t-123 184.5t-45.5 225t45.5 225t123 184.5t184.5 123t225 45.5zM561 855l-275 -223q-16 -13 -16 -32t16 -32l275 -223q16 -13 27.5 -8 t11.5 26v137h275q10 0 17.5 7.5t7.5 17.5v150q0 10 -7.5 17.5t-17.5 7.5h-275v137q0 21 -11.5 26t-27.5 -8z",
"circle-arrow-up": "M600 1178q118 0 225 -45.5t184.5 -123t123 -184.5t45.5 -225t-45.5 -225t-123 -184.5t-184.5 -123t-225 -45.5t-225 45.5t-184.5 123t-123 184.5t-45.5 225t45.5 225t123 184.5t184.5 123t225 45.5zM855 639l-223 275q-13 16 -32 16t-32 -16l-223 -275q-13 -16 -8 -27.5 t26 -11.5h137v-275q0 -10 7.5 -17.5t17.5 -7.5h150q10 0 17.5 7.5t7.5 17.5v275h137q21 0 26 11.5t-8 27.5z",
"circle-arrow-down": "M600 1178q118 0 225 -45.5t184.5 -123t123 -184.5t45.5 -225t-45.5 -225t-123 -184.5t-184.5 -123t-225 -45.5t-225 45.5t-184.5 123t-123 184.5t-45.5 225t45.5 225t123 184.5t184.5 123t225 45.5zM675 900h-150q-10 0 -17.5 -7.5t-7.5 -17.5v-275h-137q-21 0 -26 -11.5 t8 -27.5l223 -275q13 -16 32 -16t32 16l223 275q13 16 8 27.5t-26 11.5h-137v275q0 10 -7.5 17.5t-17.5 7.5z",
"globe": "M600 1176q116 0 222.5 -46t184 -123.5t123.5 -184t46 -222.5t-46 -222.5t-123.5 -184t-184 -123.5t-222.5 -46t-222.5 46t-184 123.5t-123.5 184t-46 222.5t46 222.5t123.5 184t184 123.5t222.5 46zM627 1101q-15 -12 -36.5 -20.5t-35.5 -12t-43 -8t-39 -6.5 q-15 -3 -45.5 0t-45.5 -2q-20 -7 -51.5 -26.5t-34.5 -34.5q-3 -11 6.5 -22.5t8.5 -18.5q-3 -34 -27.5 -91t-29.5 -79q-9 -34 5 -93t8 -87q0 -9 17 -44.5t16 -59.5q12 0 23 -5t23.5 -15t19.5 -14q16 -8 33 -15t40.5 -15t34.5 -12q21 -9 52.5 -32t60 -38t57.5 -11 q7 -15 -3 -34t-22.5 -40t-9.5 -38q13 -21 23 -34.5t27.5 -27.5t36.5 -18q0 -7 -3.5 -16t-3.5 -14t5 -17q104 -2 221 112q30 29 46.5 47t34.5 49t21 63q-13 8 -37 8.5t-36 7.5q-15 7 -49.5 15t-51.5 19q-18 0 -41 -0.5t-43 -1.5t-42 -6.5t-38 -16.5q-51 -35 -66 -12 q-4 1 -3.5 25.5t0.5 25.5q-6 13 -26.5 17.5t-24.5 6.5q1 15 -0.5 30.5t-7 28t-18.5 11.5t-31 -21q-23 -25 -42 4q-19 28 -8 58q6 16 22 22q6 -1 26 -1.5t33.5 -4t19.5 -13.5q7 -12 18 -24t21.5 -20.5t20 -15t15.5 -10.5l5 -3q2 12 7.5 30.5t8 34.5t-0.5 32q-3 18 3.5 29 t18 22.5t15.5 24.5q6 14 10.5 35t8 31t15.5 22.5t34 22.5q-6 18 10 36q8 0 24 -1.5t24.5 -1.5t20 4.5t20.5 15.5q-10 23 -31 42.5t-37.5 29.5t-49 27t-43.5 23q0 1 2 8t3 11.5t1.5 10.5t-1 9.5t-4.5 4.5q31 -13 58.5 -14.5t38.5 2.5l12 5q5 28 -9.5 46t-36.5 24t-50 15 t-41 20q-18 -4 -37 0zM613 994q0 -17 8 -42t17 -45t9 -23q-8 1 -39.5 5.5t-52.5 10t-37 16.5q3 11 16 29.5t16 25.5q10 -10 19 -10t14 6t13.5 14.5t16.5 12.5z",
"wrench": "M756 1157q164 92 306 -9l-259 -138l145 -232l251 126q6 -89 -34 -156.5t-117 -110.5q-60 -34 -127 -39.5t-126 16.5l-596 -596q-15 -16 -36.5 -16t-36.5 16l-111 110q-15 15 -15 36.5t15 37.5l600 599q-34 101 5.5 201.5t135.5 154.5z",
"tasks": "M100 1196h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 1096h-200v-100h200v100zM100 796h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000 q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 696h-500v-100h500v100zM100 396h1000q41 0 70.5 -29.5t29.5 -70.5v-100q0 -41 -29.5 -70.5t-70.5 -29.5h-1000q-41 0 -70.5 29.5t-29.5 70.5v100q0 41 29.5 70.5t70.5 29.5zM1100 296h-300v-100h300v100z ",
"filter": "M150 1200h900q21 0 35.5 -14.5t14.5 -35.5t-14.5 -35.5t-35.5 -14.5h-900q-21 0 -35.5 14.5t-14.5 35.5t14.5 35.5t35.5 14.5zM700 500v-300l-200 -200v500l-350 500h900z",
"fullscreen": "M50 1200h300q21 0 25 -10.5t-10 -24.5l-94 -94l199 -199q7 -8 7 -18t-7 -18l-106 -106q-8 -7 -18 -7t-18 7l-199 199l-94 -94q-14 -14 -24.5 -10t-10.5 25v300q0 21 14.5 35.5t35.5 14.5zM850 1200h300q21 0 35.5 -14.5t14.5 -35.5v-300q0 -21 -10.5 -25t-24.5 10l-94 94 l-199 -199q-8 -7 -18 -7t-18 7l-106 106q-7 8 -7 18t7 18l199 199l-94 94q-14 14 -10 24.5t25 10.5zM364 470l106 -106q7 -8 7 -18t-7 -18l-199 -199l94 -94q14 -14 10 -24.5t-25 -10.5h-300q-21 0 -35.5 14.5t-14.5 35.5v300q0 21 10.5 25t24.5 -10l94 -94l199 199 q8 7 18 7t18 -7zM1071 271l94 94q14 14 24.5 10t10.5 -25v-300q0 -21 -14.5 -35.5t-35.5 -14.5h-300q-21 0 -25 10.5t10 24.5l94 94l-199 199q-7 8 -7 18t7 18l106 106q8 7 18 7t18 -7z",
"dashboard": "M596 1192q121 0 231.5 -47.5t190 -127t127 -190t47.5 -231.5t-47.5 -231.5t-127 -190.5t-190 -127t-231.5 -47t-231.5 47t-190.5 127t-127 190.5t-47 231.5t47 231.5t127 190t190.5 127t231.5 47.5zM596 1010q-112 0 -207.5 -55.5t-151 -151t-55.5 -207.5t55.5 -207.5 t151 -151t207.5 -55.5t207.5 55.5t151 151t55.5 207.5t-55.5 207.5t-151 151t-207.5 55.5zM454.5 905q22.5 0 38.5 -16t16 -38.5t-16 -39t-38.5 -16.5t-38.5 16.5t-16 39t16 38.5t38.5 16zM754.5 905q22.5 0 38.5 -16t16 -38.5t-16 -39t-38 -16.5q-14 0 -29 10l-55 -145 q17 -23 17 -51q0 -36 -25.5 -61.5t-61.5 -25.5t-61.5 25.5t-25.5 61.5q0 32 20.5 56.5t51.5 29.5l122 126l1 1q-9 14 -9 28q0 23 16 39t38.5 16zM345.5 709q22.5 0 38.5 -16t16 -38.5t-16 -38.5t-38.5 -16t-38.5 16t-16 38.5t16 38.5t38.5 16zM854.5 709q22.5 0 38.5 -16 t16 -38.5t-16 -38.5t-38.5 -16t-38.5 16t-16 38.5t16 38.5t38.5 16z",
"paperclip": "M546 173l469 470q91 91 99 192q7 98 -52 175.5t-154 94.5q-22 4 -47 4q-34 0 -66.5 -10t-56.5 -23t-55.5 -38t-48 -41.5t-48.5 -47.5q-376 -375 -391 -390q-30 -27 -45 -41.5t-37.5 -41t-32 -46.5t-16 -47.5t-1.5 -56.5q9 -62 53.5 -95t99.5 -33q74 0 125 51l548 548 q36 36 20 75q-7 16 -21.5 26t-32.5 10q-26 0 -50 -23q-13 -12 -39 -38l-341 -338q-15 -15 -35.5 -15.5t-34.5 13.5t-14 34.5t14 34.5q327 333 361 367q35 35 67.5 51.5t78.5 16.5q14 0 29 -1q44 -8 74.5 -35.5t43.5 -68.5q14 -47 2 -96.5t-47 -84.5q-12 -11 -32 -32 t-79.5 -81t-114.5 -115t-124.5 -123.5t-123 -119.5t-96.5 -89t-57 -45q-56 -27 -120 -27q-70 0 -129 32t-93 89q-48 78 -35 173t81 163l511 511q71 72 111 96q91 55 198 55q80 0 152 -33q78 -36 129.5 -103t66.5 -154q17 -93 -11 -183.5t-94 -156.5l-482 -476 q-15 -15 -36 -16t-37 14t-17.5 34t14.5 35z",
"heart-empty": "M649 949q48 68 109.5 104t121.5 38.5t118.5 -20t102.5 -64t71 -100.5t27 -123q0 -57 -33.5 -117.5t-94 -124.5t-126.5 -127.5t-150 -152.5t-146 -174q-62 85 -145.5 174t-150 152.5t-126.5 127.5t-93.5 124.5t-33.5 117.5q0 64 28 123t73 100.5t104 64t119 20 t120.5 -38.5t104.5 -104zM896 972q-33 0 -64.5 -19t-56.5 -46t-47.5 -53.5t-43.5 -45.5t-37.5 -19t-36 19t-40 45.5t-43 53.5t-54 46t-65.5 19q-67 0 -122.5 -55.5t-55.5 -132.5q0 -23 13.5 -51t46 -65t57.5 -63t76 -75l22 -22q15 -14 44 -44t50.5 -51t46 -44t41 -35t23 -12 t23.5 12t42.5 36t46 44t52.5 52t44 43q4 4 12 13q43 41 63.5 62t52 55t46 55t26 46t11.5 44q0 79 -53 133.5t-120 54.5z",
"pushpin": "M902 1185l283 -282q15 -15 15 -36t-14.5 -35.5t-35.5 -14.5t-35 15l-36 35l-279 -267v-300l-212 210l-308 -307l-280 -203l203 280l307 308l-210 212h300l267 279l-35 36q-15 14 -15 35t14.5 35.5t35.5 14.5t35 -15z",
"sort": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM935 1184l230 -249q14 -14 10 -24.5t-25 -10.5h-150v-900h-200v900h-150q-21 0 -25 10.5t10 24.5l230 249q14 15 35 15t35 -15z",
"sort-by-alphabet": "M1000 700h-100v100h-100v-100h-100v500h300v-500zM400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM801 1100v-200h100v200h-100zM1000 350l-200 -250h200v-100h-300v150l200 250h-200v100h300v-150z ",
"sort-by-alphabet-alt": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM1000 1050l-200 -250h200v-100h-300v150l200 250h-200v100h300v-150zM1000 0h-100v100h-100v-100h-100v500h300v-500zM801 400v-200h100v200h-100z ",
"sort-by-order": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM1000 700h-100v400h-100v100h200v-500zM1100 0h-100v100h-200v400h300v-500zM901 400v-200h100v200h-100z",
"sort-by-order-alt": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM1100 700h-100v100h-200v400h300v-500zM901 1100v-200h100v200h-100zM1000 0h-100v400h-100v100h200v-500z",
"sort-by-attributes": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM900 1000h-200v200h200v-200zM1000 700h-300v200h300v-200zM1100 400h-400v200h400v-200zM1200 100h-500v200h500v-200z",
"sort-by-attributes-alt": "M400 300h150q21 0 25 -11t-10 -25l-230 -250q-14 -15 -35 -15t-35 15l-230 250q-14 14 -10 25t25 11h150v900h200v-900zM1200 1000h-500v200h500v-200zM1100 700h-400v200h400v-200zM1000 400h-300v200h300v-200zM900 100h-200v200h200v-200z",
"login": "M550 1100h400q165 0 257.5 -92.5t92.5 -257.5v-400q0 -165 -92.5 -257.5t-257.5 -92.5h-400q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h450q41 0 70.5 29.5t29.5 70.5v500q0 41 -29.5 70.5t-70.5 29.5h-450q-21 0 -35.5 14.5t-14.5 35.5v100 q0 21 14.5 35.5t35.5 14.5zM338 867l324 -284q16 -14 16 -33t-16 -33l-324 -284q-16 -14 -27 -9t-11 26v150h-250q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h250v150q0 21 11 26t27 -9z",
"flash": "M793 1182l9 -9q8 -10 5 -27q-3 -11 -79 -225.5t-78 -221.5l300 1q24 0 32.5 -17.5t-5.5 -35.5q-1 0 -133.5 -155t-267 -312.5t-138.5 -162.5q-12 -15 -26 -15h-9l-9 8q-9 11 -4 32q2 9 42 123.5t79 224.5l39 110h-302q-23 0 -31 19q-10 21 6 41q75 86 209.5 237.5 t228 257t98.5 111.5q9 16 25 16h9z",
"log-out": "M350 1100h400q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-450q-41 0 -70.5 -29.5t-29.5 -70.5v-500q0 -41 29.5 -70.5t70.5 -29.5h450q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400 q0 165 92.5 257.5t257.5 92.5zM938 867l324 -284q16 -14 16 -33t-16 -33l-324 -284q-16 -14 -27 -9t-11 26v150h-250q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5h250v150q0 21 11 26t27 -9z",
"new window": "M750 1200h400q21 0 35.5 -14.5t14.5 -35.5v-400q0 -21 -10.5 -25t-24.5 10l-109 109l-312 -312q-15 -15 -35.5 -15t-35.5 15l-141 141q-15 15 -15 35.5t15 35.5l312 312l-109 109q-14 14 -10 24.5t25 10.5zM456 900h-156q-41 0 -70.5 -29.5t-29.5 -70.5v-500 q0 -41 29.5 -70.5t70.5 -29.5h500q41 0 70.5 29.5t29.5 70.5v148l200 200v-298q0 -165 -93.5 -257.5t-256.5 -92.5h-400q-165 0 -257.5 92.5t-92.5 257.5v400q0 165 92.5 257.5t257.5 92.5h300z",
"record": "M600 1186q119 0 227.5 -46.5t187 -125t125 -187t46.5 -227.5t-46.5 -227.5t-125 -187t-187 -125t-227.5 -46.5t-227.5 46.5t-187 125t-125 187t-46.5 227.5t46.5 227.5t125 187t187 125t227.5 46.5zM600 1022q-115 0 -212 -56.5t-153.5 -153.5t-56.5 -212t56.5 -212 t153.5 -153.5t212 -56.5t212 56.5t153.5 153.5t56.5 212t-56.5 212t-153.5 153.5t-212 56.5zM600 794q80 0 137 -57t57 -137t-57 -137t-137 -57t-137 57t-57 137t57 137t137 57z",
"save": "M450 1200h200q21 0 35.5 -14.5t14.5 -35.5v-350h245q20 0 25 -11t-9 -26l-383 -426q-14 -15 -33.5 -15t-32.5 15l-379 426q-13 15 -8.5 26t25.5 11h250v350q0 21 14.5 35.5t35.5 14.5zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z",
"open": "M583 1182l378 -435q14 -15 9 -31t-26 -16h-244v-250q0 -20 -17 -35t-39 -15h-200q-20 0 -32 14.5t-12 35.5v250h-250q-20 0 -25.5 16.5t8.5 31.5l383 431q14 16 33.5 17t33.5 -14zM50 300h1000q21 0 35.5 -14.5t14.5 -35.5v-250h-1100v250q0 21 14.5 35.5t35.5 14.5z M900 200v-50h100v50h-100z",
"floppy-disk": "M1100 1000v-850q0 -21 -14.5 -35.5t-35.5 -14.5h-150v400h-700v-400h-150q-21 0 -35.5 14.5t-14.5 35.5v1000q0 20 14.5 35t35.5 15h250v-300h500v300h100zM700 1000h-100v200h100v-200z",
"floppy-saved": "M1100 1000l-2 -149l-299 -299l-95 95q-9 9 -21.5 9t-21.5 -9l-149 -147h-312v-400h-150q-21 0 -35.5 14.5t-14.5 35.5v1000q0 20 14.5 35t35.5 15h250v-300h500v300h100zM700 1000h-100v200h100v-200zM1132 638l106 -106q7 -7 7 -17.5t-7 -17.5l-420 -421q-8 -7 -18 -7 t-18 7l-202 203q-8 7 -8 17.5t8 17.5l106 106q7 8 17.5 8t17.5 -8l79 -79l297 297q7 7 17.5 7t17.5 -7z",
"floppy-remove": "M1100 1000v-269l-103 -103l-134 134q-15 15 -33.5 16.5t-34.5 -12.5l-266 -266h-329v-400h-150q-21 0 -35.5 14.5t-14.5 35.5v1000q0 20 14.5 35t35.5 15h250v-300h500v300h100zM700 1000h-100v200h100v-200zM1202 572l70 -70q15 -15 15 -35.5t-15 -35.5l-131 -131 l131 -131q15 -15 15 -35.5t-15 -35.5l-70 -70q-15 -15 -35.5 -15t-35.5 15l-131 131l-131 -131q-15 -15 -35.5 -15t-35.5 15l-70 70q-15 15 -15 35.5t15 35.5l131 131l-131 131q-15 15 -15 35.5t15 35.5l70 70q15 15 35.5 15t35.5 -15l131 -131l131 131q15 15 35.5 15 t35.5 -15z",
"floppy-save": "M1100 1000v-300h-350q-21 0 -35.5 -14.5t-14.5 -35.5v-150h-500v-400h-150q-21 0 -35.5 14.5t-14.5 35.5v1000q0 20 14.5 35t35.5 15h250v-300h500v300h100zM700 1000h-100v200h100v-200zM850 600h100q21 0 35.5 -14.5t14.5 -35.5v-250h150q21 0 25 -10.5t-10 -24.5 l-230 -230q-14 -14 -35 -14t-35 14l-230 230q-14 14 -10 24.5t25 10.5h150v250q0 21 14.5 35.5t35.5 14.5z",
"floppy-open": "M1100 1000v-400l-165 165q-14 15 -35 15t-35 -15l-263 -265h-402v-400h-150q-21 0 -35.5 14.5t-14.5 35.5v1000q0 20 14.5 35t35.5 15h250v-300h500v300h100zM700 1000h-100v200h100v-200zM935 565l230 -229q14 -15 10 -25.5t-25 -10.5h-150v-250q0 -20 -14.5 -35 t-35.5 -15h-100q-21 0 -35.5 15t-14.5 35v250h-150q-21 0 -25 10.5t10 25.5l230 229q14 15 35 15t35 -15z",
"credit-card": "M50 1100h1100q21 0 35.5 -14.5t14.5 -35.5v-150h-1200v150q0 21 14.5 35.5t35.5 14.5zM1200 800v-550q0 -21 -14.5 -35.5t-35.5 -14.5h-1100q-21 0 -35.5 14.5t-14.5 35.5v550h1200zM100 500v-200h400v200h-400z",
"transfer": "M935 1165l248 -230q14 -14 14 -35t-14 -35l-248 -230q-14 -14 -24.5 -10t-10.5 25v150h-400v200h400v150q0 21 10.5 25t24.5 -10zM200 800h-50q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h50v-200zM400 800h-100v200h100v-200zM18 435l247 230 q14 14 24.5 10t10.5 -25v-150h400v-200h-400v-150q0 -21 -10.5 -25t-24.5 10l-247 230q-15 14 -15 35t15 35zM900 300h-100v200h100v-200zM1000 500h51q20 0 34.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-34.5 -14.5h-51v200z",
"sd-video": "M200 1100h700q124 0 212 -88t88 -212v-500q0 -124 -88 -212t-212 -88h-700q-124 0 -212 88t-88 212v500q0 124 88 212t212 88zM100 900v-700h900v700h-900zM500 700h-200v-100h200v-300h-300v100h200v100h-200v300h300v-100zM900 700v-300l-100 -100h-200v500h200z M700 700v-300h100v300h-100z",
"cloud-download": "M503 1089q110 0 200.5 -59.5t134.5 -156.5q44 14 90 14q120 0 205 -86.5t85 -207t-85 -207t-205 -86.5h-128v250q0 21 -14.5 35.5t-35.5 14.5h-300q-21 0 -35.5 -14.5t-14.5 -35.5v-250h-222q-80 0 -136 57.5t-56 136.5q0 69 43 122.5t108 67.5q-2 19 -2 37q0 100 49 185 t134 134t185 49zM525 500h150q10 0 17.5 -7.5t7.5 -17.5v-275h137q21 0 26 -11.5t-8 -27.5l-223 -244q-13 -16 -32 -16t-32 16l-223 244q-13 16 -8 27.5t26 11.5h137v275q0 10 7.5 17.5t17.5 7.5z",
"cloud-upload": "M502 1089q110 0 201 -59.5t135 -156.5q43 15 89 15q121 0 206 -86.5t86 -206.5q0 -99 -60 -181t-150 -110l-378 360q-13 16 -31.5 16t-31.5 -16l-381 -365h-9q-79 0 -135.5 57.5t-56.5 136.5q0 69 43 122.5t108 67.5q-2 19 -2 38q0 100 49 184.5t133.5 134t184.5 49.5z M632 467l223 -228q13 -16 8 -27.5t-26 -11.5h-137v-275q0 -10 -7.5 -17.5t-17.5 -7.5h-150q-10 0 -17.5 7.5t-7.5 17.5v275h-137q-21 0 -26 11.5t8 27.5q199 204 223 228q19 19 31.5 19t32.5 -19z",
"cd": "M1010 1010q111 -111 150.5 -260.5t0 -299t-150.5 -260.5q-83 -83 -191.5 -126.5t-218.5 -43.5t-218.5 43.5t-191.5 126.5q-111 111 -150.5 260.5t0 299t150.5 260.5q83 83 191.5 126.5t218.5 43.5t218.5 -43.5t191.5 -126.5zM476 1065q-4 0 -8 -1q-121 -34 -209.5 -122.5 t-122.5 -209.5q-4 -12 2.5 -23t18.5 -14l36 -9q3 -1 7 -1q23 0 29 22q27 96 98 166q70 71 166 98q11 3 17.5 13.5t3.5 22.5l-9 35q-3 13 -14 19q-7 4 -15 4zM512 920q-4 0 -9 -2q-80 -24 -138.5 -82.5t-82.5 -138.5q-4 -13 2 -24t19 -14l34 -9q4 -1 8 -1q22 0 28 21 q18 58 58.5 98.5t97.5 58.5q12 3 18 13.5t3 21.5l-9 35q-3 12 -14 19q-7 4 -15 4zM719.5 719.5q-49.5 49.5 -119.5 49.5t-119.5 -49.5t-49.5 -119.5t49.5 -119.5t119.5 -49.5t119.5 49.5t49.5 119.5t-49.5 119.5zM855 551q-22 0 -28 -21q-18 -58 -58.5 -98.5t-98.5 -57.5 q-11 -4 -17 -14.5t-3 -21.5l9 -35q3 -12 14 -19q7 -4 15 -4q4 0 9 2q80 24 138.5 82.5t82.5 138.5q4 13 -2.5 24t-18.5 14l-34 9q-4 1 -8 1zM1000 515q-23 0 -29 -22q-27 -96 -98 -166q-70 -71 -166 -98q-11 -3 -17.5 -13.5t-3.5 -22.5l9 -35q3 -13 14 -19q7 -4 15 -4 q4 0 8 1q121 34 209.5 122.5t122.5 209.5q4 12 -2.5 23t-18.5 14l-36 9q-3 1 -7 1z",
"save-file": "M700 800h300v-380h-180v200h-340v-200h-380v755q0 10 7.5 17.5t17.5 7.5h575v-400zM1000 900h-200v200zM700 300h162l-212 -212l-212 212h162v200h100v-200zM520 0h-395q-10 0 -17.5 7.5t-7.5 17.5v395zM1000 220v-195q0 -10 -7.5 -17.5t-17.5 -7.5h-195z",
"open-file": "M700 800h300v-520l-350 350l-550 -550v1095q0 10 7.5 17.5t17.5 7.5h575v-400zM1000 900h-200v200zM862 200h-162v-200h-100v200h-162l212 212zM480 0h-355q-10 0 -17.5 7.5t-7.5 17.5v55h380v-80zM1000 80v-55q0 -10 -7.5 -17.5t-17.5 -7.5h-155v80h180z",
"level-up": "M1162 800h-162v-200h100l100 -100h-300v300h-162l212 212zM200 800h200q27 0 40 -2t29.5 -10.5t23.5 -30t7 -57.5h300v-100h-600l-200 -350v450h100q0 36 7 57.5t23.5 30t29.5 10.5t40 2zM800 400h240l-240 -400h-800l300 500h500v-100z",
"copy": "M650 1100h100q21 0 35.5 -14.5t14.5 -35.5v-50h50q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-300q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h50v50q0 21 14.5 35.5t35.5 14.5zM1000 850v150q41 0 70.5 -29.5t29.5 -70.5v-800 q0 -41 -29.5 -70.5t-70.5 -29.5h-600q-1 0 -20 4l246 246l-326 326v324q0 41 29.5 70.5t70.5 29.5v-150q0 -62 44 -106t106 -44h300q62 0 106 44t44 106zM412 250l-212 -212v162h-200v100h200v162z",
"paste": "M450 1100h100q21 0 35.5 -14.5t14.5 -35.5v-50h50q21 0 35.5 -14.5t14.5 -35.5v-100q0 -21 -14.5 -35.5t-35.5 -14.5h-300q-21 0 -35.5 14.5t-14.5 35.5v100q0 21 14.5 35.5t35.5 14.5h50v50q0 21 14.5 35.5t35.5 14.5zM800 850v150q41 0 70.5 -29.5t29.5 -70.5v-500 h-200v-300h200q0 -36 -7 -57.5t-23.5 -30t-29.5 -10.5t-40 -2h-600q-41 0 -70.5 29.5t-29.5 70.5v800q0 41 29.5 70.5t70.5 29.5v-150q0 -62 44 -106t106 -44h300q62 0 106 44t44 106zM1212 250l-212 -212v162h-200v100h200v162z",
"alert": "M658 1197l637 -1104q23 -38 7 -65.5t-60 -27.5h-1276q-44 0 -60 27.5t7 65.5l637 1104q22 39 54 39t54 -39zM704 800h-208q-20 0 -32 -14.5t-8 -34.5l58 -302q4 -20 21.5 -34.5t37.5 -14.5h54q20 0 37.5 14.5t21.5 34.5l58 302q4 20 -8 34.5t-32 14.5zM500 300v-100h200 v100h-200z",
"duplicate": "M900 800h300v-575q0 -10 -7.5 -17.5t-17.5 -7.5h-375v591l-300 300v84q0 10 7.5 17.5t17.5 7.5h375v-400zM1200 900h-200v200zM400 600h300v-575q0 -10 -7.5 -17.5t-17.5 -7.5h-650q-10 0 -17.5 7.5t-7.5 17.5v950q0 10 7.5 17.5t17.5 7.5h375v-400zM700 700h-200v200z ",
"scissors": "M641 900l423 247q19 8 42 2.5t37 -21.5l32 -38q14 -15 12.5 -36t-17.5 -34l-139 -120h-390zM50 1100h106q67 0 103 -17t66 -71l102 -212h823q21 0 35.5 -14.5t14.5 -35.5v-50q0 -21 -14 -40t-33 -26l-737 -132q-23 -4 -40 6t-26 25q-42 67 -100 67h-300q-62 0 -106 44 t-44 106v200q0 62 44 106t106 44zM173 928h-80q-19 0 -28 -14t-9 -35v-56q0 -51 42 -51h134q16 0 21.5 8t5.5 24q0 11 -16 45t-27 51q-18 28 -43 28zM550 727q-32 0 -54.5 -22.5t-22.5 -54.5t22.5 -54.5t54.5 -22.5t54.5 22.5t22.5 54.5t-22.5 54.5t-54.5 22.5zM130 389 l152 130q18 19 34 24t31 -3.5t24.5 -17.5t25.5 -28q28 -35 50.5 -51t48.5 -13l63 5l48 -179q13 -61 -3.5 -97.5t-67.5 -79.5l-80 -69q-47 -40 -109 -35.5t-103 51.5l-130 151q-40 47 -35.5 109.5t51.5 102.5zM380 377l-102 -88q-31 -27 2 -65l37 -43q13 -15 27.5 -19.5 t31.5 6.5l61 53q19 16 14 49q-2 20 -12 56t-17 45q-11 12 -19 14t-23 -8z",
"scale": "M212 1198h780q86 0 147 -61t61 -147v-416q0 -51 -18 -142.5t-36 -157.5l-18 -66q-29 -87 -93.5 -146.5t-146.5 -59.5h-572q-82 0 -147 59t-93 147q-8 28 -20 73t-32 143.5t-20 149.5v416q0 86 61 147t147 61zM600 1045q-70 0 -132.5 -11.5t-105.5 -30.5t-78.5 -41.5 t-57 -45t-36 -41t-20.5 -30.5l-6 -12l156 -243h560l156 243q-2 5 -6 12.5t-20 29.5t-36.5 42t-57 44.5t-79 42t-105 29.5t-132.5 12zM762 703h-157l195 261z",
"ice-lolly": "M475 1300h150q103 0 189 -86t86 -189v-500q0 -41 -42 -83t-83 -42h-450q-41 0 -83 42t-42 83v500q0 103 86 189t189 86zM700 300v-225q0 -21 -27 -48t-48 -27h-150q-21 0 -48 27t-27 48v225h300z",
"triangle-right": "M865 565l-494 -494q-23 -23 -41 -23q-14 0 -22 13.5t-8 38.5v1000q0 25 8 38.5t22 13.5q18 0 41 -23l494 -494q14 -14 14 -35t-14 -35z",
"triangle-left": "M335 635l494 494q29 29 50 20.5t21 -49.5v-1000q0 -41 -21 -49.5t-50 20.5l-494 494q-14 14 -14 35t14 35z",
"triangle-bottom": "M100 900h1000q41 0 49.5 -21t-20.5 -50l-494 -494q-14 -14 -35 -14t-35 14l-494 494q-29 29 -20.5 50t49.5 21z",
"triangle-top": "M635 865l494 -494q29 -29 20.5 -50t-49.5 -21h-1000q-41 0 -49.5 21t20.5 50l494 494q14 14 35 14t35 -14z",
"plus": "M450 1100h200q21 0 35.5 -14.5t14.5 -35.5v-350h350q21 0 35.5 -14.5t14.5 -35.5v-200q0 -21 -14.5 -35.5t-35.5 -14.5h-350v-350q0 -21 -14.5 -35.5t-35.5 -14.5h-200q-21 0 -35.5 14.5t-14.5 35.5v350h-350q-21 0 -35.5 14.5t-14.5 35.5v200q0 21 14.5 35.5t35.5 14.5 h350v350q0 21 14.5 35.5t35.5 14.5z",
};

function get_icon_svg(name, w, h, color) {
var content = "";
if (typeof w == 'undefined') w = "1.3em";
if (typeof h == 'undefined') h = "1.2em";
if (typeof color == 'undefined') color = "currentColor";
var has_error = false;
try {
content = list_icon[name];
} catch (e) {
console.error("Parsing error:", e);
has_error = true;
}
if (has_error) return "";
var icon = "<svg width='" + w + "' height='" + h + "' viewBox='0 0 1300 1200'><g transform='translate(30,1200) scale(1, -1)'><path  fill='" + color + "' d='";
icon += content;
icon += "'></path></g></svg>";
return icon;
}

</script>
<script>
function cameraformataddress() {
var saddress = document.getElementById('camera_webaddress').value;
var saddressl = saddress.trim().toLowerCase();
saddress = saddress.trim();
if (saddress.length > 0) {
if (!(saddressl.indexOf("https://") != -1 || saddressl.indexOf("http://") != -1 || saddressl.indexOf("rtp://") != -1 || saddressl.indexOf("rtps://") != -1 || saddressl.indexOf("rtp://") != -1)) {
saddress = "http://" + saddress;
}
}
document.getElementById('camera_webaddress').value = saddress;
}

function camera_loadframe() {
var saddress = document.getElementById('camera_webaddress').value;
saddress = saddress.trim();
if (saddress.length == 0) {
document.getElementById('camera_frame').src = "";
document.getElementById('camera_frame_display').style.display = "none";
document.getElementById('camera_detach_button').style.display = "none";
} else {
cameraformataddress();
document.getElementById('camera_frame').src = document.getElementById('camera_webaddress').value;
document.getElementById('camera_frame_display').style.display = "block";
document.getElementById('camera_detach_button').style.display = "table-row";
}
}

function camera_OnKeyUp(event) {
if (event.keyCode == 13) {
camera_loadframe();
}
return true;
}


function camera_saveaddress() {
cameraformataddress();
preferenceslist[0].camera_address = HTMLEncode(document.getElementById('camera_webaddress').value);
SavePreferences(true);
}

function camera_detachcam() {
var webaddress = document.getElementById('camera_frame').src;
document.getElementById('camera_frame').src = "";
document.getElementById('camera_frame_display').style.display = "none";
document.getElementById('camera_detach_button').style.display = "none";
window.open(webaddress);
}

function camera_GetAddress() {
if (typeof(preferenceslist[0].camera_address) !== 'undefined') {
document.getElementById('camera_webaddress').value = decode_entitie(preferenceslist[0].camera_address);
} else document.getElementById('camera_webaddress').value = "";
}

</script>
<script>
var setting_configList = [];
var setting_error_msg = "";
var setting_lastindex = -1;
var setting_lastsubindex = -1;
var current_setting_filter = 'network';
var setup_is_done = false;
var do_not_build_settings = false;

function refreshSettings(hide_setting_list) {
if (http_communication_locked) {
document.getElementById('config_status').innerHTML = translate_text_item("Communication locked by another process, retry later.");
return;
}
if (typeof hide_setting_list != 'undefined') do_not_build_settings = hide_setting_list;
else do_not_build_settings = false;
document.getElementById('settings_loader').style.display = "block";
document.getElementById('settings_list_content').style.display = "none";
document.getElementById('settings_status').style.display = "none";
document.getElementById('settings_refresh_btn').style.display = "none";

setting_configList = [];
//endRemoveIf(production)
var url = "/command?plain=" + encodeURIComponent("[ESP400]");
SendGetHttp(url, getESPsettingsSuccess, getESPsettingsfailed)
}

function build_select_flag_for_setting_list(index, subindex) {
var html = "";
var flag =
html += "<select class='form-control' id='setting_" + index + "_" + subindex + "' onchange='setting_checkchange(" + index + "," + subindex + ")' >";
html += "<option value='1'";
var tmp = setting_configList[index].defaultvalue
tmp |= settings_get_flag_value(index, subindex);
if (tmp == setting_configList[index].defaultvalue) html += " selected ";
html += ">";
html += translate_text_item("Disable", true);
html += "</option>\n";
html += "<option value='0'";
var tmp = setting_configList[index].defaultvalue
tmp &= ~(settings_get_flag_value(index, subindex));
if (tmp == setting_configList[index].defaultvalue) html += " selected ";
html += ">";
html += translate_text_item("Enable", true);
html += "</option>\n";
html += "</select>\n";
//console.log("default:" + setting_configList[index].defaultvalue);
//console.log(html);
return html;
}

function build_select_for_setting_list(index, subindex) {
var html = "<select class='form-control input-min wauto' id='setting_" + index + "_" + subindex + "' onchange='setting_checkchange(" + index + "," + subindex + ")' >";
for (var i = 0; i < setting_configList[index].Options.length; i++) {
html += "<option value='" + setting_configList[index].Options[i].id + "'";
if (setting_configList[index].Options[i].id == setting_configList[index].defaultvalue) html += " selected ";
html += ">";
html += translate_text_item(setting_configList[index].Options[i].display, true);
//Ugly workaround for OSX Chrome and Safari
if (browser_is("MacOSX")) html += "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
html += "</option>\n";
}
html += "</select>\n";
//console.log("default:" + setting_configList[index].defaultvalue);
//console.log(html);
return html;
}

function getFWshortnamefromid(value) {
var response = 0;
if (value == 1) response = "repetier4davinci";
else if (value == 5) response = "repetier";
else if (value == 2) response = "marlin";
else if (value == 3) response = "marlinkimbra";
else if (value == 4) response = "smoothieware";
else if (value == 6) response = "grbl";
else response = "???";
return response;
}

function update_UI_setting() {
for (var i = 0; i < setting_configList.length; i++) {
switch (setting_configList[i].pos) {
//EP_TARGET_FW		461
case "461":
target_firmware = getFWshortnamefromid(setting_configList[i].defaultvalue);
update_UI_firmware_target();
init_files_panel(false);
break;
// EP_IS_DIRECT_SD   850
case "850":
direct_sd = (setting_configList[i].defaultvalue == 1) ? true : false;
update_UI_firmware_target();
init_files_panel(false);
break;
case "130":
//set title using hostname
Set_page_title(setting_configList[i].defaultvalue);
break;
}


}
}
//to generate setting editor in setting or setup
function build_control_from_index(index, extra_set_function) {
var i = index;
var content = "<table>";
if (i < setting_configList.length) {
var nbsub = 1;
if (setting_configList[i].type == "F") {
nbsub = setting_configList[i].Options.length;
}
for (var sub_element = 0; sub_element < nbsub; sub_element++) {
if (sub_element > 0) {
content += "<tr><td style='height:10px;'></td></tr>";
}
content += "<tr><td style='vertical-align: middle;'>";
if (setting_configList[i].type == "F") {
content += translate_text_item(setting_configList[i].Options[sub_element].display, true);
content += "</td><td>&nbsp;</td><td>";
}

content += "<div id='status_setting_" + i + "_" + sub_element + "' class='form-group has-feedback' style='margin: auto;'>";
content += "<div class='item-flex-row'>";
content += "<table><tr><td>";
content += "<div class='input-group'>";
content += "<div class='input-group-btn'>";
content += "<button class='btn btn-default btn-svg' onclick='setting_revert_to_default(" + i + "," + sub_element + ")' >";
content += get_icon_svg("repeat");
content += "</button>";
content += "</div>";
content += "<input class='hide_it'></input>";
content += "</div>";
content += "</td><td>";
content += "<div class='input-group'>";
content += "<span class='input-group-addon hide_it' ></span>";
//flag
if (setting_configList[i].type == "F") {
//console.log(setting_configList[i].label + " " + setting_configList[i].type);
//console.log(setting_configList[i].Options.length);
content += build_select_flag_for_setting_list(i, sub_element);

}
//drop list
else if (setting_configList[i].Options.length > 0) {
content += build_select_for_setting_list(i, sub_element);
}
//text
else {
content += "<input id='setting_" + i + "_" + sub_element + "' type='text' class='form-control input-min'  value='" + setting_configList[i].defaultvalue + "' onkeyup='setting_checkchange(" + i + "," + sub_element + ")' >";
}
content += "<span id='icon_setting_" + i + "_" + sub_element + "'class='form-control-feedback ico_feedback'></span>";
content += "<span class='input-group-addon hide_it' ></span>";
content += "</div>";
content += "</td></tr></table>";
content += "<div class='input-group'>";
content += "<input class='hide_it'></input>";
content += "<div class='input-group-btn'>";
content += "<button  id='btn_setting_" + i + "_" + sub_element + "' class='btn btn-default' onclick='settingsetvalue(" + i + "," + sub_element + ");";
if (typeof extra_set_function != 'undefined') {
content += extra_set_function + "(" + i + ");"
}
content += "' translate english_content='Set' >" + translate_text_item("Set") + "</button>";
if (setting_configList[i].pos == EP_STA_SSID) {
content += "<button class='btn btn-default btn-svg' onclick='scanwifidlg(\"" + i + "\",\"" + sub_element + "\")'>";
content += get_icon_svg("search");
content += "</button>";
}
content += "</div>";
content += "</div>";
content += "</div>";
content += "</div>";
content += "</td></tr>";
}
}
content += "</table>";
return content;
}

//get setting UI for specific component instead of parse all
function get_index_from_eeprom_pos(pos) {
for (var i = 0; i < setting_configList.length; i++) {
if (pos == setting_configList[i].pos) {
return i;
}
}
return -1;
}

function build_HTML_setting_list(filter) {
//this to prevent concurent process to update after we clean content
if (do_not_build_settings) return;
var content = "";
current_setting_filter = filter;
document.getElementById(current_setting_filter + "_setting_filter").checked = true;
for (var i = 0; i < setting_configList.length; i++) {
if ((setting_configList[i].F.trim().toLowerCase() == filter) || (filter == "all")) {
content += "<tr>";
content += "<td style='vertical-align:middle'>";
content += translate_text_item(setting_configList[i].label, true);
content += "</td>";
content += "<td style='vertical-align:middle'>";
content += "<table><tr><td>" + build_control_from_index(i) + "</td></tr></table>";
content += "</td>";
content += "</tr>\n";
}
}
if (content.length > 0) document.getElementById('settings_list_data').innerHTML = content;
}

function setting_check_value(value, index, subindex) {
var valid = true;
var entry = setting_configList[index];
//console.log("checking value");
if (entry.type == "F") return valid;
//does it part of a list?
if (entry.Options.length > 0) {
var in_list = false;
for (var i = 0; i < entry.Options.length; i++) {
//console.log("checking *" + entry.Options[i].id + "* and *"+ value + "*" );
if (entry.Options[i].id == value) in_list = true;
}
valid = in_list;
if (!valid) setting_error_msg = " in provided list";
}
//check byte / integer
if (entry.type == "B" || entry.type == "I") {
//cannot be empty
value.trim();
if (value.length == 0) valid = false;
//check minimum?
if (parseInt(entry.min_val) > parseInt(value)) valid = false;
//check maximum?
if (parseInt(entry.max_val) < parseInt(value)) valid = false;
if (!valid) setting_error_msg = " between " + entry.min_val + " and " + entry.max_val;
if (isNaN(value)) valid = false;
} else if (entry.type == "S") {
//check minimum?
if (entry.min_val > value.length) valid = false;
//check maximum?
if (entry.max_val < value.length) valid = false;
if (value == "********") valid = false;
if (!valid) setting_error_msg = " between " + entry.min_val + " char(s) and " + entry.max_val + " char(s) long, and not '********'";
} else if (entry.type == "A") {
//check ip address
var ipformat = /^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/;
if (!value.match(ipformat)) {
valid = false;
setting_error_msg = " a valid IP format (xxx.xxx.xxx.xxx)";
}
}
return valid;
}

function process_settings_answer(response_text) {
var result = true;
try {
var response = JSON.parse(response_text);
if (typeof response.EEPROM == 'undefined') {
result = false;
console.log('No EEPROM');
} else {
//console.log("EEPROM has " + response.EEPROM.length + " entries");
if (response.EEPROM.length > 0) {
var vindex = 0;
for (var i = 0; i < response.EEPROM.length; i++) {
vindex = create_setting_entry(response.EEPROM[i], vindex);

}
if (vindex > 0) {
if (setup_is_done) build_HTML_setting_list(current_setting_filter);
update_UI_setting();
} else result = false;
} else result = false;
}
} catch (e) {
console.error("Parsing error:", e);
result = false;
}
return result;
}

function create_setting_entry(sentry, vindex) {
if (!is_setting_entry(sentry)) return vindex;
var slabel = sentry.H;
var svalue = sentry.V;
var scmd = "[ESP401]P=" + sentry.P + " T=" + sentry.T + " V=";
var options = [];
var min;
var max;
if (typeof sentry.M !== 'undefined') {
min = sentry.M;
} else { //add limit according the type
if (sentry.T == "B") min = -127
else if (sentry.T == "S") min = 0
else if (sentry.T == "A") min = 7
else if (sentry.T == "I") min = 0
}
if (typeof sentry.S !== 'undefined') {
max = sentry.S;
} else { //add limit according the type
if (sentry.T == "B") max = 255;
else if (sentry.T == "S") max = 255;
else if (sentry.T == "A") max = 15;
else if (sentry.T == "I") max = 2147483647;
}
//list possible options if defined
if (typeof sentry.O !== 'undefined') {
for (var i in sentry.O) {
var key = i;
var val = sentry.O[i];
for (var j in val) {
var sub_key = j;
var sub_val = val[j];
sub_val = sub_val.trim();
sub_key = sub_key.trim();
var option = {
id: sub_val,
display: sub_key
};
options.push(option);
//console.log("*" + sub_key + "* and *" + sub_val + "*");
}
}
}
svalue = svalue.trim();
//create entry in list
var config_entry = {
index: vindex,
F: sentry.F,
label: slabel,
defaultvalue: svalue,
cmd: scmd,
Options: options,
min_val: min,
max_val: max,
type: sentry.T,
pos: sentry.P
};
setting_configList.push(config_entry);
vindex++;
return vindex;
}
//check it is valid entry
function is_setting_entry(sline) {
if (typeof sline.T === 'undefined' || typeof sline.V === 'undefined' || typeof sline.P === 'undefined' || typeof sline.H === 'undefined') {
return false
}
return true;
}

function settings_get_flag_value(index, subindex) {
var flag = 0;
if (setting_configList[index].type != "F") return -1;
if (setting_configList[index].Options.length <= subindex) return -1;
flag = parseInt(setting_configList[index].Options[subindex].id);
return flag;
}

function settings_get_flag_description(index, subindex) {
if (setting_configList[index].type != "F") return -1;
if (setting_configList[index].Options.length <= subindex) return -1;
return setting_configList[index].Options[subindex].display;
}

function setting_revert_to_default(index, subindex) {
var sub = 0;
if (typeof subindex != 'undefined') sub = subindex;
if (setting_configList[index].type == "F") {
var flag = settings_get_flag_value(index, subindex);
var enabled = 0;
var tmp = parseInt(setting_configList[index].defaultvalue);
tmp |= flag;
if (tmp == parseInt(setting_configList[index].defaultvalue)) document.getElementById('setting_' + index + "_" + sub).value = "1";
else document.getElementById('setting_' + index + "_" + sub).value = "0";
} else document.getElementById('setting_' + index + "_" + sub).value = setting_configList[index].defaultvalue
document.getElementById('btn_setting_' + index + "_" + sub).className = "btn btn-default";
document.getElementById('status_setting_' + index + "_" + sub).className = "form-group has-feedback";
document.getElementById('icon_setting_' + index + "_" + sub).innerHTML = "";
}

function settingsetvalue(index, subindex) {
var sub = 0;
if (typeof subindex != 'undefined') sub = subindex;
//remove possible spaces
value = document.getElementById('setting_' + index + "_" + sub).value.trim();
//Apply flag here
if (setting_configList[index].type == "F") {
var tmp = setting_configList[index].defaultvalue;
if (value == "1") {
tmp |= settings_get_flag_value(index, subindex);
} else {
tmp &= ~(settings_get_flag_value(index, subindex));
}
value = tmp;
}
if (value == setting_configList[index].defaultvalue) return;
//check validity of value
var isvalid = setting_check_value(value, index, subindex);
//if not valid show error
if (!isvalid) {
setsettingerror(index);
alertdlg(translate_text_item("Out of range"), translate_text_item("Value must be ") + setting_error_msg + " !");
} else {
//value is ok save it
var cmd = setting_configList[index].cmd + value;
setting_lastindex = index;
setting_lastsubindex = subindex;
setting_configList[index].defaultvalue = value;
document.getElementById('btn_setting_' + index + "_" + sub).className = "btn btn-success";
document.getElementById('icon_setting_' + index + "_" + sub).className = "form-control-feedback has-success ico_feedback";
document.getElementById('icon_setting_' + index + "_" + sub).innerHTML = get_icon_svg("ok");
document.getElementById('status_setting_' + index + "_" + sub).className = "form-group has-feedback has-success";
var url = "/command?plain=" + encodeURIComponent(cmd);
SendGetHttp(url, setESPsettingsSuccess, setESPsettingsfailed);
}
}

function setting_checkchange(index, subindex) {
//console.log("list value changed");
var val = document.getElementById('setting_' + index + "_" + subindex).value.trim();
if (setting_configList[index].type == "F") {
//console.log("it is flag value");
var tmp = setting_configList[index].defaultvalue;
if (val == "1") {
tmp |= settings_get_flag_value(index, subindex);
} else {
tmp &= ~(settings_get_flag_value(index, subindex));
}
val = tmp;
}
//console.log("value: " + val);
//console.log("default value: " + setting_configList[index].defaultvalue);
if (setting_configList[index].defaultvalue == val) {
console.log("values are identical");
document.getElementById('btn_setting_' + index + "_" + subindex).className = "btn btn-default";
document.getElementById('icon_setting_' + index + "_" + subindex).className = "form-control-feedback";
document.getElementById('icon_setting_' + index + "_" + subindex).innerHTML = "";
document.getElementById('status_setting_' + index + "_" + subindex).className = "form-group has-feedback";
} else if (setting_check_value(val, index, subindex)) {
//console.log("Check passed");
setsettingchanged(index, subindex);
} else {
console.log("change bad");
setsettingerror(index, subindex);
}

}

function setsettingchanged(index, subindex) {
document.getElementById('status_setting_' + index + "_" + subindex).className = "form-group has-feedback has-warning";
document.getElementById('btn_setting_' + index + "_" + subindex).className = "btn btn-warning";
document.getElementById('icon_setting_' + index + "_" + subindex).className = "form-control-feedback has-warning ico_feedback";
document.getElementById('icon_setting_' + index + "_" + subindex).innerHTML = get_icon_svg("warning-sign");
}

function setsettingerror(index, subindex) {
document.getElementById('btn_setting_' + index + "_" + subindex).className = "btn btn-danger";
document.getElementById('icon_setting_' + index + "_" + subindex).className = "form-control-feedback has-error ico_feedback";
document.getElementById('icon_setting_' + index + "_" + subindex).innerHTML = get_icon_svg("remove");
document.getElementById('status_setting_' + index + "_" + subindex).className = "form-group has-feedback has-error";
}

function setESPsettingsSuccess(response) {
//console.log(response);
update_UI_setting();
}

function setESPsettingsfailed(error_code, response) {
alertdlg(translate_text_item("Set failed"), "Error " + error_code + " :" + response);
console.log("Error " + error_code + " :" + response);
document.getElementById('btn_setting_' + setting_lastindex + "_" + setting_lastsubindex).className = "btn btn-danger";
document.getElementById('icon_setting_' + setting_lastindex + "_" + setting_lastsubindex).className = "form-control-feedback has-error ico_feedback";
document.getElementById('icon_setting_' + setting_lastindex + "_" + setting_lastsubindex).innerHTML = get_icon_svg("remove");
document.getElementById('status_setting_' + setting_lastindex + "_" + setting_lastsubindex).className = "form-group has-feedback has-error";
}

function getESPsettingsSuccess(response) {
if (!process_settings_answer(response)) {
getESPsettingsfailed(406, translate_text_item("Wrong data"));
console.log(response);
return;
}
document.getElementById('settings_loader').style.display = "none";
document.getElementById('settings_list_content').style.display = "block";
document.getElementById('settings_status').style.display = "none";
document.getElementById('settings_refresh_btn').style.display = "block";
}

function getESPsettingsfailed(error_code, response) {
console.log("Error " + error_code + " :" + response);
document.getElementById('settings_loader').style.display = "none";
document.getElementById('settings_status').style.display = "block";
document.getElementById('settings_status').innerHTML = translate_text_item("Failed:") + error_code + " " + response;
document.getElementById('settings_refresh_btn').style.display = "block";
}

function restart_esp() {
confirmdlg(translate_text_item("Please Confirm"), translate_text_item("Restart ESP3D"), process_restart_esp);
}


function process_restart_esp(answer) {
if (answer == "yes") {
restartdlg();
}
}

</script>
<script>
var config_configList = [];
var config_override_List = [];
var config_lastindex = -1
var config_error_msg = "";
var config_lastindex_is_override = false;
var commandtxt = "M205";
var is_override_config = false;
var config_file_name = "/sd/config";


function refreshconfig(is_override) {
if (http_communication_locked) {
document.getElementById('config_status').innerHTML = translate_text_item("Communication locked by another process, retry later.");
return;
}
is_override_config = false;
if ((typeof is_override != 'undefined') && is_override) is_override_config = is_override;
config_display_override(is_override_config);
document.getElementById('config_loader').style.display = "block";
document.getElementById('config_list_content').style.display = "none";
document.getElementById('config_status').style.display = "none";
document.getElementById('config_refresh_btn').style.display = "none";
if (!is_override) config_configList = [];
config_override_List = [];
//endRemoveIf(production)
if (target_firmware == "smoothieware") {
if (!is_override_config) config_file_name = "/sd/config";
commandtxt = "cat " + config_file_name;
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) commandtxt = "$$";
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded")) commandtxt = "M503";
getprinterconfig(is_override_config);
}

function config_display_override(display_it) {
if (display_it) {
document.getElementById('config_override_list_content').style.display = "block";
document.getElementById('config_main_content').style.display = "none";
document.getElementById('config_override_file').checked = true;
} else {
document.getElementById('config_override_list_content').style.display = "none";
document.getElementById('config_main_content').style.display = "block";
document.getElementById('config_main_file').checked = true;
}
}

function getprinterconfig(is_override) {
var cmd = commandtxt;
if ((typeof is_override != 'undefined') && is_override) {
cmd = "M503";
config_override_List = [];
is_override_config = true;
} else is_override_config = false;
var url = "/command?plain=" + encodeURIComponent(cmd);
if ((target_firmware == "grbl-embedded") || (target_firmware == "marlin-embedded")) SendGetHttp(url);
else SendGetHttp(url, getESPconfigSuccess, getESPconfigfailed);
}

function Apply_config_override() {
var url = "/command?plain=" + encodeURIComponent("M500");
SendGetHttp(url, getESPUpdateconfigSuccess);
}

function Delete_config_override() {
var url = "/command?plain=" + encodeURIComponent("M502");
SendGetHttp(url, getESPUpdateconfigSuccess);
}

function getESPUpdateconfigSuccess(response) {
refreshconfig(true);
}

function build_HTML_config_list() {
var content = "";
var array_len = config_configList.length;
if (is_override_config) array_len = config_override_List.length;
for (var i = 0; i < array_len; i++) {
var item;
var prefix = "";
if (is_override_config) {
item = config_override_List[i];
prefix = "_override"
} else item = config_configList[i];
content += "<tr>";
if (item.showcomment) {
content += "<td colspan='3' class='info'>";
content += item.comment;
} else {
content += "<td style='vertical-align:middle'>";
content += item.label;
content += "</td>";
content += "<td style='vertical-align:middle;'>";
content += "<table><tr><td>"
content += "<div id='status_config_" + prefix + i + "' class='form-group has-feedback' style='margin: auto;'>";
content += "<div class='item-flex-row'>";
content += "<table><tr><td>";
content += "<div class='input-group'>";
content += "<span class='input-group-btn'>";
content += "<button class='btn btn-default btn-svg' onclick='config_revert_to_default(" + i + "," + is_override_config + ")' >";
content += get_icon_svg("repeat");
content += "</button>";
content += "</span>";
content += "<input class='hide_it'></input>";
content += "</div>";
content += "</td><td>";
content += "<div class='input-group'>";
content += "<span class='input-group-addon hide_it' ></span>";
content += "<input id='config_" + prefix + i + "' type='text' class='form-control' style='width:";
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded") || is_override_config) content += "25em";
else content += "auto";
content += "'  value='" + item.defaultvalue + "' onkeyup='config_checkchange(" + i + "," + is_override_config + ")' />";
content += "<span id='icon_config_" + prefix + i + "'class='form-control-feedback ico_feedback' ></span>";
content += "<span class='input-group-addon hide_it' ></span>";
content += "</div>";
content += "</td></tr></table>";
content += "<div class='input-group'>";
content += "<input class='hide_it'></input>";
content += "<span class='input-group-btn'>";
content += "<button  id='btn_config_" + prefix + i + "' class='btn btn-default' onclick='configGetvalue(" + i + "," + is_override_config + ")' translate english_content='Set' >" + translate_text_item("Set") + "</button>&nbsp;";
content += "</span>";
content += "</div>";
content += "</div>";
content += "</div>";
content += "</td></tr></table>";
content += "</td>";
content += "<td style='vertical-align:middle'>";
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded"))content += item.help;
else content += HTMLEncode(item.help);
}
content += "</td>";
content += "</tr>\n";
}
if (content.length > 0) {
if (target_firmware == "smoothieware") {
document.getElementById('config_main_file_name').innerHTML = config_file_name;
if (!is_override_config) {
document.getElementById('config_list_data').innerHTML = content;
getprinterconfig(true);
} else {
document.getElementById('config_override_data').innerHTML = content;
if (is_config_override_file()) {
document.getElementById('config_delete_override').style.display = 'none';
document.getElementById('config_override_file_name').innerHTML = "Smoothieware";
} else {
document.getElementById('config_override_file_name').innerHTML = "/sd/config-override";
document.getElementById('config_delete_override').style.display = 'block';
}
}
} else {
document.getElementById('config_list_data').innerHTML = content;
}
}
document.getElementById('config_loader').style.display = "none";
document.getElementById('config_list_content').style.display = "block";
document.getElementById('config_status').style.display = "none";
document.getElementById('config_refresh_btn').style.display = "block";
}

function config_check_value(value, index, is_override) {
var isvalid = true;
if ((target_firmware == "smoothieware") && !is_override) {
if ((value.trim()[0] == '-') || (value.length === 0) || (value.toLowerCase().indexOf("#") != -1)) {
isvalid = false;
config_error_msg = translate_text_item("cannot have '-', '#' char or be empty");
}
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
if ((value.trim()[0] == '-') || (value.length === 0) || (value.toLowerCase().indexOf("#") != -1)) {
isvalid = false;
config_error_msg = translate_text_item("cannot have '-', '#' char or be empty");
}
} else {
if ((value.trim()[0] == '-') || (value.length === 0) || ((value.indexOf("e") != -1) && (value.toLowerCase().indexOf("true") == -1) && (value.toLowerCase().indexOf("false") == -1))) {
isvalid = false;
config_error_msg = translate_text_item("cannot have '-', 'e' char or be empty");
}
}
return isvalid;
}

function process_config_answer(response_text) {
var result = true;
var tlines = response_text.split("\n");
//console.log(tlines.length);
if (tlines.length <= 3) {
if ((target_firmware == "smoothieware") && (commandtxt != "cat /sd/config.txt")) {
if (!is_override_config) {
config_file_name = "/sd/config.txt";
commandtxt = "cat " + config_file_name;
config_configList = [];
}
getprinterconfig();
} else {
//console.log("No config file" );
if ((target_firmware == "smoothieware")) document.getElementById('config_status').innerHTML = translate_text_item("File config / config.txt not found!");
else document.getElementById('config_status').innerHTML = translate_text_item("Cannot get EEPROM content!");
result = false;
}
} else {
//console.log("Config has " + tlines.length + " entries");
var vindex = 0;
for (var i = 0; i < tlines.length; i++) {
vindex = create_config_entry(tlines[i], vindex);
}
if (vindex > 0) build_HTML_config_list();
else result = false;
}

return result;
}

function create_config_entry(sentry, vindex) {
var iscomment;
var ssentry = sentry;
if (!is_config_entry(ssentry)) return vindex;
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra")) {
if (sentry.startsWith("Config:  ")) ssentry = sentry.replace("Config:", "");
else ssentry = sentry.replace("Config:", "#");
}
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded")) {
if (sentry.startsWith("echo: ")) ssentry = sentry.replace("echo:", "");
else ssentry = sentry.replace("echo:", "#");
}
while (ssentry.indexOf("\t") > -1) {
ssentry = ssentry.replace("\t", " ");
}
while (ssentry.indexOf("  ") > -1) {
ssentry = ssentry.replace("  ", " ");
}
while (ssentry.indexOf("##") > -1) {
ssentry = ssentry.replace("##", "#");
}

iscomment = is_config_commented(ssentry);
if (iscomment) {
while (ssentry.indexOf("<") != -1) {
var m = ssentry.replace("<", "&lt;");
ssentry = m.replace(">", "&gt;");
}
var config_entry = {
comment: ssentry,
showcomment: true,
index: vindex,
label: "",
help: "",
defaultvalue: "",
cmd: ""
};
if (is_override_config) config_override_List.push(config_entry);
else config_configList.push(config_entry);
} else {
var slabel = get_config_label(ssentry);
var svalue = get_config_value(ssentry);
var shelp = get_config_help(ssentry);
var scmd = get_config_command(ssentry)
var config_entry = {
comment: ssentry,
showcomment: false,
index: vindex,
label: slabel,
help: shelp,
defaultvalue: svalue,
cmd: scmd,
is_override: is_override_config
};
if (is_override_config) config_override_List.push(config_entry);
else config_configList.push(config_entry);
}
vindex++;
return vindex;
}
//check it is valid entry
function is_config_entry(sline) {
var line = sline.trim();
if (line.length == 0) return false;
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded")) {
if (sline.startsWith("Config:") || sline.startsWith("echo:") || sline.startsWith("\t") || sline.startsWith("  ")) return true
else return false;
}
if (target_firmware == "smoothieware") {
return true;
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
if ((line.indexOf("$") == 0) && (line.indexOf("=") != -1)) return true;
else return false
}
//Default repetier
if (line.indexOf("EPR:") == 0) return true;
else return false

}

function get_config_label(sline) {
var tline = sline.trim().split(" ");
var tsize = tline.length;
if ((target_firmware == "smoothieware") || (target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded")) {
return tline[0];
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
var tline2 = sline.trim().split("=");
return tline2[0];
}
if (tsize > 3) {
var result = "";
var i = 0;
for (i = 3; i < tsize; i++) {
if (tline[i][0] == '[') break;
result += tline[i] + " ";
}
return result;
}
return "???";
}

function get_config_value(sline) {
var tline = sline.trim().split(" ");
if ((target_firmware == "smoothieware") && !is_override_config) {
if ((tline.length > 1) && tline[0][0] != '#') return tline[1];
else return "???";
}
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded") || is_override_config) {

var tline1;
if (sline.indexOf(";") != -1) tline1 = sline.trim().split(";");
else tline1 = sline.trim().split("(");
tline = tline1[0].split(" ");
var line = "";
for (var i = 1; i < tline.length; i++) {
if (line.length > 0) line += " ";
line += tline[i];
}
return line;
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
var tline2 = sline.trim().split("=");
if (tline2.length > 1) return tline2[1];
else return "???";
}
if (tline.length > 3) {
return tline[2];
} else return "???";
}

function get_config_help(sline) {
if (is_override_config) return "";
if (target_firmware == "smoothieware") {
var pos = sline.indexOf("#");
if (pos > -1) return sline.slice(pos + 1, sline.length);
else return "";
}
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded")) {
var tline;
if (sline.indexOf(";") != -1) {
tline = sline.trim().split(";");
if (tline.length > 1) return tline[1];
else return "";
} else {
tline = sline.trim().split("(");
if (tline.length > 1) {
var tline2 = tline[1].split(")");
return tline2[0];
} else return "";
}
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
return inline_help(get_config_label(sline))
}
var tline = sline.split("[");
if (tline.length > 1) {
var tline2 = tline[1].split("]");
return tline2[0];
}
return "";
}

function get_config_command(sline) {
var command;
if ((target_firmware == "smoothieware") && !is_override_config) {
command = "config-set sd " + get_config_label(sline) + " ";
return command;
}
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded") || is_override_config) {
command = get_config_label(sline) + " ";
return command;
}
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
command = get_config_label(sline) + "=";
return command;
}
var tline = sline.split(" ");
if (tline.length > 3) {
var stype = tline[0].split(":");
command = "M206 T" + stype[1];
command += " P" + tline[1];
if (stype[1] == "3") command += " X";
else command += " S";
return command;
}
return "; ";
}

function is_config_commented(sline) {
var line = sline.trim();
if (line.length == 0) return false;
if (is_override_config) return line.startsWith(";");
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra") || (target_firmware == "marlin-embedded") || (target_firmware == "smoothieware")) {
return line.startsWith("#");
}
return false;
}

function config_revert_to_default(index, is_override) {
var prefix = "";
var item = config_configList[index];
if (is_override) {
prefix = "_override";
item = config_override_List[index];
}
console.log()
document.getElementById('config_' + prefix + index).value = item.defaultvalue;
document.getElementById('btn_config_' + prefix + index).className = "btn btn-default";
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = "";
}

function is_config_override_file() {
if (config_override_List.length > 5) {
for (i = 0; i < 5; i++) {
if (config_override_List[i].comment.startsWith("; No config override")) return true;
}
}
return false;
}

function configGetvalue(index, is_override) {
var prefix = "";
var item = config_configList[index];
if (is_override) {
prefix = "_override";
item = config_override_List[index];
}
//remove possible spaces
value = document.getElementById('config_' + prefix + index).value.trim();
if (value == item.defaultvalue) return;
//check validity of value
var isvalid = config_check_value(value, index, is_override);
//if not valid show error
if (!isvalid) {
document.getElementById('btn_config_' + prefix + index).className = "btn btn-danger";
document.getElementById('icon_config_' + prefix + index).className = "form-control-feedback has-error ico_feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = get_icon_svg("remove");
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback has-error";
alertdlg(translate_text_item("Out of range"), translate_text_item("Value ") + config_error_msg + " !");
} else {
//value is ok save it
var cmd = item.cmd + value;
config_lastindex = index;
config_lastindex_is_override = is_override;
item.defaultvalue = value;
document.getElementById('btn_config_' + prefix + index).className = "btn btn-success";
document.getElementById('icon_config_' + prefix + index).className = "form-control-feedback has-success ico_feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = get_icon_svg("ok");
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback has-success";
var url = "/command?plain=" + encodeURIComponent(cmd);
SendGetHttp(url, setESPconfigSuccess, setESPconfigfailed);
}
}

function config_checkchange(index, is_override) {
//console.log("check " + "config_"+index);
var prefix = "";
var item = config_configList[index];
if (is_override) {
prefix = "_override";
item = config_override_List[index];
}
var val = document.getElementById('config_' + prefix + index).value.trim();
//console.log("value: " + val);
if (item.defaultvalue == val) {
document.getElementById('btn_config_' + prefix + index).className = "btn btn-default";
document.getElementById('icon_config_' + prefix + index).className = "form-control-feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = "";
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback";
} else if (config_check_value(val, index, is_override)) {
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback has-warning";
document.getElementById('btn_config_' + prefix + index).className = "btn btn-warning";
document.getElementById('icon_config_' + prefix + index).className = "form-control-feedback has-warning ico_feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = get_icon_svg("warning-sign");
//console.log("change ok");
} else {
//console.log("change bad");
document.getElementById('btn_config_' + prefix + index).className = "btn btn-danger";
document.getElementById('icon_config_' + prefix + index).className = "form-control-feedback has-error ico_feedback";
document.getElementById('icon_config_' + prefix + index).innerHTML = get_icon_svg("remove");
document.getElementById('status_config_' + prefix + index).className = "form-group has-feedback has-error";
}

}

function setESPconfigSuccess(response) {
//console.log(response);
}
var grbl_help = {
"$0": "Step pulse, microseconds",
"$1": "Step idle delay, milliseconds",
"$2": "Step port invert, mask",
"$3": "Direction port invert, mask",
"$4": "Step enable invert, boolean",
"$5": "Limit pins invert, boolean",
"$6": "Probe pin invert, boolean",
"$10": "Status report, mask",
"$11": "Junction deviation, mm",
"$12": "Arc tolerance, mm",
"$13": "Report inches, boolean",
"$20": "Soft limits, boolean",
"$21": "Hard limits, boolean",
"$22": "Homing cycle, boolean",
"$23": "Homing dir invert, mask",
"$24": "Homing feed, mm/min",
"$25": "Homing seek, mm/min",
"$26": "Homing debounce, milliseconds",
"$27": "Homing pull-off, mm",
"$30": "Max spindle speed, RPM",
"$31": "Min spindle speed, RPM",
"$32": "Laser mode, boolean",
"$100": "X steps/mm",
"$101": "Y steps/mm",
"$102": "Z steps/mm",
"$103": "A steps/mm",
"$104": "B steps/mm",
"$105": "C steps/mm",
"$110": "X Max rate, mm/min",
"$111": "Y Max rate, mm/min",
"$112": "Z Max rate, mm/min",
"$113": "A Max rate, mm/min",
"$114": "B Max rate, mm/min",
"$115": "C Max rate, mm/min",
"$120": "X Acceleration, mm/sec^2",
"$121": "Y Acceleration, mm/sec^2",
"$122": "Z Acceleration, mm/sec^2",
"$123": "A Acceleration, mm/sec^2",
"$124": "B Acceleration, mm/sec^2",
"$125": "C Acceleration, mm/sec^2",
"$130": "X Max travel, mm",
"$131": "Y Max travel, mm",
"$132": "Z Max travel, mm",
"$133": "A Max travel, mm",
"$134": "B Max travel, mm",
"$135": "C Max travel, mm"

};

function inline_help(label) {
var shelp = "";
shelp = grbl_help[label];
if (typeof shelp === 'undefined') shelp = "";
return translate_text_item(shelp);
}

function setESPconfigfailed(error_code, response) {
alertdlg(translate_text_item("Set failed"), "Error " + error_code + " :" + response);
console.log("Error " + error_code + " :" + response);
var prefix = "";
if (config_lastindex_is_override) prefix = "_override";
document.getElementById('btn_config_' + prefix + config_lastindex).className = "btn btn-danger";
document.getElementById('icon_config_' + prefix + config_lastindex).className = "form-control-feedback has-error ico_feedback";
document.getElementById('icon_config_' + prefix + config_lastindex).innerHTML = get_icon_svg("remove");
document.getElementById('status_config_' + prefix + config_lastindex).className = "form-group has-feedback has-error";
}

function getESPconfigSuccess(response) {
//console.log(response);
if (!process_config_answer(response)) {
getESPconfigfailed(406, translate_text_item("Wrong data"));
document.getElementById('config_loader').style.display = "none";
document.getElementById('config_list_content').style.display = "block";
document.getElementById('config_status').style.display = "none";
document.getElementById('config_refresh_btn').style.display = "block";
return;
}
}

function getESPconfigfailed(error_code, response) {
console.log("Error " + error_code + " :" + response);
document.getElementById('config_loader').style.display = "none";
document.getElementById('config_status').style.display = "block";
document.getElementById('config_status').innerHTML = translate_text_item("Failed:") + error_code + " " + response;
document.getElementById('config_refresh_btn').style.display = "block";
}

</script>
<script>
function opentab(evt, tabname, tabcontentid, tablinkid) {
var i, tabcontent, tablinks;
tabcontent = document.getElementsByClassName("tabcontent");
for (i = 0; i < tabcontent.length; i++) {
if (tabcontent[i].parentNode.id == tabcontentid) {
tabcontent[i].style.display = "none";
}
}
tablinks = document.getElementsByClassName("tablinks");
for (i = 0; i < tablinks.length; i++) {
if (tablinks[i].parentNode.id == tablinkid) {
tablinks[i].className = tablinks[i].className.replace(" active", "");
}
}
document.getElementById(tabname).style.display = "block";
evt.currentTarget.className += " active";
}

</script>
<script>
//alert dialog
function alertdlg(titledlg, textdlg, closefunc) {
var modal = setactiveModal('alertdlg.html', closefunc);
if (modal == null) return;
var title = modal.element.getElementsByClassName("modal-title")[0];
var body = modal.element.getElementsByClassName("modal-text")[0];
title.innerHTML = titledlg;
body.innerHTML = textdlg;
showModal();
}

</script>
<script>
//confirm dialog
function confirmdlg(titledlg, textdlg, closefunc) {
var modal = setactiveModal('confirmdlg.html', closefunc);
if (modal == null) return;
var title = modal.element.getElementsByClassName("modal-title")[0];
var body = modal.element.getElementsByClassName("modal-text")[0];
title.innerHTML = titledlg;
body.innerHTML = textdlg;
showModal();
}

</script>
<script>
//changepassword dialog
function changepassworddlg() {
var modal = setactiveModal('passworddlg.html');
if (modal == null) return;
document.getElementById('password_loader').style.display = "none";
document.getElementById('change_password_content').style.display = "block";
document.getElementById('change_password_btn').style.display = "none";
document.getElementById('password_content').innerHTML = "";
document.getElementById('password_password_text').innerHTML = "";
document.getElementById('password_password_text1').innerHTML = "";
document.getElementById('password_password_text2').innerHTML = "";
showModal();
}


function checkpassword() {
var pwd = document.getElementById('password_password_text').value.trim();
var pwd1 = document.getElementById('password_password_text1').value.trim();
var pwd2 = document.getElementById('password_password_text2').value.trim();
document.getElementById('password_content').innerHTML = "";
document.getElementById('change_password_btn').style.display = "none";
if (pwd1 != pwd2) document.getElementById('password_content').innerHTML = translate_text_item("Passwords do not matches!");
else if (pwd1.length < 1 || pwd1.length > 16 || pwd1.indexOf(" ") > -1) document.getElementById('password_content').innerHTML = translate_text_item("Password must be >1 and <16 without space!");
else document.getElementById('change_password_btn').style.display = "block";
}


function ChangePasswordfailed(errorcode, response_text) {
var response = JSON.parse(response_text);
if (typeof(response.status) !== 'undefined') document.getElementById('password_content').innerHTML = translate_text_item(response.status);
console.log("Error " + errorcode + " : " + response_text);
document.getElementById('password_loader').style.display = "none";
document.getElementById('change_password_content').style.display = "block";
}

function ChangePasswordsuccess(response_text) {
document.getElementById('password_loader').style.display = "none";
closeModal("Connection successful");
}

function SubmitChangePassword() {
var user = document.getElementById('current_ID').innerHTML.trim();
var password = document.getElementById('password_password_text').value.trim();
var newpassword = document.getElementById('password_password_text1').value.trim();
var url = "/login?USER=" + encodeURIComponent(user) + "&PASSWORD=" + encodeURIComponent(password) + "&NEWPASSWORD=" + encodeURIComponent(newpassword) + "&SUBMIT=yes";
document.getElementById('password_loader').style.display = "block";
document.getElementById('change_password_content').style.display = "none";
SendGetHttp(url, ChangePasswordsuccess, ChangePasswordfailed);
}

</script>
<script>
//login dialog
function logindlg(closefunc, check_first) {
var modal = setactiveModal('logindlg.html', closefunc);
var need_query_auth = false;
if (modal == null) return;
document.getElementById('login_title').innerHTML = translate_text_item("Identification requested");
document.getElementById('login_loader').style.display = "none";
document.getElementById('login_content').style.display = "block";
if (typeof check_first !== 'undefined') need_query_auth = check_first;
if (need_query_auth) {
var url = "/login";
SendGetHttp(url, checkloginsuccess);
} else {
showModal();
}
}

function checkloginsuccess(response_text) {
var response = JSON.parse(response_text);
if (typeof(response.authentication_lvl) !== 'undefined') {
if (response.authentication_lvl != "guest") {
if (typeof(response.authentication_lvl) !== 'undefined') document.getElementById('current_auth_level').innerHTML = "(" + translate_text_item(response.authentication_lvl) + ")";
if (typeof(response.user) !== 'undefined') document.getElementById('current_ID').innerHTML = response.user;
closeModal('cancel');
} else showModal();
} else {
showModal();
}
}

function login_id_OnKeyUp(event) {
//console.log(event.keyCode);
if ((event.keyCode == 13)) document.getElementById('login_password_text').focus();
}

function login_password_OnKeyUp(event) {
//console.log(event.keyCode);
if ((event.keyCode == 13)) document.getElementById('login_submit_btn').click();
}


function loginfailed(errorcode, response_text) {
var response = JSON.parse(response_text);
if (typeof(response.status) !== 'undefined') document.getElementById('login_title').innerHTML = translate_text_item(response.status);
else document.getElementById('login_title').innerHTML = translate_text_item("Identification invalid!");
console.log("Error " + errorcode + " : " + response_text);
document.getElementById('login_content').style.display = "block";
document.getElementById('login_loader').style.display = "none";
document.getElementById('current_ID').innerHTML = translate_text_item("guest");
document.getElementById('logout_menu').style.display = "none";
document.getElementById('logout_menu_divider').style.display = "none";
document.getElementById("password_menu").style.display = "none";
}

function loginsuccess(response_text) {
var response = JSON.parse(response_text);
if (typeof(response.authentication_lvl) !== 'undefined') document.getElementById('current_auth_level').innerHTML = "(" + translate_text_item(response.authentication_lvl) + ")";
document.getElementById('login_loader').style.display = "none";
document.getElementById('logout_menu').style.display = "block";
document.getElementById('logout_menu_divider').style.display = "block";
document.getElementById("password_menu").style.display = "block";
closeModal("Connection successful");
}

function SubmitLogin() {
var user = document.getElementById('login_user_text').value.trim();
var password = document.getElementById('login_password_text').value.trim();
var url = "/login?USER=" + encodeURIComponent(user) + "&PASSWORD=" + encodeURIComponent(password) + "&SUBMIT=yes";
document.getElementById('current_ID').innerHTML = user;
document.getElementById('current_auth_level').innerHTML = "";
document.getElementById('login_content').style.display = "none";
document.getElementById('login_loader').style.display = "block";
SendGetHttp(url, loginsuccess, loginfailed);
}

function GetIdentificationStatus() {
var url = "/login";
SendGetHttp(url, GetIdentificationStatusSuccess);
}

function GetIdentificationStatusSuccess(response_text) {
var response = JSON.parse(response_text);
if (typeof(response.authentication_lvl) !== 'undefined') {
if (response.authentication_lvl == "guest") {
document.getElementById('current_ID').innerHTML = translate_text_item("guest");
document.getElementById('current_auth_level').innerHTML = "";
}
}
}

function DisconnectionSuccess(response_text) {
document.getElementById('current_ID').innerHTML = translate_text_item("guest");
document.getElementById('current_auth_level').innerHTML = "";
document.getElementById('logout_menu').style.display = "none";
document.getElementById('logout_menu_divider').style.display = "none";
document.getElementById("password_menu").style.display = "none";
}

function DisconnectionFailed(errorcode, response) {
document.getElementById('current_ID').innerHTML = translate_text_item("guest");
document.getElementById('current_auth_level').innerHTML = "";
document.getElementById('logout_menu').style.display = "none";
document.getElementById('logout_menu_divider').style.display = "none";
document.getElementById("password_menu").style.display = "none";
console.log("Error " + errorcode + " : " + response);
}

function DisconnectLogin(answer) {
if (answer == "yes") {
var url = "/login?DISCONNECT=yes";
SendGetHttp(url, DisconnectionSuccess, DisconnectionFailed);
}
}

</script>
<script>
//input dialog
function inputdlg(titledlg, textdlg, closefunc, preset) {
var modal = setactiveModal('inputdlg.html', closefunc);
if (modal == null) return;
var title = modal.element.getElementsByClassName("modal-title")[0];
var body = modal.element.getElementsByClassName("modal-text")[0];
title.innerHTML = titledlg;
body.innerHTML = textdlg;
if (typeof preset !== 'undefined') document.getElementById('inputldg_text').value = preset;
else document.getElementById('inputldg_text').value = "";
showModal();
}


function closeInputModal(response) {
var answer = "";
if (response == "ok") {
var input = document.getElementById('inputldg_text').value;
answer = input.trim();
}
closeModal(answer);
}

</script>
<script>
//Credits dialog
function creditsdlg() {
var modal = setactiveModal('creditsdlg.html');
if (modal == null) return;
showModal();
}

</script>
<script>
var ssid_item_scanwifi = -1;
var ssid_subitem_scanwifi = -1;
//scanwifi dialog
function scanwifidlg(item, subitem) {
var modal = setactiveModal('scanwifidlg.html', scanwifidlg_close);
if (modal == null) return;
ssid_item_scanwifi = item;
ssid_subitem_scanwifi = subitem;
showModal();
refresh_scanwifi();
}

function refresh_scanwifi() {
document.getElementById('AP_scan_loader').style.display = 'block';
document.getElementById('AP_scan_list').style.display = 'none';
document.getElementById('AP_scan_status').style.display = 'block';
document.getElementById('AP_scan_status').innerHTML = translate_text_item("Scanning");
document.getElementById('refresh_scanwifi_btn').style.display = 'none';
//endRemoveIf(production)
var url = "/command?plain=" + encodeURIComponent("[ESP410]");
SendGetHttp(url, getscanWifiSuccess, getscanWififailed);
}

function process_scanWifi_answer(response_text) {
var result = true;
var content = "";
try {
var response = JSON.parse(response_text);
if (typeof response.AP_LIST == 'undefined') {
result = false;
} else {
var aplist = response.AP_LIST;
//console.log("found " + aplist.length + " AP");
aplist.sort(function(a, b) {
return (parseInt(a.SIGNAL) < parseInt(b.SIGNAL)) ? -1 : (parseInt(a.SIGNAL) > parseInt(b.SIGNAL)) ? 1 : 0
});
for (var i = aplist.length - 1; i >= 0; i--) {
content += "<tr>";
content += "<td style='vertical-align:middle'>";
content += aplist[i].SSID;
content += "</td>";
content += "<td style='text-align: center;vertical-align:middle;'>";
content += aplist[i].SIGNAL;
content += "%</td>";
content += "<td style='vertical-align:middle'><center>";
if (aplist[i].IS_PROTECTED == "1") content += get_icon_svg("lock");
content += "</></td>";
content += "<td>";
content += "<button class='btn btn-primary' onclick='select_ap_ssid(\"" + aplist[i].SSID.replace("'","\\'").replace("\"","\\\"") + "\");'>";
content += get_icon_svg("ok");
content += "</button>";
content += "</td>";
content += "</tr>";
}
}
} catch (e) {
console.error("Parsing error:", e);
result = false;
}
document.getElementById('AP_scan_data').innerHTML = content;
return result;
}

function select_ap_ssid(ssid_name) {
var val = document.getElementById("setting_" + ssid_item_scanwifi + "_" + ssid_subitem_scanwifi).value;
document.getElementById("setting_" + ssid_item_scanwifi + "_" + ssid_subitem_scanwifi).value = ssid_name;
document.getElementById("setting_" + ssid_item_scanwifi + "_" + ssid_subitem_scanwifi).focus();
if (val != ssid_name)setsettingchanged(ssid_item_scanwifi, ssid_subitem_scanwifi);
closeModal("Ok");
}

function getscanWifiSuccess(response) {
if (!process_scanWifi_answer(response)) {
getscanWififailed(406, translate_text_item("Wrong data"));
return;
}
document.getElementById('AP_scan_loader').style.display = "none";
document.getElementById('AP_scan_list').style.display = "block";
document.getElementById('AP_scan_status').style.display = "none";
document.getElementById('refresh_scanwifi_btn').style.display = "block";
}

function getscanWififailed(error_code, response) {
console.log("Error " + error_code + " :" + response);
document.getElementById('AP_scan_loader').style.display = "none";
document.getElementById('AP_scan_status').style.display = "block";
document.getElementById('AP_scan_status').innerHTML = translate_text_item("Failed:") + error_code + " " + response;
document.getElementById('refresh_scanwifi_btn').style.display = "block";
}

function scanwifidlg_close(response) {
//console.log(response);
}

</script>
<script>
//Connect dialog
function connectdlg(getFw) {
var modal = setactiveModal('connectdlg.html');
var get_FW = true;
if (modal == null) return;
showModal();
//endRemoveIf(production)
if (typeof getFw != 'undefined') get_FW = getFw;
if (get_FW) retryconnect();
}

function getFWdata(response) {
var tlist = response.split("#");
//FW version:0.9.200 # FW target:smoothieware # FW HW:Direct SD # primary sd:/ext/ # secondary sd:/sd/ # authentication: yes
if (tlist.length < 3) {
return false;
}
//FW version
var sublist = tlist[0].split(":");
if (sublist.length != 2) {
return false;
}
fw_version = sublist[1].toLowerCase().trim();
//FW target
sublist = tlist[1].split(":");
if (sublist.length != 2) {
return false;
}
target_firmware = sublist[1].toLowerCase().trim();
//FW HW
sublist = tlist[2].split(":");
if (sublist.length != 2) {
return false;
}
var sddirect = sublist[1].toLowerCase().trim();
if (sddirect == "direct sd") direct_sd = true;
else direct_sd = false;
//primary sd
sublist = tlist[3].split(":");
if (sublist.length != 2) {
return false;
}
if (!direct_sd && (target_firmware == "smoothieware")) {
primary_sd = "sd/";
} else {
primary_sd = sublist[1].toLowerCase().trim();
}
//secondary sd
sublist = tlist[4].split(":");
if (sublist.length != 2) {
return false;
}
if (!direct_sd && (target_firmware == "smoothieware")) {
secondary_sd = "ext/";
} else {
secondary_sd = sublist[1].toLowerCase().trim();
}
//authentication
sublist = tlist[5].split(":");
if (sublist.length != 2) {
return false;
}
if ((sublist[0].trim() == "authentication") && (sublist[1].trim() == "yes")) ESP3D_authentication = true;
else ESP3D_authentication = false;
//async communications
if (tlist.length > 6) {
sublist = tlist[6].split(":");
if ((sublist[0].trim() == "webcommunication") && (sublist[1].trim() == "Async")) async_webcommunication = true;
else {
async_webcommunication = false;
websocket_port = sublist[2].trim();
if (sublist.length>3) {
websocket_ip = sublist[3].trim();
} else {
console.log("No IP for websocket, use default");
websocket_ip =  document.location.hostname;
}
}
}
if (tlist.length > 7) {
sublist = tlist[7].split(":");
if (sublist[0].trim() == "hostname") esp_hostname = sublist[1].trim();
}

if ((target_firmware == "grbl-embedded") && (tlist.length > 8)) {
sublist = tlist[8].split(":");
if (sublist[0].trim() == "axis") {
grblaxis = parseInt(sublist[1].trim());
}
}

if (async_webcommunication) {
if (!!window.EventSource) {
event_source = new EventSource('/events');
event_source.addEventListener('InitID', Init_events, false);
event_source.addEventListener('ActiveID', ActiveID_events, false);
event_source.addEventListener('DHT', DHT_events, false);
}
}
startSocket();

return true;
}

function connectsuccess(response) {
if (getFWdata(response)) {
console.log("Fw identification:" + response);
if (ESP3D_authentication) {
closeModal("Connection successful");
document.getElementById('menu_authentication').style.display = 'inline';
logindlg(initUI, true);
} else {
document.getElementById('menu_authentication').style.display = 'none';
initUI();
}
} else {
console.log(response);
connectfailed(406, "Wrong data");
}
}

function connectfailed(errorcode, response) {
document.getElementById('connectbtn').style.display = 'block';
document.getElementById('failed_connect_msg').style.display = 'block';
document.getElementById('connecting_msg').style.display = 'none';
console.log("Fw identification error " + errorcode + " : " + response);
}

function retryconnect() {
document.getElementById('connectbtn').style.display = 'none';
document.getElementById('failed_connect_msg').style.display = 'none';
document.getElementById('connecting_msg').style.display = 'block';
var url = "/command?plain=" + encodeURIComponent("[ESP800]");;
SendGetHttp(url, connectsuccess, connectfailed)
}

</script>
<script>
//restart dialog
function restartdlg() {
console.log("show restart");
var modal = setactiveModal('restartdlg.html');
if (modal == null) return;
document.getElementById('prgrestart').style.display = 'block';
document.getElementById('restartmsg').innerHTML = translate_text_item("Restarting, please wait....");
showModal();
SendPrinterCommand("[ESP444]RESTART", false, restart_esp_success, restart_esp_failed);
}

function restart_esp_success(response) {
var i = 0;
var interval;
var x = document.getElementById("prgrestart");
http_communication_locked = true;
x.max = 40;
interval = setInterval(function() {
last_ping = Date.now();
i = i + 1;
var x = document.getElementById("prgrestart");
x.value = i;
document.getElementById('restartmsg').innerHTML = translate_text_item("Restarting, please wait....") + (41 - i) + translate_text_item(" seconds");
if (i > 40) {
clearInterval(interval);
location.reload();
}
}, 1000);
//console.log(response);
}

function restart_esp_failed(errorcode, response) {
document.getElementById('prgrestart').style.display = 'none';
document.getElementById('restartmsg').innerHTML = translate_text_item("Upload failed : ") + errorcode + " :" + response;
console.log("Error " + errorcode + " : " + response);
closeModal('Cancel')
}

</script>
<script>
// Create the modal
var listmodal = [];


function setactiveModal(html_template, closefunc) {
if (typeof document.getElementById(html_template) === 'undefined') {
console.log("Error: no " + html_template);
return null;
}
var modal = new Object;
modal.element = document.getElementById(html_template);
modal.id = listmodal.length;
modal.name = html_template;
if (typeof closefunc !== 'undefined') modal.closefn = closefunc;
else modal.closefn = myfnclose;
listmodal.push(modal)
//console.log("Creation of modal  " +  modal.name + " with ID " +modal.id);
return listmodal[listmodal.length - 1];;
}

function getactiveModal() {
if (listmodal.length > 0) {
return listmodal[listmodal.length - 1];
} else return null;
}

// open the modal
function showModal() {
var currentmodal = getactiveModal();
currentmodal.element.style.display = "block";
//console.log("Show modal " +  currentmodal.name + " with ID " + currentmodal.id  );
}

// When the user clicks on <span> (x), close the modal
function closeModal(response) {
var currentmodal = getactiveModal();
if (currentmodal != null) {
currentmodal.element.style.display = "none";
var closefn = currentmodal.closefn;
//console.log("Deletetion of modal " +  currentmodal.name + " with ID "  + currentmodal.id);
listmodal.pop();
delete currentmodal;
currentmodal = getactiveModal();
//if (currentmodal != null)console.log("New active modal is  " +  currentmodal.name + " with ID "  + currentmodal.id);
//else console.log("No active modal");
closefn(response);
}
}
//default close function
function myfnclose(value) {
//console.log("modale closed: " + value);
}

</script>
<script>
//SPIFFS dialog
var SPIFFS_currentpath = "/";
var SPIFFS_currentfile = "";
var SPIFFS_upload_ongoing = false;

function SPIFFSdlg(root) {
var modal = setactiveModal('SPIFFSdlg.html');
if (modal == null) return;
if (typeof root !== 'undefined') SPIFFS_currentpath = root;
document.getElementById("SPIFFS-select").value = "";
document.getElementById("SPIFFS_file_name").innerHTML = translate_text_item("No file chosen");
document.getElementById("SPIFFS_uploadbtn").style.display = 'none';
document.getElementById("SPIFFS_prg").style.display = 'none';
document.getElementById("uploadSPIFFSmsg").style.display = 'none';
document.getElementById("SPIFFS_select_files").style.display = 'none';
showModal();
refreshSPIFFS();
}

function closeSPIFFSDialog(msg) {
if (SPIFFS_upload_ongoing) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Upload is ongoing, please wait and retry."));
return;
}
closeModal(msg);
}

function SPIFFSnavbar() {
var content = "<table><tr>";
var tlist = SPIFFS_currentpath.split("/");
var path = "/";
var nb = 1;
content += "<td><button class='btn btn-primary'  onclick=\"SPIFFS_currentpath='/'; SPIFFSSendCommand('list','all');\">/</button></td>";
while (nb < (tlist.length - 1)) {
path += tlist[nb] + "/";
content += "<td><button class='btn btn-link' onclick=\"SPIFFS_currentpath='" + path + "'; SPIFFSSendCommand('list','all');\">" + tlist[nb] + "</button></td><td>/</td>";
nb++;
}
content += "</tr></table>";
return content;
}

function SPIFFSselect_dir(directoryname) {
SPIFFS_currentpath += directoryname + "/";
SPIFFSSendCommand('list', 'all');
}

function SPIFFS_Createdir() {
inputdlg(translate_text_item("Please enter directory name"), translate_text_item("Name:"), processSPIFFS_Createdir);
}

function processSPIFFS_Createdir(answer) {
if (answer.length > 0) SPIFFSSendCommand("createdir", answer.trim());
}

function SPIFFSDelete(filename) {
SPIFFS_currentfile = filename;
confirmdlg(translate_text_item("Please Confirm"), translate_text_item("Confirm deletion of file: ") + filename, processSPIFFSDelete);
}

function processSPIFFSDelete(answer) {
if (answer == "yes") SPIFFSSendCommand("delete", SPIFFS_currentfile);
SPIFFS_currentfile = "";
}

function SPIFFSDeletedir(filename) {
SPIFFS_currentfile = filename;
confirmdlg(translate_text_item("Please Confirm"), translate_text_item("Confirm deletion of directory: ") + filename, processSPIFFSDeleteDir);
}

function processSPIFFSDeleteDir(answer) {
if (answer == "yes") SPIFFSSendCommand("deletedir", SPIFFS_currentfile);
SPIFFS_currentfile = "";
}

function SPIFFSSendCommand(action, filename) {
//endRemoveIf(production)
var url = "/files?action=" + action;
url += "&filename=" + encodeURI(filename);
url += "&path=" + encodeURI(SPIFFS_currentpath);
document.getElementById('SPIFFS_loader').style.visibility = "visible";
console.log(url);
SendGetHttp(url, SPIFFSsuccess, SPIFFSfailed);

}

function SPIFFSsuccess(response) {
//console.log(response);
var jsonresponse = JSON.parse(response);
document.getElementById('SPIFFS_loader').style.visibility = "hidden";
document.getElementById('refreshSPIFFSbtn').style.display = 'block';
document.getElementById("SPIFFS_select_files").style.display = 'block';
SPIFFSdispatchfilestatus(jsonresponse);
}

function SPIFFSfailed(errorcode, response) {
document.getElementById('SPIFFS_loader').style.visibility = "hidden";
document.getElementById('refreshSPIFFSbtn').style.display = 'block';
document.getElementById('refreshSPIFFSbtn').style.display = 'block';
alertdlg(translate_text_item("Error"), "Error " + errorcode + " : " + response);
console.log("Error " + errorcode + " : " + response);
}

function SPIFFSdispatchfilestatus(jsonresponse) {
var content = "";
content = translate_text_item("Total:") + " " + jsonresponse.total;
content += "&nbsp;&nbsp;|&nbsp;&nbsp;" + translate_text_item("Used:") + " " + jsonresponse.used;
content += "&nbsp;";
content += "<meter min='0' max='100' high='90' value='" + jsonresponse.occupation + "'></meter>&nbsp;" + jsonresponse.occupation + "%";
if (jsonresponse.status != "Ok") content += "<br>" + translate_text_item(jsonresponse.status);
document.getElementById('SPIFFS_status').innerHTML = content;
content = "";
if (SPIFFS_currentpath != "/") {
var pos = SPIFFS_currentpath.lastIndexOf("/", SPIFFS_currentpath.length - 2)
var previouspath = SPIFFS_currentpath.slice(0, pos + 1);
content += "<tr style='cursor:pointer;' onclick=\"SPIFFS_currentpath='" + previouspath + "'; SPIFFSSendCommand('list','all');\"><td >" + get_icon_svg("level-up") + "</td><td colspan='4'> Up..</td></tr>";
}
jsonresponse.files.sort(function(a, b) {
return compareStrings(a.name, b.name);
});

for (var i = 0; i < jsonresponse.files.length; i++) {
//first display files
if (String(jsonresponse.files[i].size) != "-1") {
content += "<tr>";
content += "<td  style='vertical-align:middle; color:#5BC0DE'>" + get_icon_svg("file") + "</td>";
content += "<td  width='100%'  style='vertical-align:middle'><a href=\"" + jsonresponse.path + jsonresponse.files[i].name + "\" target=_blank><button  class=\"btn btn-link no_overflow\">";
content += jsonresponse.files[i].name;
content += "</button></a></td><td nowrap  style='vertical-align:middle'>";
content += jsonresponse.files[i].size;
content += "</td><td width='0%'  style='vertical-align:middle'><button class=\"btn btn-danger btn-xs\" style='padding: 5px 5px 0px 5px;' onclick=\"SPIFFSDelete('" + jsonresponse.files[i].name + "')\">";
content += get_icon_svg("trash");
content += "</button></td></tr>";
}
}

//then display directories
for (var i = 0; i < jsonresponse.files.length; i++) {
if (String(jsonresponse.files[i].size) == "-1") {
content += "<tr>";
content += "<td style='vertical-align:middle ; color:#5BC0DE'>" + get_icon_svg("folder-close") + "</td>";
content += "<td width='100%'  style='vertical-align:middle'><button class=\"btn btn-link\" onclick=\"SPIFFSselect_dir('" + jsonresponse.files[i].name + "');\">";
content += jsonresponse.files[i].name;
content += "</button></td><td>";
content += "</td><td width='0%' style='vertical-align:middle'><button class=\"btn btn-danger btn-xs\" style='padding: 5px 4px 0px 4px;' onclick=\"SPIFFSDeletedir('" + jsonresponse.files[i].name + "')\">";
content += get_icon_svg("trash");
content += "</button></td></tr>";
}

}

document.getElementById('SPIFFS_file_list').innerHTML = content;
document.getElementById('SPIFFS_path').innerHTML = SPIFFSnavbar();
}

function refreshSPIFFS() {
document.getElementById('SPIFFS-select').value = "";
document.getElementById('uploadSPIFFSmsg').innerHTML = "";
document.getElementById("SPIFFS_file_name").innerHTML = translate_text_item("No file chosen");
document.getElementById('SPIFFS_uploadbtn').style.display = 'none';
document.getElementById('refreshSPIFFSbtn').style.display = 'none';
document.getElementById("SPIFFS_select_files").style.display = 'none';
//endRemoveIf(production)
SPIFFSSendCommand('list', 'all');
}

function checkSPIFFSfiles() {
var files = document.getElementById('SPIFFS-select').files;
document.getElementById('uploadSPIFFSmsg').style.display = 'none';
if (files.length == 0) document.getElementById('SPIFFS_uploadbtn').style.display = 'none';
else document.getElementById('SPIFFS_uploadbtn').style.display = 'block';
if (files.length > 0) {
if (files.length == 1) {
document.getElementById("SPIFFS_file_name").innerHTML = files[0].name;
} else {
var tmp = translate_text_item("$n files");
document.getElementById("SPIFFS_file_name").innerHTML = tmp.replace("$n", files.length);
}
} else {
document.getElementById("SPIFFS_file_name").innerHTML = translate_text_item("No file chosen");
}
}

function SPIFFSUploadProgressDisplay(oEvent) {
if (oEvent.lengthComputable) {
var percentComplete = (oEvent.loaded / oEvent.total) * 100;
document.getElementById('SPIFFS_prg').value = percentComplete;
document.getElementById('uploadSPIFFSmsg').innerHTML = translate_text_item("Uploading ") + SPIFFS_currentfile + " " + percentComplete.toFixed(0) + "%";
} else {
// Impossible because size is unknown
}
}

function SPIFFS_UploadFile() {
if (http_communication_locked) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Communications are currently locked, please wait and retry."));
return;
}
var files = document.getElementById('SPIFFS-select').files
var formData = new FormData();
var url = "/files";
formData.append('path', SPIFFS_currentpath);
for (var i = 0; i < files.length; i++) {
var file = files[i];
var arg = SPIFFS_currentpath + file.name + "S";
//append file size first to check updload is complete
formData.append(arg, file.size);
formData.append('myfile[]', file, SPIFFS_currentpath + file.name);
}
document.getElementById('SPIFFS-select_form').style.display = 'none';
document.getElementById('SPIFFS_uploadbtn').style.display = 'none';
SPIFFS_upload_ongoing = true;
document.getElementById('uploadSPIFFSmsg').style.display = 'block';
document.getElementById('SPIFFS_prg').style.display = 'block';
if (files.length == 1) SPIFFS_currentfile = files[0].name;
else SPIFFS_currentfile = "";
document.getElementById('uploadSPIFFSmsg').innerHTML = translate_text_item("Uploading ") + SPIFFS_currentfile;
SendFileHttp(url, formData, SPIFFSUploadProgressDisplay, SPIFFSUploadsuccess, SPIFFSUploadfailed)
}

function SPIFFSUploadsuccess(response) {
document.getElementById('SPIFFS-select').value = "";
document.getElementById("SPIFFS_file_name").innerHTML = translate_text_item("No file chosen");
document.getElementById('SPIFFS-select_form').style.display = 'block';
document.getElementById('SPIFFS_prg').style.display = 'none';
document.getElementById('SPIFFS_uploadbtn').style.display = 'none';
document.getElementById('uploadSPIFFSmsg').innerHTML = "";
document.getElementById('refreshSPIFFSbtn').style.display = 'block';
SPIFFS_upload_ongoing = false;
response = response.replace("\"status\":\"Ok\"", "\"status\":\"Upload done\"");
var jsonresponse = JSON.parse(response);
SPIFFSdispatchfilestatus(jsonresponse);
}

function SPIFFSUploadfailed(errorcode, response) {
document.getElementById('SPIFFS-select_form').style.display = 'block';
document.getElementById('SPIFFS_prg').style.display = 'none';
document.getElementById('SPIFFS_uploadbtn').style.display = 'block';
document.getElementById('uploadSPIFFSmsg').innerHTML = "";
document.getElementById("uploadSPIFFSmsg").style.display = 'none';
document.getElementById('refreshSPIFFSbtn').style.display = 'block';
console.log("Error " + errorcode + " : " + response);
if (esp_error_code !=0){
alertdlg (translate_text_item("Error") + " (" + esp_error_code + ")", esp_error_message);
document.getElementById('SPIFFS_status').innerHTML = translate_text_item("Error : ") + esp_error_message;
esp_error_code = 0;
} else {
alertdlg (translate_text_item("Error"), "Error " + errorcode + " : " + response);
document.getElementById('SPIFFS_status').innerHTML = translate_text_item("Upload failed : ") + errorcode;
}
SPIFFS_upload_ongoing = false;
refreshSPIFFS();
}

</script>
<script>
var statuspage = 0;
var statuscontent = "";
//status dialog
function statusdlg() {
var modal = setactiveModal('statusdlg.html');
if (modal == null) return;
showModal();
refreshstatus();
update_btn_status(0);
}

function next_status() {
var modal = getactiveModal();
var text = modal.element.getElementsByClassName("modal-text")[0];
if (statuspage == 0) {
text.innerHTML = statuscontent;
} else {
text.innerHTML = "<table><tr><td width='auto' style='vertical-align:top;'><label translate>Browser:</label></td><td>&nbsp;</td><td width='100%'><span class='text-info'><strong>" + navigator.userAgent + "</strong></span></td></tr></table>";
}
update_btn_status();
}

function update_btn_status(forcevalue) {
if (typeof forcevalue !== 'undefined') {
statuspage = forcevalue;
}
if (statuspage == 0) {
statuspage = 1;
document.getElementById('next_status_btn').innerHTML = get_icon_svg("triangle-right", "1em", "1em")
} else {
statuspage = 0;
document.getElementById('next_status_btn').innerHTML = get_icon_svg("triangle-left", "1em", "1em")
}
}

function statussuccess(response) {
document.getElementById('refreshstatusbtn').style.display = 'block';
document.getElementById('status_loader').style.display = 'none';
var modal = getactiveModal();
if (modal == null) return;
var text = modal.element.getElementsByClassName("modal-text")[0];
var tresponse = response.split("\n");
statuscontent = "";
for (var i = 0; i < tresponse.length; i++) {
var data = tresponse[i].split(":");
if (data.length >= 2) {
statuscontent += "<label>" + translate_text_item(data[0]) + ": </label>&nbsp;<span class='text-info'><strong>";
var data2 = data[1].split(" (")
statuscontent += translate_text_item(data2[0].trim());
for (v = 1; v < data2.length; v++) {
statuscontent += " (" + data2[v];
}
for (v = 2; v < data.length; v++) {
statuscontent += ":" + data[v];
}
statuscontent += "</strong></span><br>";
} //else statuscontent += tresponse[i] + "<br>";
}
statuscontent += "<label>" + translate_text_item("WebUI version") + ": </label>&nbsp;<span class='text-info'><strong>";
statuscontent += web_ui_version
statuscontent += "</strong></span><br>";
text.innerHTML = statuscontent;
update_btn_status(0);
//console.log(response);
}

function statusfailed(errorcode, response) {
document.getElementById('refreshstatusbtn').style.display = 'block';
document.getElementById('status_loader').style.display = 'none';
document.getElementById('status_msg').style.display = 'block';
console.log("Error " + errorcode + " : " + response);
document.getElementById('status_msg').innerHTML = "Error " + errorcode + " : " + response;
}

function refreshstatus() {
document.getElementById('refreshstatusbtn').style.display = 'none';
document.getElementById('status_loader').style.display = 'block';
var modal = getactiveModal();
if (modal == null) return;
var text = modal.element.getElementsByClassName("modal-text")[0];
text.innerHTML = "";
document.getElementById('status_msg').style.display = 'none';
//endRemoveIf(production)
var url = "/command?plain=" + encodeURIComponent("[ESP420]plain");;
SendGetHttp(url, statussuccess, statusfailed)
}

</script>
<script>
var update_ongoing = false;
var current_update_filename = "";
//update dialog
function updatedlg() {
var modal = setactiveModal('updatedlg.html');
if (modal == null) return;
document.getElementById("fw_file_name").innerHTML = translate_text_item("No file chosen");
document.getElementById('prgfw').style.display = 'none';
document.getElementById('uploadfw-button').style.display = 'none';
document.getElementById('updatemsg').innerHTML = "";
document.getElementById('fw-select').value = "";
if (target_firmware == "grbl-embedded") document.getElementById('fw_update_dlg_title').innerHTML = translate_text_item("ESP3D Update").replace("ESP3D", "GRBL_ESP32");
if (target_firmware == "marlin-embedded") document.getElementById('fw_update_dlg_title').innerHTML = translate_text_item("ESP3D Update").replace("ESP3D", "Marlin");
showModal();
}

function closeUpdateDialog(msg) {
if (update_ongoing) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Update is ongoing, please wait and retry."));
return;
}
closeModal(msg);
}

function checkupdatefile() {
var files = document.getElementById('fw-select').files;
document.getElementById('updatemsg').style.display = 'none';
if (files.length == 0) document.getElementById('uploadfw-button').style.display = 'none';
else document.getElementById('uploadfw-button').style.display = 'block';
if (files.length > 0) {
if (files.length == 1) {
document.getElementById("fw_file_name").innerHTML = files[0].name;
} else {
var tmp = translate_text_item("$n files");
document.getElementById("fw_file_name").innerHTML = tmp.replace("$n", files.length);
}
} else {
document.getElementById("fw_file_name").innerHTML = translate_text_item("No file chosen");
}
}


function UpdateProgressDisplay(oEvent) {
if (oEvent.lengthComputable) {
var percentComplete = (oEvent.loaded / oEvent.total) * 100;
document.getElementById('prgfw').value = percentComplete;
document.getElementById('updatemsg').innerHTML = translate_text_item("Uploading ") + current_update_filename + " " + percentComplete.toFixed(0) + "%";
} else {
// Impossible because size is unknown
}
}

function UploadUpdatefile() {
confirmdlg(translate_text_item("Please confirm"), translate_text_item("Update Firmware ?"), StartUploadUpdatefile)
}



function StartUploadUpdatefile(response) {
if (response != "yes") return;
if (http_communication_locked) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Communications are currently locked, please wait and retry."));
return;
}
var files = document.getElementById('fw-select').files
var formData = new FormData();
var url = "/updatefw";
for (var i = 0; i < files.length; i++) {
var file = files[i];
var arg = "/" + file.name + "S";
//append file size first to check updload is complete
formData.append(arg, file.size);
formData.append('myfile[]', file, "/" + file.name);
}
document.getElementById('fw-select_form').style.display = 'none';
document.getElementById('uploadfw-button').style.display = 'none';
update_ongoing = true;
document.getElementById('updatemsg').style.display = 'block';
document.getElementById('prgfw').style.display = 'block';
if (files.length == 1) current_update_filename = files[0].name;
else current_update_filename = "";
document.getElementById('updatemsg').innerHTML = translate_text_item("Uploading ") + current_update_filename;
SendFileHttp(url, formData, UpdateProgressDisplay, updatesuccess, updatefailed)
}

function updatesuccess(response) {
document.getElementById('updatemsg').innerHTML = translate_text_item("Restarting, please wait....");
document.getElementById("fw_file_name").innerHTML = "";
var i = 0;
var interval;
var x = document.getElementById("prgfw");
x.max = 40;
interval = setInterval(function() {
i = i + 1;
var x = document.getElementById("prgfw");
x.value = i;
document.getElementById('updatemsg').innerHTML = translate_text_item("Restarting, please wait....") + (41 - i) + translate_text_item(" seconds");
if (i > 40) {
update_ongoing = false;
clearInterval(interval);
location.reload();
}
}, 1000);
//console.log(response);
}

function updatefailed(errorcode, response) {
document.getElementById('fw-select_form').style.display = 'block';
document.getElementById('prgfw').style.display = 'none';
document.getElementById("fw_file_name").innerHTML = translate_text_item("No file chosen");
document.getElementById('uploadfw-button').style.display = 'none';
//document.getElementById('updatemsg').innerHTML = "";
document.getElementById('fw-select').value = "";
if (esp_error_code !=0){
alertdlg (translate_text_item("Error") + " (" + esp_error_code + ")", esp_error_message);
document.getElementById('updatemsg').innerHTML = translate_text_item("Upload failed : ") + esp_error_message;
esp_error_code = 0;
} else {
alertdlg (translate_text_item("Error"), "Error " + errorcode + " : " + response);
document.getElementById('updatemsg').innerHTML = translate_text_item("Upload failed : ") + errorcode + " :" + response;
}
console.log("Error " + errorcode + " : " + response);
update_ongoing = false;
SendGetHttp("/updatefw");
}

</script>
<!--script src="js/setupdlg.js"></script-->
<!-- prh setupdlg.js does not exist -->
<script>
//Macro dialog
var macrodlg_macrolist = [];

function showmacrodlg(closefn) {
var modal = setactiveModal('macrodlg.html', closefn);
if (modal == null) return;
build_dlg_macrolist_ui();
document.getElementById('macrodlg_upload_msg').style.display = 'none';
showModal();
}

function build_color_selection(index) {
var content = "";
var entry = macrodlg_macrolist[index];
var menu_pos = "down";
if (index > 3) menu_pos = "up";
content += "<div class='dropdownselect'  id='macro_color_line" + index + "'>";
content += "<button class='btn " + entry.class + "' onclick='showhide_drop_menu(event)'>&nbsp;";
content += "<svg width='0.8em' height='0.8em' viewBox='0 0 1300 1200' style='pointer-events:none'>";
content += "<g transform='translate(50,1200) scale(1, -1)'>";
content += "<path  fill='currentColor' d='M100 900h1000q41 0 49.5 -21t-20.5 -50l-494 -494q-14 -14 -35 -14t-35 14l-494 494q-29 29 -20.5 50t49.5 21z'></path>";
content += "</g>";
content += "</svg>";
content += "</button>";
content += "<div class='dropmenu-content dropmenu-content-" + menu_pos + "' style='min-width:auto; padding-left: 4px;padding-right: 4px;'>";
content += "<button class='btn btn-default' onclick='macro_select_color(event, \"default\" ," + index + ")'>&nbsp;</button>";
content += "<button class='btn btn-primary' onclick='macro_select_color(event, \"primary\" ," + index + ")'>&nbsp;</button>";
content += "<button class='btn btn-info' onclick='macro_select_color(event, \"info\" ," + index + ")'>&nbsp;</button>";
content += "<button class='btn btn-warning' onclick='macro_select_color(event, \"warning\" ," + index + ")'>&nbsp;</button>";
content += "<button class='btn btn-danger'  onclick='macro_select_color(event, \"danger\" ," + index + ")'>&nbsp;</button>";
content += "</div>";
content += "</div>";
return content;
}

function build_target_selection(index) {
var content = "";
var entry = macrodlg_macrolist[index];
var menu_pos = "down";
if (index > 3) menu_pos = "up";
content += "<div class='dropdownselect'  id='macro_target_line" + index + "'>";
content += "<button class='btn btn-default' style='min-width:5em;' onclick='showhide_drop_menu(event)'><span>" + entry.target + "</span>";
content += "<svg width='0.8em' height='0.8em' viewBox='0 0 1300 1200' style='pointer-events:none'>";
content += "<g transform='translate(50,1200) scale(1, -1)'>";
content += "<path  fill='currentColor' d='M100 900h1000q41 0 49.5 -21t-20.5 -50l-494 -494q-14 -14 -35 -14t-35 14l-494 494q-29 29 -20.5 50t49.5 21z'></path>";
content += "</g>";
content += "</svg>";
content += "</button>";
content += "<div class='dropmenu-content dropmenu-content-" + menu_pos + "' style='min-width:auto'>";
content += "<a href=# onclick='macro_select_target(event, \"ESP\" ," + index + ")'>ESP</a>";
content += "<a href=# onclick='macro_select_target(event, \"SD\" ," + index + ")'>SD</a>";
content += "<a href=# onclick='macro_select_target(event, \"URI\" ," + index + ")'>URI</a>"
content += "</div>";
content += "</div>";
return content;
}

function build_glyph_selection(index) {
var content = "";
var entry = macrodlg_macrolist[index];
var menu_pos = "down";
if (index > 3) menu_pos = "up";
content += "<div class='dropdownselect'  id='macro_glyph_line" + index + "'>";
content += "<button class='btn " + entry.class + "' onclick='showhide_drop_menu(event)'><span>" + get_icon_svg(entry.glyph) + "</span>&nbsp;";
content += "<svg width='0.8em' height='0.8em' viewBox='0 0 1300 1200' style='pointer-events:none'>";
content += "<g transform='translate(50,1200) scale(1, -1)'>";
content += "<path  fill='currentColor' d='M100 900h1000q41 0 49.5 -21t-20.5 -50l-494 -494q-14 -14 -35 -14t-35 14l-494 494q-29 29 -20.5 50t49.5 21z'></path>";
content += "</g>";
content += "</svg>";
content += "</button>";
content += "<div class='dropmenu-content  dropmenu-content-" + menu_pos + "' style='min-width:30em'>";
for (var key in list_icon) {
if (key != "plus") {
content += "<button class='btn btn-default btn-xs' onclick='macro_select_glyph(event, \"" + key + "\" ," + index + ")'><span>" + get_icon_svg(key) + "</span>";
content += "</button>";
}
}
content += "</div>";
content += "</div>";
return content;
}

function build_filename_selection(index) {
var content = "";
var entry = macrodlg_macrolist[index];
content += "<span id='macro_filename_input_line_" + index + "' class='form-group "
if (entry.filename.length == 0) content += "has-error has-feedback"
content += "'>";
content += "<input type='text' id='macro_filename_line_" + index + "' style='width:9em' class='form-control' onkeyup='macro_filename_OnKeyUp(this," + index + ")'  onchange='on_macro_filename(this," + index + ")' value='" + entry.filename + "'  aria-describedby='inputStatus_line" + index + "'>";
content += "<span id='icon_macro_status_line_" + index + "' style='color:#a94442; position:absolute;bottom:4px;left:7.5em;";
if (entry.filename.length > 0) content += "display:none";
content += "'>" + get_icon_svg("remove") + "</span>";
content += "</input></span>";
return content;
}

function build_dlg_macrolist_line(index) {
var content = "";
var entry = macrodlg_macrolist[index];
content += "<td style='vertical-align:middle'>";
content += "<button onclick='macro_reset_button(" + index + ")'  class='btn btn-xs ";
if (entry.class == '') {
content += "btn-default'  style='padding-top: 3px;padding-left: 4px;padding-right: 2px;padding-bottom: 0px;' >" + get_icon_svg("plus") + " </button></td><td colspan='5'>";
} else {
content += "btn-danger' style='padding-top: 3px;padding-left: 2px;padding-right: 3px;padding-bottom: 0px;' >" + get_icon_svg("trash") + "</button></td>";
content += "<td style='vertical-align:middle'><input type='text' id='macro_name_line_" + index + "' style='width:4em' class='form-control' onchange='on_macro_name(this," + index + ")' value='";
if (entry.name != "&nbsp;") {
content += entry.name;
}
content += "'/></td>";
content += "<td style='vertical-align:middle'>" + build_glyph_selection(index) + "</td>";
content += "<td style='vertical-align:middle'>" + build_color_selection(index) + "</td>";
content += "<td style='vertical-align:middle'>" + build_target_selection(index) + "</td>";
content += "<td style='vertical-align:middle'>" + build_filename_selection(index) + "</td>";
}
content += "</td>";
document.getElementById('macro_line_' + index).innerHTML = content;
}

function macro_filename_OnKeyUp(event, index) {
var item = document.getElementById("macro_filename_line_" + index);
var group = document.getElementById("macro_filename_input_line_" + index);
var value = item.value.trim();
if (value.length > 0) {
if (group.classList.contains('has-feedback')) group.classList.remove('has-feedback');
if (group.classList.contains('has-error')) group.classList.remove('has-error');
document.getElementById("icon_macro_status_line_" + index).style.display = 'none';
} else {
document.getElementById("icon_macro_status_line_" + index).style.display = 'block';
if (!group.classList.contains('has-error')) group.classList.add('has-error');
if (!group.classList.contains('has-feedback')) group.classList.add('has-feedback');
}
return true;
}

function on_macro_filename(item, index) {
var entry = macrodlg_macrolist[index];
var filename = item.value.trim();
entry.filename = item.value;
if (filename.length == 0) {
alertdlg(translate_text_item("Out of range"), translate_text_item("File name cannot be empty!"));
}
build_dlg_macrolist_line(index);
}

function on_macro_name(item, index) {
var entry = macrodlg_macrolist[index];
var macroname = item.value.trim();
if (macroname.length > 0) {
entry.name = item.value;
} else {
entry.name = "&nbsp;";
}
}

function build_dlg_macrolist_ui() {
var content = "";
macrodlg_macrolist = [];
for (var i = 0; i < 9; i++) {
var entry = {
name: control_macrolist[i].name,
glyph: control_macrolist[i].glyph,
filename: control_macrolist[i].filename,
target: control_macrolist[i].target,
class: control_macrolist[i].class,
index: control_macrolist[i].index
};
macrodlg_macrolist.push(entry);
content += "<tr style='vertical-align:middle' id='macro_line_" + i + "'>";
content += "</tr>";
}

document.getElementById('dlg_macro_list').innerHTML = content;
for (var i = 0; i < 9; i++) build_dlg_macrolist_line(i);
}

function macro_reset_button(index) {
var entry = macrodlg_macrolist[index];
if (entry.class == "") {
entry.name = "M" + (1 + entry.index);
entry.glyph = "star";
entry.filename = "/macro" + (1 + entry.index) + ".g";
entry.target = "ESP";
entry.class = "btn-default";
} else {
entry.name = "";
entry.glyph = "";
entry.filename = "";
entry.target = "";
entry.class = "";
}
build_dlg_macrolist_line(index);
}

function macro_select_color(event, color, index) {
var entry = macrodlg_macrolist[index];
hide_drop_menu(event);
entry.class = "btn btn-" + color;
build_dlg_macrolist_line(index);
}

function macro_select_target(event, target, index) {
var entry = macrodlg_macrolist[index];
hide_drop_menu(event);
entry.target = target;
build_dlg_macrolist_line(index)
}

function macro_select_glyph(event, glyph, index) {
var entry = macrodlg_macrolist[index];
hide_drop_menu(event);
entry.glyph = glyph;
build_dlg_macrolist_line(index)
}

function closeMacroDialog() {
var modified = false;
for (var i = 0; i < 9; i++) {
if ((macrodlg_macrolist[i].filename !== control_macrolist[i].filename) || (macrodlg_macrolist[i].name !== control_macrolist[i].name) || (macrodlg_macrolist[i].glyph !== control_macrolist[i].glyph) || (macrodlg_macrolist[i].class !== control_macrolist[i].class) || (macrodlg_macrolist[i].target !== control_macrolist[i].target)) {
modified = true;
}
}
if (modified) {
confirmdlg(translate_text_item("Data mofified"), translate_text_item("Do you want to save?"), process_macroCloseDialog)
} else closeModal('cancel');
}

function process_macroCloseDialog(answer) {
if (answer == 'no') {
//console.log("Answer is no so exit");
closeModal('cancel');
} else {
// console.log("Answer is yes so let's save");
SaveNewMacroList();
}
}

function SaveNewMacroList() {
if (http_communication_locked) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Communications are currently locked, please wait and retry."));
return;
}
for (var i = 0; i < 9; i++) {
if (macrodlg_macrolist[i].filename.length == 0 && macrodlg_macrolist[i].class != "") {
alertdlg(translate_text_item("Out of range"), translate_text_item("File name cannot be empty!"));
return;
}
}

var blob = new Blob([JSON.stringify(macrodlg_macrolist, null, " ")], {
type: 'application/json'
});
var file;
if (browser_is("IE") || browser_is("Edge")) {
file = blob;
file.name = '/macrocfg.json';
file.lastModifiedDate = new Date();
} else file = new File([blob], '/macrocfg.json');
var formData = new FormData();
var url = "/files";
formData.append('path', '/');
formData.append('myfile[]', file, '/macrocfg.json');
SendFileHttp(url, formData, macrodlgUploadProgressDisplay, macroUploadsuccess, macroUploadfailed)
}

function macrodlgUploadProgressDisplay(oEvent) {
if (oEvent.lengthComputable) {
var percentComplete = (oEvent.loaded / oEvent.total) * 100;
document.getElementById('macrodlg_prg').value = percentComplete;
document.getElementById('macrodlg_upload_percent').innerHTML = percentComplete.toFixed(0);
document.getElementById('macrodlg_upload_msg').style.display = 'block';
} else {
// Impossible because size is unknown
}
}

function macroUploadsuccess(response) {
control_macrolist = [];
for (var i = 0; i < 9; i++) {
var entry;
if ((macrodlg_macrolist.length != 0)) {
entry = {
name: macrodlg_macrolist[i].name,
glyph: macrodlg_macrolist[i].glyph,
filename: macrodlg_macrolist[i].filename,
target: macrodlg_macrolist[i].target,
class: macrodlg_macrolist[i].class,
index: macrodlg_macrolist[i].index
};
} else {
entry = {
name: '',
glyph: '',
filename: '',
target: '',
class: '',
index: i
};
}
control_macrolist.push(entry);
}
document.getElementById('macrodlg_upload_msg').style.display = 'none';
closeModal('ok');
}

function macroUploadfailed(errorcode, response) {
alertdlg(translate_text_item("Error"), translate_text_item("Save macro list failed!"));
document.getElementById('macrodlg_upload_msg').style.display = 'none';
}

</script>
<script>
var language = 'en';


var language_list = [
//removeIf(de_lang_disabled)
['de', 'Deutsch', 'germantrans'],
//endRemoveIf(de_lang_disabled)
//removeIf(en_lang_disabled)
['en', 'English', 'englishtrans'],
//endRemoveIf(en_lang_disabled)
//removeIf(es_lang_disabled)
['es', 'Espa&ntilde;ol', 'spanishtrans'],
//endRemoveIf(es_lang_disabled)
//removeIf(fr_lang_disabled)
['fr', 'Fran&ccedil;ais', 'frenchtrans'],
//endRemoveIf(fr_lang_disabled)
//removeIf(it_lang_disabled)
['it', 'Italiano', 'italiantrans'],
//endRemoveIf(it_lang_disabled)
//removeIf(ja_lang_disabled)
['ja', '&#26085;&#26412;&#35486;', 'japanesetrans'],
//endRemoveIf(ja_lang_disabled)
//removeIf(hu_lang_disabled)
['hu', 'Magyar', 'hungariantrans'],
//endRemoveIf(hu_lang_disabled)
//removeIf(pl_lang_disabled)
['pl', 'Polski', 'polishtrans'],
//endRemoveIf(pl_lang_disabled)
//removeIf(ptbr_lang_disabled)
['ptbr', 'Portugus-Br', 'ptbrtrans'],
//endRemoveIf(ptbr_lang_disabled)
//removeIf(ru_lang_disabled)
['ru', '', 'russiantrans'],
//endRemoveIf(ru_lang_disabled)
//removeIf(tr_lang_disabled)
['tr', 'T&uuml;rk&ccedil;e', 'turkishtrans'],
//endRemoveIf(tr_lang_disabled)
//removeIf(uk_lang_disabled)
['uk', '', 'ukrtrans'],
//endRemoveIf(uk_lang_disabled)
//removeIf(zh_cn_lang_disabled)
['zh_CN', '&#31616;&#20307;&#20013;&#25991;', 'zh_CN_trans'],
//endRemoveIf(zh_cn_lang_disabled)
];

//endRemoveIf(production)

function build_language_list(id_item) {
var content = "<select class='form-control'  id='" + id_item + "' onchange='translate_text(this.value)'>\n";
for (var lang_i = 0; lang_i < language_list.length; lang_i++) {
content += "<option value='" + language_list[lang_i][0] + "'";
if (language_list[lang_i][0] == language) content += " selected";
content += ">" + language_list[lang_i][1] + "</option>\n";
}
content += "</select>\n";
return content;
}

function translate_text(lang) {
var currenttrans = {};
var translated_content = "";
language = lang;
for (var lang_i = 0; lang_i < language_list.length; lang_i++) {
if (language_list[lang_i][0] == lang) {
currenttrans = eval(language_list[lang_i][2]);
}
}
var All = document.getElementsByTagName('*');
for (var i = 0; i < All.length; i++) {
if (All[i].hasAttribute('translate')) {
var content = "";
if (!All[i].hasAttribute('english_content')) {
content = All[i].innerHTML;
content.trim();
All[i].setAttribute('english_content', content);
//endRemoveIf(production)
}
content = All[i].getAttribute('english_content');
translated_content = translate_text_item(content);

All[i].innerHTML = translated_content;
}
//add support for placeholder attribut
if (All[i].hasAttribute('translateph') && All[i].hasAttribute('placeholder')) {
var content = "";
if (!All[i].hasAttribute('english_content')) {
content = All[i].getAttribute('placeholder');
content.trim();
//endRemoveIf(production)
All[i].setAttribute('english_content', content);
}
content = All[i].getAttribute('english_content');

translated_content = decode_entitie(translate_text_item(content));
All[i].setAttribute('placeholder', translated_content)
}
}
};

function translate_text_item(item_text, withtag) {
var currenttrans = {};
var translated_content;
var with_tag = false;
if (typeof withtag != "undefined") with_tag = withtag;
for (var lang_i = 0; lang_i < language_list.length; lang_i++) {
if (language_list[lang_i][0] == language) {
currenttrans = eval(language_list[lang_i][2]);
}
}
translated_content = currenttrans[item_text];
if (typeof translated_content === 'undefined') translated_content = item_text;
if (with_tag) {
var translated_content_tmp = "<span english_content=\"" + item_text + "\" translate>" + translated_content + "</span>";
translated_content = translated_content_tmp;
}
return translated_content;
}

</script>
<!-- prh moved translate above preferencesdlg -->
<script>
//Preferences dialog
var preferenceslist = [];
var language_save = language;
var default_preferenceslist = [];
var defaultpreferenceslist = "[{\
\"language\":\"en\",\
\"enable_lock_UI\":\"false\",\
\"enable_ping\":\"true\",\
\"enable_DHT\":\"false\",\
\"enable_camera\":\"false\",\
\"auto_load_camera\":\"false\",\
\"camera_address\":\"\",\
\"number_extruders\":\"1\",\
\"is_mixed_extruder\":\"false\",\
\"enable_redundant\":\"false\",\
\"enable_probe\":\"false\",\
\"enable_bed\":\"false\",\
\"enable_chamber\":\"false\",\
\"enable_fan\":\"false\",\
\"enable_control_panel\":\"true\",\
\"enable_grbl_panel\":\"false\",\
\"interval_positions\":\"3\",\
\"interval_temperatures\":\"3\",\
\"interval_status\":\"3\",\
\"xy_feedrate\":\"1000\",\
\"z_feedrate\":\"100\",\
\"a_feedrate\":\"100\",\
\"b_feedrate\":\"100\",\
\"c_feedrate\":\"100\",\
\"e_feedrate\":\"400\",\
\"e_distance\":\"5\",\
\"f_filters\":\"gco;gcode\",\
\"enable_temperatures_panel\":\"true\",\
\"enable_extruder_panel\":\"true\",\
\"enable_files_panel\":\"true\",\
\"has_TFT_SD\":\"false\",\
\"has_TFT_USB\":\"false\",\
\"enable_commands_panel\":\"true\",\
\"enable_autoscroll\":\"true\",\
\"enable_verbose_mode\":\"true\",\
\"enable_grbl_probe_panel\":\"false\",\
\"probemaxtravel\":\"40\",\
\"probefeedrate\":\"100\",\
\"probetouchplatethickness\":\"0.5\"\
}]";
var preferences_file_name = '/preferences.json';

function initpreferences() {
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) {
defaultpreferenceslist = "[{\
\"language\":\"en\",\
\"enable_lock_UI\":\"false\",\
\"enable_ping\":\"true\",\
\"enable_DHT\":\"false\",\
\"enable_camera\":\"false\",\
\"auto_load_camera\":\"false\",\
\"camera_address\":\"\",\
\"number_extruders\":\"1\",\
\"is_mixed_extruder\":\"false\",\
\"enable_redundant\":\"false\",\
\"enable_probe\":\"false\",\
\"enable_bed\":\"false\",\
\"enable_chamber\":\"false\",\
\"enable_fan\":\"false\",\
\"enable_control_panel\":\"true\",\
\"enable_grbl_panel\":\"true\",\
\"interval_positions\":\"3\",\
\"interval_temperatures\":\"3\",\
\"interval_status\":\"3\",\
\"xy_feedrate\":\"1000\",\
\"z_feedrate\":\"100\",\
\"a_feedrate\":\"100\",\
\"b_feedrate\":\"100\",\
\"c_feedrate\":\"100\",\
\"e_feedrate\":\"400\",\
\"e_distance\":\"5\",\
\"enable_temperatures_panel\":\"false\",\
\"enable_extruder_panel\":\"false\",\
\"enable_files_panel\":\"true\",\
\"has_TFT_SD\":\"false\",\
\"has_TFT_USB\":\"false\",\
\"f_filters\":\"g;G;gco;GCO;gcode;GCODE;nc;NC;ngc;NCG;tap;TAP;txt;TXT\",\
\"enable_commands_panel\":\"true\",\
\"enable_autoscroll\":\"true\",\
\"enable_verbose_mode\":\"true\",\
\"enable_grbl_probe_panel\":\"false\",\
\"probemaxtravel\":\"40\",\
\"probefeedrate\":\"100\",\
\"probetouchplatethickness\":\"0.5\"\
}]";

document.getElementById('DHT_pref_panel').style.display = 'none';
document.getElementById('temp_pref_panel').style.display = 'none';
document.getElementById('ext_pref_panel').style.display = 'none';
document.getElementById('grbl_pref_panel').style.display = 'block';
document.getElementById('has_tft_sd').style.display = 'table-row';
document.getElementById('has_tft_usb').style.display = 'table-row';
} else {
defaultpreferenceslist = "[{\
\"language\":\"en\",\
\"enable_lock_UI\":\"false\",\
\"enable_ping\":\"true\",\
\"enable_DHT\":\"false\",\
\"enable_camera\":\"false\",\
\"auto_load_camera\":\"false\",\
\"camera_address\":\"\",\
\"number_extruders\":\"1\",\
\"is_mixed_extruder\":\"false\",\
\"enable_redundant\":\"false\",\
\"enable_probe\":\"false\",\
\"enable_bed\":\"false\",\
\"enable_chamber\":\"false\",\
\"enable_fan\":\"false\",\
\"enable_control_panel\":\"true\",\
\"enable_grbl_panel\":\"true\",\
\"interval_positions\":\"3\",\
\"interval_temperatures\":\"3\",\
\"interval_status\":\"3\",\
\"xy_feedrate\":\"1000\",\
\"z_feedrate\":\"100\",\
\"a_feedrate\":\"100\",\
\"b_feedrate\":\"100\",\
\"c_feedrate\":\"100\",\
\"e_feedrate\":\"400\",\
\"e_distance\":\"5\",\
\"enable_temperatures_panel\":\"true\",\
\"enable_extruder_panel\":\"true\",\
\"enable_files_panel\":\"true\",\
\"has_TFT_SD\":\"false\",\
\"has_TFT_USB\":\"false\",\
\"f_filters\":\"g;G;gco;GCO;gcode;GCODE\",\
\"enable_commands_panel\":\"true\",\
\"enable_autoscroll\":\"true\",\
\"enable_verbose_mode\":\"true\",\
\"enable_grbl_probe_panel\":\"false\",\
\"probemaxtravel\":\"40\",\
\"probefeedrate\":\"100\",\
\"probetouchplatethickness\":\"0.5\"\
}]";

if (target_firmware == "marlin-embedded") document.getElementById('DHT_pref_panel').style.display = 'none';
else document.getElementById('DHT_pref_panel').style.display = 'block';

document.getElementById('temp_pref_panel').style.display = 'block';
document.getElementById('ext_pref_panel').style.display = 'block';
document.getElementById('grbl_pref_panel').style.display = 'none';
document.getElementById('has_tft_sd').style.display = 'table-row';
document.getElementById('has_tft_usb').style.display = 'table-row';
}

if (supportsRedundantTemperatures()) document.getElementById('redundant_controls_option').style.display = 'block';
else document.getElementById('redundant_controls_option').style.display = 'none';
if (supportsProbeTemperatures()) document.getElementById('probe_controls_option').style.display = 'block';
else document.getElementById('probe_controls_option').style.display = 'none';
if (supportsChamberTemperatures()) document.getElementById('chamber_controls_option').style.display = 'block';
else document.getElementById('chamber_controls_option').style.display = 'none';

default_preferenceslist = JSON.parse(defaultpreferenceslist);
}

function getpreferenceslist() {
var url = preferences_file_name + "?" + Date.now();
preferenceslist = [];
//endRemoveIf(production)
SendGetHttp(url, processPreferencesGetSuccess, processPreferencesGetFailed);
}

function build_extruder_list(forcevalue) {
var nb = 2
var content = "";
var current_value = document.getElementById('preferences_control_nb_extruders').value;
if (document.getElementById('enable_mixed_E_controls').checked) {
nb = 9;
}
if (typeof forcevalue != 'undefined') nb = forcevalue;
for (var i = 1; i <= nb; i++) {
content += "<option value='" + i + "'>" + i + "</option>";
}
document.getElementById('preferences_control_nb_extruders').innerHTML = content;
if (parseInt(current_value) > nb) current_value = 1;
document.getElementById('preferences_control_nb_extruders').value = current_value;
}

function prefs_toggledisplay(id_source, forcevalue) {
if (typeof forcevalue != 'undefined') {
document.getElementById(id_source).checked = forcevalue;
}
switch (id_source) {
case 'show_files_panel':
if (document.getElementById(id_source).checked) document.getElementById("files_preferences").style.display = "block";
else document.getElementById("files_preferences").style.display = "none";
break;
case 'show_grbl_panel':
if (document.getElementById(id_source).checked) document.getElementById("grbl_preferences").style.display = "block";
else document.getElementById("grbl_preferences").style.display = "none";
break;
case 'show_camera_panel':
if (document.getElementById(id_source).checked) document.getElementById("camera_preferences").style.display = "block";
else document.getElementById("camera_preferences").style.display = "none";
break;
case 'show_control_panel':
if (document.getElementById(id_source).checked) document.getElementById("control_preferences").style.display = "block";
else document.getElementById("control_preferences").style.display = "none";
break;
case 'show_extruder_panel':
if (document.getElementById(id_source).checked) document.getElementById("extruder_preferences").style.display = "block";
else document.getElementById("extruder_preferences").style.display = "none";
break;
case 'show_temperatures_panel':
if (document.getElementById(id_source).checked) document.getElementById("temperatures_preferences").style.display = "block";
else document.getElementById("temperatures_preferences").style.display = "none";
break;
case 'show_commands_panel':
if (document.getElementById(id_source).checked) document.getElementById("cmd_preferences").style.display = "block";
else document.getElementById("cmd_preferences").style.display = "none";
break;
case 'show_grbl_probe_tab':
if (document.getElementById(id_source).checked) document.getElementById("grbl_probe_preferences").style.display = "block";
else document.getElementById("grbl_probe_preferences").style.display = "none";
break;
}
}

function processPreferencesGetSuccess(response) {
if (response.indexOf("<HTML>") == -1) Preferences_build_list(response);
else Preferences_build_list(defaultpreferenceslist);
}

function processPreferencesGetFailed(errorcode, response) {
console.log("Error " + errorcode + " : " + response);
Preferences_build_list(defaultpreferenceslist);
}

function Preferences_build_list(response_text) {
preferenceslist = [];
try {
if (response_text.length != 0) {
//console.log(response_text);
preferenceslist = JSON.parse(response_text);
} else {
preferenceslist = JSON.parse(defaultpreferenceslist);
}
} catch (e) {
console.error("Parsing error:", e);
preferenceslist = JSON.parse(defaultpreferenceslist);
}
applypreferenceslist();
}

function applypreferenceslist() {
//Assign each control state
translate_text(preferenceslist[0].language);
build_HTML_setting_list(current_setting_filter);
if (typeof document.getElementById('camtab') != "undefined") {
var camoutput = false;
if (typeof(preferenceslist[0].enable_camera) !== 'undefined') {
if (preferenceslist[0].enable_camera === 'true') {
document.getElementById('camtablink').style.display = "block";
camera_GetAddress();
if (typeof(preferenceslist[0].auto_load_camera) !== 'undefined') {
if (preferenceslist[0].auto_load_camera === 'true') {
var saddress = document.getElementById('camera_webaddress').value
camera_loadframe();
camoutput = true;
}
}
} else {
document.getElementById("maintablink").click();
document.getElementById('camtablink').style.display = "none";
}
} else {
document.getElementById("maintablink").click();
document.getElementById('camtablink').style.display = "none";
}
if (!camoutput) {
document.getElementById('camera_frame').src = "";
document.getElementById('camera_frame_display').style.display = "none";
document.getElementById('camera_detach_button').style.display = "none";
}
}
if (preferenceslist[0].enable_grbl_probe_panel === 'true') {
document.getElementById('grblprobetablink').style.display = 'block';
} else {
document.getElementById("grblcontroltablink").click();
document.getElementById('grblprobetablink').style.display = 'none';
}

if (preferenceslist[0].enable_DHT === 'true') {
document.getElementById('DHT_humidity').style.display = 'block';
document.getElementById('DHT_temperature').style.display = 'block';
} else {
document.getElementById('DHT_humidity').style.display = 'none';
document.getElementById('DHT_temperature').style.display = 'none';
}
//active_extruder
if (preferenceslist[0].is_mixed_extruder === 'true') {
document.getElementById('second_extruder_UI').style.display = 'none';
document.getElementById('first_extruder_UI').style.display = 'none';
document.getElementById('temperature_secondExtruder').style.display = 'none';
document.getElementById('mixed_extruder_UI').style.display = 'block';
temperature_second_extruder(false);
var content = "";
for (i = 0; i < preferenceslist[0].number_extruders; i++) {
content += "<option value='" + i + "'>" + i + "</option>";
}
document.getElementById('active_extruder').innerHTML = content;
} else {
document.getElementById('first_extruder_UI').style.display = 'block';
document.getElementById('mixed_extruder_UI').style.display = 'none';
if (preferenceslist[0].number_extruders == '2') {
document.getElementById('second_extruder_UI').style.display = 'block';
document.getElementById('temperature_secondExtruder').style.display = 'table-row';
temperature_second_extruder(true);
} else {
document.getElementById('second_extruder_UI').style.display = 'none';
document.getElementById('temperature_secondExtruder').style.display = 'none';
temperature_second_extruder(false);
}
}
if (preferenceslist[0].enable_lock_UI === 'true') {
document.getElementById('lock_ui_btn').style.display = 'block';
ontoggleLock(true);
} else {
document.getElementById('lock_ui_btn').style.display = 'none';
ontoggleLock(false);
}
if (preferenceslist[0].enable_ping === 'true') {
ontogglePing(true);
} else {
ontogglePing(false);
}

if (supportsRedundantTemperatures()) {
if (preferenceslist[0].enable_redundant === 'true') {
document.getElementById('temperature_redundant').style.display = 'table-row';
temperature_extruder_redundant(true);
} else {
document.getElementById('temperature_redundant').style.display = 'none';
temperature_extruder_redundant(false);
}
}
if (supportsProbeTemperatures()) {
if (preferenceslist[0].enable_probe === 'true') {
document.getElementById('temperature_probe').style.display = 'table-row';
temperature_probe(true);
} else {
document.getElementById('temperature_probe').style.display = 'none';
temperature_probe(false);
}
}
if (preferenceslist[0].enable_bed === 'true') {
document.getElementById('temperature_bed').style.display = 'table-row';
} else {
document.getElementById('temperature_bed').style.display = 'none';
}
if (supportsChamberTemperatures()) {
if (preferenceslist[0].enable_chamber === 'true') {
document.getElementById('temperature_chamber').style.display = 'table-row';
temperature_chamber(true);
} else {
document.getElementById('temperature_chamber').style.display = 'none';
temperature_chamber(false);
}
}

if (preferenceslist[0].enable_bed === 'true' ||
(preferenceslist[0].enable_chamber === 'true' && supportsChamberTemperatures()) ||
(preferenceslist[0].enable_probe === 'true' && supportsProbeTemperatures())) {
document.getElementById('bedtemperaturesgraphic').style.display = 'block';
} else {
document.getElementById('bedtemperaturesgraphic').style.display = 'none';
}

if (preferenceslist[0].enable_fan === 'true') document.getElementById('fan_UI').style.display = 'block';
else document.getElementById('fan_UI').style.display = 'none';


if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) {
if (preferenceslist[0].enable_grbl_panel === 'true') document.getElementById('grblPanel').style.display = 'flex';
else {
document.getElementById('grblPanel').style.display = 'none';
on_autocheck_status(false);
}
} else {
document.getElementById('grblPanel').style.display = 'none';
on_autocheck_status(false);
}

if (preferenceslist[0].enable_control_panel === 'true') document.getElementById('controlPanel').style.display = 'flex';
else {
document.getElementById('controlPanel').style.display = 'none';
on_autocheck_position(false);
}
if (preferenceslist[0].enable_verbose_mode === 'true') {
document.getElementById('monitor_enable_verbose_mode').checked = true;
Monitor_check_verbose_mode();
} else document.getElementById('monitor_enable_verbose_mode').checked = false;
if (preferenceslist[0].enable_temperatures_panel === 'true') {
document.getElementById('temperaturesPanel').style.display = 'block';
} else {
document.getElementById('temperaturesPanel').style.display = 'none';
on_autocheck_temperature(false);
}

if (preferenceslist[0].enable_extruder_panel === 'true') document.getElementById('extruderPanel').style.display = 'flex';
else document.getElementById('extruderPanel').style.display = 'none';

if (preferenceslist[0].enable_files_panel === 'true') document.getElementById('filesPanel').style.display = 'flex';
else document.getElementById('filesPanel').style.display = 'none';

if (preferenceslist[0].has_TFT_SD === 'true'){
document.getElementById('files_refresh_tft_sd_btn').style.display = 'flex';
}
else {
document.getElementById('files_refresh_tft_sd_btn').style.display = 'none';
}

if (preferenceslist[0].has_TFT_USB === 'true') {
document.getElementById('files_refresh_tft_usb_btn').style.display = 'flex';
}
else {
document.getElementById('files_refresh_tft_usb_btn').style.display = 'none';
}

if ((preferenceslist[0].has_TFT_SD === 'true') || (preferenceslist[0].has_TFT_USB === 'true')){
document.getElementById('files_refresh_printer_sd_btn').style.display = 'flex';
document.getElementById('files_refresh_btn').style.display = 'none';
} else {
document.getElementById('files_refresh_printer_sd_btn').style.display = 'none';
document.getElementById('files_refresh_btn').style.display = 'flex';
}

if(target_firmware == "grbl") {
document.getElementById('files_refresh_printer_sd_btn').style.display = 'none';
document.getElementById('files_refresh_btn').style.display = 'none';
document.getElementById('print_upload_btn').style.display = 'none';
document.getElementById('files_createdir_btn').style.display = "none";
}

if (preferenceslist[0].enable_commands_panel === 'true') {
document.getElementById('commandsPanel').style.display = 'flex';
if (preferenceslist[0].enable_autoscroll === 'true') {
document.getElementById('monitor_enable_autoscroll').checked = true;
Monitor_check_autoscroll();
} else document.getElementById('monitor_enable_autoscroll').checked = false;
} else document.getElementById('commandsPanel').style.display = 'none';

document.getElementById('posInterval_check').value = parseInt(preferenceslist[0].interval_positions);
document.getElementById('statusInterval_check').value = parseInt(preferenceslist[0].interval_status);
document.getElementById('control_xy_velocity').value = parseInt(preferenceslist[0].xy_feedrate);
document.getElementById('control_z_velocity').value = parseInt(preferenceslist[0].z_feedrate);
if (target_firmware == "grbl-embedded"){
if (grblaxis > 2 )axis_Z_feedrate = parseInt(preferenceslist[0].z_feedrate);
if (grblaxis > 3 )axis_A_feedrate = parseInt(preferenceslist[0].a_feedrate);
if (grblaxis > 4 )axis_B_feedrate = parseInt(preferenceslist[0].b_feedrate);
if (grblaxis > 5 )axis_C_feedrate = parseInt(preferenceslist[0].c_feedrate);

if (grblaxis > 3 ){
var letter = document.getElementById('control_select_axis').value;
switch(letter) {
case "Z":
document.getElementById('control_z_velocity').value = axis_Z_feedrate;
break;
case "A":
document.getElementById('control_z_velocity').value = axis_A_feedrate;
break;
case "B":
document.getElementById('control_z_velocity').value = axis_B_feedrate;
break;
case "C":
document.getElementById('control_z_velocity').value = axis_C_feedrate;
break;
}
}
}
document.getElementById('probemaxtravel').value = parseFloat(preferenceslist[0].probemaxtravel);
document.getElementById('probefeedrate').value = parseInt(preferenceslist[0].probefeedrate);
document.getElementById('probetouchplatethickness').value = parseFloat(preferenceslist[0].probetouchplatethickness);
document.getElementById('tempInterval_check').value = parseInt(preferenceslist[0].interval_temperatures);
document.getElementById('filament_length').value = parseInt(preferenceslist[0].e_distance);
document.getElementById('extruder_velocity').value = parseInt(preferenceslist[0].e_feedrate);
build_file_filter_list(preferenceslist[0].f_filters);
}

function showpreferencesdlg() {
var modal = setactiveModal('preferencesdlg.html');
if (modal == null) return;
language_save = language;
build_dlg_preferences_list();
document.getElementById('preferencesdlg_upload_msg').style.display = 'none';
showModal();
}

function build_dlg_preferences_list() {
//use preferenceslist to set dlg status
var content = "<table><tr><td>";
content += get_icon_svg("flag") + "&nbsp;</td><td>";
content += build_language_list("language_preferences");
content += "</td></tr></table>";
document.getElementById("preferences_langage_list").innerHTML = content;
//camera
if (typeof(preferenceslist[0].enable_camera) !== 'undefined') {
document.getElementById('show_camera_panel').checked = (preferenceslist[0].enable_camera === 'true');
} else document.getElementById('show_camera_panel').checked = false;
//autoload camera
if (typeof(preferenceslist[0].auto_load_camera) !== 'undefined') {
document.getElementById('autoload_camera_panel').checked = (preferenceslist[0].auto_load_camera === 'true');
} else document.getElementById('autoload_camera_panel').checked = false;
//camera address
if (typeof(preferenceslist[0].camera_address) !== 'undefined') {
document.getElementById('preferences_camera_webaddress').value = decode_entitie(preferenceslist[0].camera_address);
} else document.getElementById('preferences_camera_webaddress').value = "";
//DHT
if (typeof(preferenceslist[0].enable_DHT) !== 'undefined') {
document.getElementById('enable_DHT').checked = (preferenceslist[0].enable_DHT === 'true');
} else document.getElementById('enable_DHT').checked = false;
//lock UI
if (typeof(preferenceslist[0].enable_lock_UI) !== 'undefined') {
document.getElementById('enable_lock_UI').checked = (preferenceslist[0].enable_lock_UI === 'true');
} else document.getElementById('enable_lock_UI').checked = false;
//Monitor connection
if (typeof(preferenceslist[0].enable_ping) !== 'undefined') {
document.getElementById('enable_ping').checked = (preferenceslist[0].enable_ping === 'true');
} else document.getElementById('enable_ping').checked = false;
//is mixed extruder
if (typeof(preferenceslist[0].is_mixed_extruder) !== 'undefined') {
document.getElementById('enable_mixed_E_controls').checked = (preferenceslist[0].is_mixed_extruder === 'true');
} else document.getElementById('enable_mixed_E_controls').checked = false;
//build list of possible value accordingly
build_extruder_list();

//number of extruders
if (typeof(preferenceslist[0].number_extruders) !== 'undefined') {
var val = preferenceslist[0].number_extruders;
if ((val > 2) && !document.getElementById('enable_mixed_E_controls').checked) val = 1;
document.getElementById('preferences_control_nb_extruders').value = val;
} else document.getElementById('preferences_control_nb_extruders').value = '1';

//heater t0 redundant
if (typeof(preferenceslist[0].enable_redundant) !== 'undefined') {
document.getElementById('enable_redundant_controls').checked = (preferenceslist[0].enable_redundant === 'true');
} else document.getElementById('enable_redundant_controls').checked = false;
//probe
if (typeof(preferenceslist[0].enable_probe) !== 'undefined') {
document.getElementById('enable_probe_controls').checked = (preferenceslist[0].enable_probe === 'true');
} else document.getElementById('enable_probe_controls').checked = false;
//bed
if (typeof(preferenceslist[0].enable_bed) !== 'undefined') {
document.getElementById('enable_bed_controls').checked = (preferenceslist[0].enable_bed === 'true');
} else document.getElementById('enable_bed_controls').checked = false;
//chamber
if (typeof(preferenceslist[0].enable_chamber) !== 'undefined') {
document.getElementById('enable_chamber_controls').checked = (preferenceslist[0].enable_chamber === 'true');
} else document.getElementById('enable_chamber_controls').checked = false;
//fan
if (typeof(preferenceslist[0].enable_fan) !== 'undefined') {
document.getElementById('enable_fan_controls').checked = (preferenceslist[0].enable_fan === 'true');
} else document.getElementById('enable_fan_controls').checked = false;
//grbl panel
if (typeof(preferenceslist[0].enable_grbl_panel) !== 'undefined') {
document.getElementById('show_grbl_panel').checked = (preferenceslist[0].enable_grbl_panel === 'true');
} else document.getElementById('show_grbl_panel').checked = false;
//grbl probe panel
if (typeof(preferenceslist[0].enable_grbl_probe_panel) !== 'undefined') {
document.getElementById('show_grbl_probe_tab').checked = (preferenceslist[0].enable_grbl_probe_panel === 'true');
} else document.getElementById('show_grbl_probe_tab').checked = false;
//control panel
if (typeof(preferenceslist[0].enable_control_panel) !== 'undefined') {
document.getElementById('show_control_panel').checked = (preferenceslist[0].enable_control_panel === 'true');
} else document.getElementById('show_control_panel').checked = false;
//temperatures panel
if (typeof(preferenceslist[0].enable_temperatures_panel) !== 'undefined') {
document.getElementById('show_temperatures_panel').checked = (preferenceslist[0].enable_temperatures_panel === 'true');
} else document.getElementById('show_temperatures_panel').checked = false;
//extruders
if (typeof(preferenceslist[0].enable_extruder_panel) !== 'undefined') {
document.getElementById('show_extruder_panel').checked = (preferenceslist[0].enable_extruder_panel === 'true');
} else document.getElementById('show_extruder_panel').checked = false;
//files panel
if (typeof(preferenceslist[0].enable_files_panel) !== 'undefined') {
document.getElementById('show_files_panel').checked = (preferenceslist[0].enable_files_panel === 'true');
} else document.getElementById('show_files_panel').checked = false;
//TFT SD
if (typeof(preferenceslist[0].has_TFT_SD) !== 'undefined') {
document.getElementById('has_tft_sd').checked = (preferenceslist[0].has_TFT_SD === 'true');
} else document.getElementById('has_tft_sd').checked = false;
//TFT USB
if (typeof(preferenceslist[0].has_TFT_USB) !== 'undefined') {
document.getElementById('has_tft_usb').checked = (preferenceslist[0].has_TFT_USB === 'true');
} else document.getElementById('has_tft_usb').checked = false;
//commands
if (typeof(preferenceslist[0].enable_commands_panel) !== 'undefined') {
document.getElementById('show_commands_panel').checked = (preferenceslist[0].enable_commands_panel === 'true');
} else document.getElementById('show_commands_panel').checked = false;
//interval positions
if (typeof(preferenceslist[0].interval_positions) !== 'undefined') {
document.getElementById('preferences_pos_Interval_check').value = parseInt(preferenceslist[0].interval_positions);
} else document.getElementById('preferences_pos_Interval_check').value = parseInt(default_preferenceslist[0].interval_positions);
//interval status
if (typeof(preferenceslist[0].interval_status) !== 'undefined') {
document.getElementById('preferences_status_Interval_check').value = parseInt(preferenceslist[0].interval_status);
} else document.getElementById('preferences_status_Interval_check').value = parseInt(default_preferenceslist[0].interval_status);
//xy feedrate
if (typeof(preferenceslist[0].xy_feedrate) !== 'undefined') {
document.getElementById('preferences_control_xy_velocity').value = parseInt(preferenceslist[0].xy_feedrate);
} else document.getElementById('preferences_control_xy_velocity').value = parseInt(default_preferenceslist[0].xy_feedrate);
if ((target_firmware != "grbl-embedded") || (grblaxis > 2)) {
//z feedrate
if (typeof(preferenceslist[0].z_feedrate) !== 'undefined') {
document.getElementById('preferences_control_z_velocity').value = parseInt(preferenceslist[0].z_feedrate);
} else document.getElementById('preferences_control_z_velocity').value = parseInt(default_preferenceslist[0].z_feedrate);
}
if (target_firmware == "grbl-embedded") {
if (grblaxis > 3) {
//a feedrate
if (typeof(preferenceslist[0].a_feedrate) !== 'undefined') {
document.getElementById('preferences_control_a_velocity').value = parseInt(preferenceslist[0].a_feedrate);
} else document.getElementById('preferences_control_a_velocity').value = parseInt(default_preferenceslist[0].a_feedrate);
}
if (grblaxis > 4) {
//b feedrate
if (typeof(preferenceslist[0].b_feedrate) !== 'undefined') {
document.getElementById('preferences_control_b_velocity').value = parseInt(preferenceslist[0].b_feedrate);
} else document.getElementById('preferences_control_b_velocity').value = parseInt(default_preferenceslist[0].b_feedrate);
}
if (grblaxis > 5) {
//c feedrate
if (typeof(preferenceslist[0].c_feedrate) !== 'undefined') {
document.getElementById('preferences_control_c_velocity').value = parseInt(preferenceslist[0].c_feedrate);
} else document.getElementById('preferences_control_c_velocity').value = parseInt(default_preferenceslist[0].c_feedrate);
}
}
//probemaxtravel
if ((typeof(preferenceslist[0].probemaxtravel) !== 'undefined') && (preferenceslist[0].probemaxtravel.length != 0)) {
document.getElementById('preferences_probemaxtravel').value = parseFloat(preferenceslist[0].probemaxtravel);
} else {
document.getElementById('preferences_probemaxtravel').value = parseFloat(default_preferenceslist[0].probemaxtravel);
}
//probefeedrate
if ((typeof(preferenceslist[0].probefeedrate) !== 'undefined') && (preferenceslist[0].probefeedrate.length != 0)) {
document.getElementById('preferences_probefeedrate').value = parseInt(preferenceslist[0].probefeedrate);
} else document.getElementById('preferences_probefeedrate').value = parseInt(default_preferenceslist[0].probefeedrate);
//probetouchplatethickness
if ((typeof(preferenceslist[0].probetouchplatethickness) !== 'undefined') && (preferenceslist[0].probetouchplatethickness.length != 0)) {
document.getElementById('preferences_probetouchplatethickness').value = parseFloat(preferenceslist[0].probetouchplatethickness);
} else document.getElementById('preferences_probetouchplatethickness').value = parseFloat(default_preferenceslist[0].probetouchplatethickness);
//interval temperatures
if (typeof(preferenceslist[0].interval_temperatures) !== 'undefined') {
document.getElementById('preferences_tempInterval_check').value = parseInt(preferenceslist[0].interval_temperatures);
} else document.getElementById('preferences_tempInterval_check').value = parseInt(default_preferenceslist[0].interval_temperatures);
//e feedrate
if (typeof(preferenceslist[0].e_feedrate) !== 'undefined') {
document.getElementById('preferences_e_velocity').value = parseInt(preferenceslist[0].e_feedrate);
} else document.getElementById('preferences_e_velocity').value = parseInt(default_preferenceslist[0].e_feedrate);
//e distance
if (typeof(preferenceslist[0].e_distance) !== 'undefined') {
document.getElementById('preferences_filament_length').value = parseInt(preferenceslist[0].e_distance);
} else document.getElementById('preferences_filament_length').value = parseInt(default_preferenceslist[0].e_distance);
//autoscroll
if (typeof(preferenceslist[0].enable_autoscroll) !== 'undefined') {
document.getElementById('preferences_autoscroll').checked = (preferenceslist[0].enable_autoscroll === 'true');
} else document.getElementById('preferences_autoscroll').checked = false;
//Verbose Mode
if (typeof(preferenceslist[0].enable_verbose_mode) !== 'undefined') {
document.getElementById('preferences_verbose_mode').checked = (preferenceslist[0].enable_verbose_mode === 'true');
} else document.getElementById('preferences_verbose_mode').checked = false;
//file filters
if (typeof(preferenceslist[0].f_filters) != 'undefined') {
console.log("Use prefs filters");
document.getElementById('preferences_filters').value = preferenceslist[0].f_filters;
} else {
console.log("Use default filters");
document.getElementById('preferences_filters').value = String(default_preferenceslist[0].f_filters);
}

prefs_toggledisplay('show_camera_panel');
prefs_toggledisplay('show_grbl_panel');
prefs_toggledisplay('show_control_panel');
prefs_toggledisplay('show_extruder_panel');
prefs_toggledisplay('show_temperatures_panel');
prefs_toggledisplay('show_commands_panel');
prefs_toggledisplay('show_files_panel');
prefs_toggledisplay('show_grbl_probe_tab');
}

function closePreferencesDialog() {
var modified = false;
if (preferenceslist[0].length != 0) {
//check dialog compare to global state
if ((typeof(preferenceslist[0].language) === 'undefined') ||
(typeof(preferenceslist[0].enable_camera) === 'undefined') ||
(typeof(preferenceslist[0].auto_load_camera) === 'undefined') ||
(typeof(preferenceslist[0].camera_address) === 'undefined') ||
(typeof(preferenceslist[0].enable_DHT) === 'undefined') ||
(typeof(preferenceslist[0].number_extruders) === 'undefined') ||
(typeof(preferenceslist[0].is_mixed_extruder) === 'undefined') ||
(typeof(preferenceslist[0].enable_lock_UI) === 'undefined') ||
(typeof(preferenceslist[0].enable_ping) === 'undefined') ||
(typeof(preferenceslist[0].enable_redundant) === 'undefined') ||
(typeof(preferenceslist[0].enable_probe) === 'undefined') ||
(typeof(preferenceslist[0].enable_bed) === 'undefined') ||
(typeof(preferenceslist[0].enable_chamber) === 'undefined') ||
(typeof(preferenceslist[0].enable_fan) === 'undefined') ||
(typeof(preferenceslist[0].xy_feedrate) === 'undefined') ||
(typeof(preferenceslist[0].z_feedrate) === 'undefined') ||
(typeof(preferenceslist[0].e_feedrate) === 'undefined') ||
(typeof(preferenceslist[0].e_distance) === 'undefined') ||
(typeof(preferenceslist[0].enable_control_panel) === 'undefined') ||
(typeof(preferenceslist[0].enable_grbl_panel) === 'undefined') ||
(typeof(preferenceslist[0].enable_grbl_probe_panel) === 'undefined') ||
(typeof(preferenceslist[0].enable_temperatures_panel) === 'undefined') ||
(typeof(preferenceslist[0].probemaxtravel) === 'undefined') ||
(typeof(preferenceslist[0].probefeedrate) === 'undefined') ||
(typeof(preferenceslist[0].probetouchplatethickness) === 'undefined') ||
(typeof(preferenceslist[0].enable_extruder_panel) === 'undefined') ||
(typeof(preferenceslist[0].enable_files_panel) === 'undefined') ||
(typeof(preferenceslist[0].has_TFT_SD) === 'undefined') ||
(typeof(preferenceslist[0].has_TFT_USB) === 'undefined') ||
(typeof(preferenceslist[0].interval_positions) === 'undefined') ||
(typeof(preferenceslist[0].interval_temperatures) === 'undefined') ||
(typeof(preferenceslist[0].interval_status) === 'undefined') ||
(typeof(preferenceslist[0].enable_autoscroll) === 'undefined') ||
(typeof(preferenceslist[0].enable_verbose_mode) === 'undefined') ||
(typeof(preferenceslist[0].enable_commands_panel) === 'undefined')) {
modified = true;
} else {
//camera
if (document.getElementById('show_camera_panel').checked != (preferenceslist[0].enable_camera === 'true')) modified = true;
//Autoload
if (document.getElementById('autoload_camera_panel').checked != (preferenceslist[0].auto_load_camera === 'true')) modified = true;
//camera address
if (document.getElementById('preferences_camera_webaddress').value != decode_entitie(preferenceslist[0].camera_address)) modified = true;
//DHT
if (document.getElementById('enable_DHT').checked != (preferenceslist[0].enable_DHT === 'true')) modified = true;
//Lock UI
if (document.getElementById('enable_lock_UI').checked != (preferenceslist[0].enable_lock_UI === 'true')) modified = true;
//Monitor connection
if (document.getElementById('enable_ping').checked != (preferenceslist[0].enable_ping === 'true')) modified = true;
//number extruders
if (document.getElementById('preferences_control_nb_extruders').value != parseInt(preferenceslist[0].number_extruders)) modified = true;
//is mixed extruder
if (document.getElementById('enable_mixed_E_controls').checked != (preferenceslist[0].is_mixed_extruder === 'true')) modified = true;
//heater t0 redundant
if (document.getElementById('enable_redundant_controls').checked != (preferenceslist[0].enable_redundant === 'true')) modified = true;
//probe
if (document.getElementById('enable_probe_controls').checked != (preferenceslist[0].enable_probe === 'true')) modified = true;
//bed
if (document.getElementById('enable_bed_controls').checked != (preferenceslist[0].enable_bed === 'true')) modified = true;
//chamber
if (document.getElementById('enable_chamber_controls').checked != (preferenceslist[0].enable_chamber === 'true')) modified = true;
//fan.
if (document.getElementById('enable_fan_controls').checked != (preferenceslist[0].enable_fan === 'true')) modified = true;
//control panel
if (document.getElementById('show_control_panel').checked != (preferenceslist[0].enable_control_panel === 'true')) modified = true;
//temperatures panel
if (document.getElementById('show_temperatures_panel').checked != (preferenceslist[0].enable_temperatures_panel === 'true')) modified = true;
//grbl panel
if (document.getElementById('show_grbl_panel').checked != (preferenceslist[0].enable_grbl_panel === 'true')) modified = true;
//grbl probe panel
if (document.getElementById('show_grbl_probe_tab').checked != (preferenceslist[0].enable_grbl_probe_panel === 'true')) modified = true;
//extruder panel
if (document.getElementById('show_extruder_panel').checked != (preferenceslist[0].enable_extruder_panel === 'true')) modified = true;
//files panel
if (document.getElementById('show_files_panel').checked != (preferenceslist[0].enable_files_panel === 'true')) modified = true;
//TFT SD
if (document.getElementById('has_tft_sd').checked != (preferenceslist[0].has_TFT_SD === 'true')) modified = true;
//TFT USB
if (document.getElementById('has_tft_usb').checked != (preferenceslist[0].has_TFT_USB === 'true')) modified = true;
//commands
if (document.getElementById('show_commands_panel').checked != (preferenceslist[0].enable_commands_panel === 'true')) modified = true;
//interval positions
if (document.getElementById('preferences_pos_Interval_check').value != parseInt(preferenceslist[0].interval_positions)) modified = true;
//interval status
if (document.getElementById('preferences_status_Interval_check').value != parseInt(preferenceslist[0].interval_status)) modified = true;
//xy feedrate
if (document.getElementById('preferences_control_xy_velocity').value != parseInt(preferenceslist[0].xy_feedrate)) modified = true;
if ((target_firmware != "grbl-embedded") || (grblaxis > 2)) {
//z feedrate
if (document.getElementById('preferences_control_z_velocity').value != parseInt(preferenceslist[0].z_feedrate)) modified = true;
}
if (target_firmware == "grbl-embedded") {
if (grblaxis > 3) {
//a feedrate
if (document.getElementById('preferences_control_a_velocity').value != parseInt(preferenceslist[0].a_feedrate)) modified = true;
}
if (grblaxis > 4) {
//b feedrate
if (document.getElementById('preferences_control_b_velocity').value != parseInt(preferenceslist[0].b_feedrate)) modified = true;
}
if (grblaxis > 5) {
//c feedrate
if (document.getElementById('preferences_control_c_velocity').value != parseInt(preferenceslist[0].c_feedrate)) modified = true;
}
}
//interval temperatures
if (document.getElementById('preferences_tempInterval_check').value != parseInt(preferenceslist[0].interval_temperatures)) modified = true;
//e feedrate
if (document.getElementById('preferences_e_velocity').value != parseInt(preferenceslist[0].e_feedrate)) modified = true;
//e distance
if (document.getElementById('preferences_filament_length').value != parseInt(preferenceslist[0].e_distance)) modified = true;
//autoscroll
if (document.getElementById('preferences_autoscroll').checked != (preferenceslist[0].enable_autoscroll === 'true')) modified = true;
//Verbose Mode
if (document.getElementById('preferences_verbose_mode').checked != (preferenceslist[0].enable_verbose_mode === 'true')) modified = true;
//file filters
if (document.getElementById('preferences_filters').value != preferenceslist[0].f_filters) modified = true;
//probemaxtravel
if (document.getElementById('preferences_probemaxtravel').value != parseFloat(preferenceslist[0].probemaxtravel)) modified = true;
//probefeedrate
if (document.getElementById('preferences_probefeedrate').value != parseInt(preferenceslist[0].probefeedrate)) modified = true;
//probetouchplatethickness
if (document.getElementById('preferences_probetouchplatethickness').value != parseFloat(preferenceslist[0].probetouchplatethickness)) modified = true;
}
} else modified = true;
if (language_save != language) modified = true;
if (modified) {
confirmdlg(translate_text_item("Data mofified"), translate_text_item("Do you want to save?"), process_preferencesCloseDialog)
} else {
closeModal('cancel');
}
}

function process_preferencesCloseDialog(answer) {
if (answer == 'no') {
//console.log("Answer is no so exit");
translate_text(language_save);
closeModal('cancel');
} else {
// console.log("Answer is yes so let's save");
SavePreferences();
}
}

function SavePreferences(current_preferences) {
if (http_communication_locked) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Communications are currently locked, please wait and retry."));
return;
}
console.log("save prefs");
if (((typeof(current_preferences) != 'undefined') && !current_preferences) || (typeof(current_preferences) == 'undefined')) {
if (!Checkvalues("preferences_pos_Interval_check") ||
!Checkvalues("preferences_status_Interval_check") ||
!Checkvalues("preferences_control_xy_velocity") ||
!Checkvalues("preferences_e_velocity") ||
!Checkvalues("preferences_tempInterval_check") ||
!Checkvalues("preferences_filters") ||
!Checkvalues("preferences_filament_length") ||
!Checkvalues("preferences_probemaxtravel") ||
!Checkvalues("preferences_probefeedrate") ||
!Checkvalues("preferences_probetouchplatethickness")
) return;
if ((target_firmware != "grbl-embedded") || (grblaxis > 2)) {
if(!Checkvalues("preferences_control_z_velocity")) return;
}
if (target_firmware == "grbl-embedded") {
if( (grblaxis > 3) && (!Checkvalues("preferences_control_a_velocity"))) return;
if( (grblaxis > 4) && (!Checkvalues("preferences_control_b_velocity"))) return;
if( (grblaxis > 5) && (!Checkvalues("preferences_control_c_velocity"))) return;
}
preferenceslist = [];
var saveprefs = "[{\"language\":\"" + language;
saveprefs += "\",\"enable_camera\":\"" + document.getElementById('show_camera_panel').checked;
saveprefs += "\",\"auto_load_camera\":\"" + document.getElementById('autoload_camera_panel').checked;
saveprefs += "\",\"camera_address\":\"" + HTMLEncode(document.getElementById('preferences_camera_webaddress').value);
saveprefs += "\",\"enable_DHT\":\"" + document.getElementById('enable_DHT').checked;
saveprefs += "\",\"enable_lock_UI\":\"" + document.getElementById('enable_lock_UI').checked;
saveprefs += "\",\"enable_ping\":\"" + document.getElementById('enable_ping').checked;
saveprefs += "\",\"is_mixed_extruder\":\"" + document.getElementById('enable_mixed_E_controls').checked;
saveprefs += "\",\"number_extruders\":\"" + document.getElementById('preferences_control_nb_extruders').value;
saveprefs += "\",\"enable_redundant\":\"" + document.getElementById('enable_redundant_controls').checked;
saveprefs += "\",\"enable_probe\":\"" + document.getElementById('enable_probe_controls').checked;
saveprefs += "\",\"enable_bed\":\"" + document.getElementById('enable_bed_controls').checked;
saveprefs += "\",\"enable_chamber\":\"" + document.getElementById('enable_chamber_controls').checked;
saveprefs += "\",\"enable_fan\":\"" + document.getElementById('enable_fan_controls').checked;
saveprefs += "\",\"enable_control_panel\":\"" + document.getElementById('show_control_panel').checked;
saveprefs += "\",\"enable_grbl_probe_panel\":\"" + document.getElementById('show_grbl_probe_tab').checked;
saveprefs += "\",\"enable_temperatures_panel\":\"" + document.getElementById('show_temperatures_panel').checked;
saveprefs += "\",\"enable_extruder_panel\":\"" + document.getElementById('show_extruder_panel').checked;
saveprefs += "\",\"enable_grbl_panel\":\"" + document.getElementById('show_grbl_panel').checked;
saveprefs += "\",\"enable_files_panel\":\"" + document.getElementById('show_files_panel').checked;
saveprefs += "\",\"has_TFT_SD\":\"" + document.getElementById('has_tft_sd').checked;
saveprefs += "\",\"has_TFT_USB\":\"" + document.getElementById('has_tft_usb').checked;
saveprefs += "\",\"probemaxtravel\":\"" + document.getElementById('preferences_probemaxtravel').value;
saveprefs += "\",\"probefeedrate\":\"" + document.getElementById('preferences_probefeedrate').value;
saveprefs += "\",\"probetouchplatethickness\":\"" + document.getElementById('preferences_probetouchplatethickness').value;
saveprefs += "\",\"interval_positions\":\"" + document.getElementById('preferences_pos_Interval_check').value;
saveprefs += "\",\"interval_status\":\"" + document.getElementById('preferences_status_Interval_check').value;
saveprefs += "\",\"xy_feedrate\":\"" + document.getElementById('preferences_control_xy_velocity').value;
if ((target_firmware != "grbl-embedded") || (grblaxis > 2)) {
saveprefs += "\",\"z_feedrate\":\"" + document.getElementById('preferences_control_z_velocity').value;
}
if (target_firmware == "grbl-embedded") {
if (grblaxis > 3){
saveprefs += "\",\"a_feedrate\":\"" + document.getElementById('preferences_control_a_velocity').value;
}
if (grblaxis > 4){
saveprefs += "\",\"b_feedrate\":\"" + document.getElementById('preferences_control_b_velocity').value;
}
if (grblaxis > 5){
saveprefs += "\",\"c_feedrate\":\"" + document.getElementById('preferences_control_c_velocity').value;
}
}
saveprefs += "\",\"interval_temperatures\":\"" + document.getElementById('preferences_tempInterval_check').value;
saveprefs += "\",\"e_feedrate\":\"" + document.getElementById('preferences_e_velocity').value;
saveprefs += "\",\"e_distance\":\"" + document.getElementById('preferences_filament_length').value;
saveprefs += "\",\"f_filters\":\"" + document.getElementById('preferences_filters').value;
saveprefs += "\",\"enable_autoscroll\":\"" + document.getElementById('preferences_autoscroll').checked;
saveprefs += "\",\"enable_verbose_mode\":\"" + document.getElementById('preferences_verbose_mode').checked;
saveprefs += "\",\"enable_commands_panel\":\"" + document.getElementById('show_commands_panel').checked + "\"}]";
preferenceslist = JSON.parse(saveprefs);
}
var blob = new Blob([JSON.stringify(preferenceslist, null, " ")], {
type: 'application/json'
});
var file;
if (browser_is("IE") || browser_is("Edge")) {
file = blob;
file.name = preferences_file_name;
file.lastModifiedDate = new Date();
} else file = new File([blob], preferences_file_name);
var formData = new FormData();
var url = "/files";
formData.append('path', '/');
formData.append('myfile[]', file, preferences_file_name);
if ((typeof(current_preferences) != 'undefined') && current_preferences) SendFileHttp(url, formData);
else SendFileHttp(url, formData, preferencesdlgUploadProgressDisplay, preferencesUploadsuccess, preferencesUploadfailed);
}

function preferencesdlgUploadProgressDisplay(oEvent) {
if (oEvent.lengthComputable) {
var percentComplete = (oEvent.loaded / oEvent.total) * 100;
document.getElementById('preferencesdlg_prg').value = percentComplete;
document.getElementById('preferencesdlg_upload_percent').innerHTML = percentComplete.toFixed(0);
document.getElementById('preferencesdlg_upload_msg').style.display = 'block';
} else {
// Impossible because size is unknown
}
}

function preferencesUploadsuccess(response) {
document.getElementById('preferencesdlg_upload_msg').style.display = 'none';
applypreferenceslist();
closeModal('ok');
}

function preferencesUploadfailed(errorcode, response) {
alertdlg(translate_text_item("Error"), translate_text_item("Save preferences failed!"));
}


function Checkvalues(id_2_check) {
var status = true;
var value = 0;
switch (id_2_check) {
case "preferences_status_Interval_check":
case "preferences_tempInterval_check":
case "preferences_pos_Interval_check":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1 && value <= 100)) {
error_message = translate_text_item("Value of auto-check must be between 0s and 99s !!");
status = false;
}
break;
case "preferences_control_xy_velocity":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1)) {
error_message = translate_text_item("XY Feedrate value must be at least 1 mm/min!");
status = false;
}
break;
case "preferences_control_z_velocity":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1)) {
error_message = translate_text_item("Z Feedrate value must be at least 1 mm/min!");
status = false;
}
break;
case "preferences_control_a_velocity":
case "preferences_control_b_velocity":
case "preferences_control_c_velocity":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1)) {
error_message = translate_text_item("Axis Feedrate value must be at least 1 mm/min!");
status = false;
}
break;
case "preferences_tempInterval_check":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value > 0 && value < 100)) {
error_message = translate_text_item("Value of auto-check must be between 0s and 99s !!");
status = false;
}
break;
case "preferences_e_velocity":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1 && value <= 9999)) {
error_message = translate_text_item("Value of extruder velocity must be between 1 mm/min and 9999 mm/min !");
status = false;
}
break;
case "preferences_probefeedrate":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1 && value <= 9999)) {
error_message = translate_text_item("Value of probe feedrate must be between 1 mm/min and 9999 mm/min !");
status = false;
}
break;
case "preferences_probemaxtravel":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 1 && value <= 9999)) {
error_message = translate_text_item("Value of maximum probe travel must be between 1 mm and 9999 mm !");
status = false;
}
break;
case "preferences_probetouchplatethickness":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 0 && value <= 9999)) {
error_message = translate_text_item("Value of probe touch plate thickness must be between 0 mm and 9999 mm !");
status = false;
}
break;
case "preferences_filament_length":
value = parseInt(document.getElementById(id_2_check).value);
if (!(!isNaN(value) && value >= 0.001 && value <= 9999)) {
error_message = translate_text_item("Value of filament length must be between 0.001 mm and 9999 mm !");
status = false;
}
break;
case "preferences_filters":
//TODO a regex would be better
value = document.getElementById(id_2_check).value;
if ((value.indexOf(".") != -1) ||
(value.indexOf("*") != -1)) {
error_message = translate_text_item("Only alphanumeric chars separated by ; for extensions filters");
status = false;
}
break;
}
if (status) {
document.getElementById(id_2_check + "_group").classList.remove("has-feedback");
document.getElementById(id_2_check + "_group").classList.remove("has-error");
document.getElementById(id_2_check + "_icon").innerHTML = "";
} else {
document.getElementById(id_2_check + "_group").classList.add("has-feedback");
document.getElementById(id_2_check + "_group").classList.add("has-error");
document.getElementById(id_2_check + "_icon").innerHTML = get_icon_svg("remove");
alertdlg(translate_text_item("Out of range"), error_message);
}
return status;
}

</script>
<script>
var CustomCommand_history = [];
var CustomCommand_history_index = -1;
var Monitor_output = [];

function init_command_panel() {

}

function Monitor_output_autoscrollcmd() {
document.getElementById('cmd_content').scrollTop = document.getElementById('cmd_content').scrollHeight;
}

function Monitor_check_autoscroll() {
if (document.getElementById('monitor_enable_autoscroll').checked == true) Monitor_output_autoscrollcmd();
}

function Monitor_check_verbose_mode() {
Monitor_output_Update();
}

function Monitor_output_Clear() {
Monitor_output = [];
Monitor_output_Update();
}

function Monitor_output_Update(message) {
if (message) {
if (typeof message === 'string' || message instanceof String) {
Monitor_output = Monitor_output.concat(message);
} else {
try {
var msg = JSON.stringify(message, null, " ");
Monitor_output = Monitor_output.concat(msg + "\n");
} catch (err) {
Monitor_output = Monitor_output.concat(message.toString() + "\n");
}
}
Monitor_output = Monitor_output.slice(-300);
}
var regex = /ok T:/g;

if (target_firmware == "repetier" || target_firmware == "repetier4davinci") {
regex = /T:/g;
}
var output = "";
var Monitor_outputLength = Monitor_output.length;
var isverbosefilter = document.getElementById("monitor_enable_verbose_mode").checked;
for (var i = 0; i < Monitor_outputLength; i++) {
//Filter the output
if ((Monitor_output[i].trim().toLowerCase().startsWith("ok")) && !isverbosefilter) continue;
if ((Monitor_output[i].trim().toLowerCase() == "wait") && !isverbosefilter) continue;
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
//no status
if ((Monitor_output[i].startsWith("<") || Monitor_output[i].startsWith("[echo:")) && !isverbosefilter) continue;
} else {
//no temperatures
if (!isverbosefilter && Monitor_output[i].match(regex)) continue;
}
if ((Monitor_output[i].trim() === "\n") || (Monitor_output[i].trim() === "\r") || (Monitor_output[i].trim() === "\r\n") || (Monitor_output[i].trim() === "")) continue;
m = Monitor_output[i];
if (Monitor_output[i].startsWith("[#]")) {
if (!isverbosefilter) continue;
else m = m.replace("[#]", "");
}
//position
if (!isverbosefilter && Monitor_output[i].startsWith("X:")) continue;
if (!isverbosefilter && Monitor_output[i].startsWith("FR:")) continue;
m = m.replace("&", "&amp;");
m = m.replace("<", "&lt;");
m = m.replace(">", "&gt;");
if (m.startsWith("ALARM:") || m.startsWith("Hold:") || m.startsWith("Door:")) {
m = "<font color='orange'><b>" + m + translate_text_item(m.trim()) + "</b></font>\n";
}
if (m.startsWith("error:")) {
m = "<font color='red'><b>" + m.toUpperCase() + translate_text_item(m.trim()) + "</b></font>\n";
}
if ((m.startsWith("echo:") || m.startsWith("Config:")) && !isverbosefilter) continue;
if (m.startsWith("echo:Unknown command: \"echo\"") || (m.startsWith("echo:enqueueing \"*\""))) continue;
output += m;
}
document.getElementById("cmd_content").innerHTML = output;
Monitor_check_autoscroll();
}

function SendCustomCommand() {
var cmd = document.getElementById("custom_cmd_txt").value;
var url = "/command?commandText=";
cmd = cmd.trim();
if (cmd.trim().length == 0) return;
CustomCommand_history.push(cmd);
CustomCommand_history.slice(-40);
CustomCommand_history_index = CustomCommand_history.length;
document.getElementById("custom_cmd_txt").value = "";
Monitor_output_Update(cmd + "\n");
cmd = encodeURI(cmd);
//because # is not encoded
cmd = cmd.replace("#", "%23");
SendGetHttp(url + cmd, SendCustomCommandSuccess, SendCustomCommandFailed);
}

function CustomCommand_OnKeyUp(event) {
if (event.keyCode == 13) {
SendCustomCommand();
}
if (event.keyCode == 38 || event.keyCode == 40) {
if (event.keyCode == 38 && CustomCommand_history.length > 0 && CustomCommand_history_index > 0) {
CustomCommand_history_index--;
} else if (event.keyCode == 40 && CustomCommand_history_index < CustomCommand_history.length - 1) {
CustomCommand_history_index++;
}

if (CustomCommand_history_index >= 0 && CustomCommand_history_index < CustomCommand_history.length) {
document.getElementById("custom_cmd_txt").value = CustomCommand_history[CustomCommand_history_index];
}
return false;
}
return true;
}

function SendCustomCommandSuccess(response) {
if (response[response.length - 1] != '\n') Monitor_output_Update(response + "\n");
else {
Monitor_output_Update(response);
}
var tcmdres = response.split("\n");
for (var il = 0; il < tcmdres.length; il++){
process_socket_response(tcmdres[il]);
}
}

function SendCustomCommandFailed(error_code, response) {
if (error_code == 0) {
Monitor_output_Update(translate_text_item("Connection error") + "\n");
} else {
Monitor_output_Update(translate_text_item("Error : ") + error_code + " :" + decode_entitie(response) + "\n");
}
console.log("cmd Error " + error_code + " :" + decode_entitie(response));
}

</script>
<script>
var current_active_extruder = 'T0';
var currentFR=""
var currentFLR=""

function Set_active_extruder() {
current_active_extruder = "T" + document.getElementById('active_extruder').value;
console.log(current_active_extruder);
}

function init_extruder_panel() {
}

function process_feedRate(msg){
var fr = msg.replace("FR:","")
document.getElementById('feedratecatched').innerHTML = fr;
if (currentFR==""){
document.getElementById('feedSelectedValue').value=parseInt(fr);
currentFR=fr;
}
}

function process_flowdRate(msg){
var flr = msg.substring(msg.indexOf("Flow:")+5)
document.getElementById('flowratecatched').innerHTML = flr;
if (currentFLR==""){
document.getElementById('flowSelectedValue').value=parseInt(flr);
currentFLR=flr
}
}

function on_extruder_length_Change() {
var value = parseInt(document.getElementById('filament_length').value);
if (value < 0.001 || value > 9999 || isNaN(value) || (value === null)) {
//we could display error but we do not
}
}

function on_extruder_velocity_Change() {
var value = parseInt(document.getElementById('extruder_velocity').value);
if (value < 0.001 || value > 9999 || isNaN(value) || (value === null)) {
//we could display error but we do not
}
}

function Extrude_cmd(extruder, direction) {
var filament_length = parseInt(document.getElementById('filament_length').value);
var velocity = parseInt(document.getElementById('extruder_velocity').value);
if (velocity < 1 || velocity > 9999 || isNaN(velocity) || (velocity === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("Value of extruder velocity must be between 1 mm/min and 9999 mm/min !"));
return;
}
if (filament_length < 0.001 || filament_length > 9999 || isNaN(filament_length) || (filament_length === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("Value of filament length must be between 0.001 mm and 9999 mm !"));
return;
}
//Todo send command by command TBD
var command = extruder + "\n" + "G91\nG1 E" + (filament_length * direction) + " F" + velocity + "\nG90"
SendPrinterCommand(command, true);
//console.log(command);
}

function flowInit_cmd() {
document.getElementById('flowSelectedValue').value = 100;
flowSet_cmd();
}

function flowSet_cmd() {
var command = "M221 S";
var value = parseInt(document.getElementById('flowSelectedValue').value);
if (value < 50 || value > 300 || isNaN(value)) {
document.getElementById('flowSelectedValue').value = 100;
alertdlg(translate_text_item("Out of range"), translate_text_item("Value must be between 50% and 300% !"));
} else {
SendPrinterCommand(command + value, true);
}
}

function feedInit_cmd() {
document.getElementById('feedSelectedValue').value = 100;
feedSet_cmd();
}

function feedSet_cmd() {
var command = "M220 S";
var value = parseInt(document.getElementById('feedSelectedValue').value);
if (value < 25 || value > 150 || isNaN(value)) {
document.getElementById('feedSelectedValue').value = 100;
alertdlg(translate_text_item("Out of range"), translate_text_item("Value must be between 25% and 150% !"));
} else {
SendPrinterCommand(command + value, true);
}
}

function fanOff_cmd() {
document.getElementById('fanSelectedValue').value = 0;
fanSet_cmd();
}

function fanSet_cmd() {
var command = "M106 S";
var fvalue = parseInt(document.getElementById('fanSelectedValue').value);
var value = Math.round((fvalue * 255) / 100);
if (fvalue < 0 || fvalue > 100 || isNaN(fvalue) || fvalue === null) {
document.getElementById('fanSelectedValue').value = 0;
alertdlg(translate_text_item("Out of range"), translate_text_item("Value must be between 0% and 100% !"));
} else {
SendPrinterCommand(command + value, true);
}
}

function extruder_handleKeyUp(event, target) {
if (event.keyCode == 13) {
if (target == 'Feed') feedSet_cmd();
else if (target == 'Flow') flowSet_cmd();
else if (target == 'Fan') fanSet_cmd();
}
return true;
}

</script>
<script>
function SendPrinterCommand(cmd, echo_on, processfn, errorfn, id, max_id) {
var url = "/command?commandText=";
var push_cmd = true;
if (typeof echo_on !== 'undefined') {
push_cmd = echo_on;
}
if (cmd.trim().length == 0) return;
if (push_cmd) Monitor_output_Update("[#]" + cmd + "\n");
//endRemoveIf(production)
if (typeof processfn === 'undefined' || processfn == null) processfn = SendPrinterCommandSuccess;
if (typeof errorfn === 'undefined' || errorfn == null) errorfn = SendPrinterCommandFailed;
cmd = encodeURI(cmd);
cmd = cmd.replace("#", "%23");
SendGetHttp(url + cmd, processfn, errorfn, id, max_id);
//console.log(cmd);
}

function SendPrinterSilentCommand(cmd, processfn, errorfn, id, max_id) {
var url = "/command_silent?commandText=";
if (cmd.trim().length == 0) return;
//endRemoveIf(production)
if (typeof processfn === 'undefined' || processfn == null) processfn = SendPrinterSilentCommandSuccess;
if (typeof errorfn === 'undefined' || errorfn == null) errorfn = SendPrinterCommandFailed;
cmd = encodeURI(cmd);
cmd = cmd.replace("#", "%23");
SendGetHttp(url + cmd, processfn, errorfn, id, max_id);
//console.log(cmd);
}

function SendPrinterSilentCommandSuccess(response) {
//console.log(response);
}


function SendPrinterCommandSuccess(response) {
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) return;
if (response[response.length - 1] != '\n') Monitor_output_Update(response + "\n");
else Monitor_output_Update(response);
}

function SendPrinterCommandFailed(error_code, response) {
if (error_code == 0) {
Monitor_output_Update(translate_text_item("Connection error") + "\n");
} else {
Monitor_output_Update(translate_text_item("Error : ") + error_code + " :" + decode_entitie(response) + "\n");
}
console.log("printer cmd Error " + error_code + " :" + decode_entitie(response));
}

</script>
<script>
// MIT License:
//
// Copyright (c) 2010-2013, Joe Walnes
//               2013-2014, Drew Noakes
//
// Permission is hereby granted, free of charge, to any person obtaining a copy
// of this software and associated documentation files (the "Software"), to deal
// in the Software without restriction, including without limitation the rights
// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
// copies of the Software, and to permit persons to whom the Software is
// furnished to do so, subject to the following conditions:
//
// The above copyright notice and this permission notice shall be included in
// all copies or substantial portions of the Software.
//
// THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
// THE SOFTWARE.

/**
* Smoothie Charts - http://smoothiecharts.org/
* (c) 2010-2013, Joe Walnes
*     2013-2014, Drew Noakes
*
* v1.0: Main charting library, by Joe Walnes
* v1.1: Auto scaling of axis, by Neil Dunn
* v1.2: fps (frames per second) option, by Mathias Petterson
* v1.3: Fix for divide by zero, by Paul Nikitochkin
* v1.4: Set minimum, top-scale padding, remove timeseries, add optional timer to reset bounds, by Kelley Reynolds
* v1.5: Set default frames per second to 50... smoother.
*       .start(), .stop() methods for conserving CPU, by Dmitry Vyal
*       options.interpolation = 'bezier' or 'line', by Dmitry Vyal
*       options.maxValue to fix scale, by Dmitry Vyal
* v1.6: minValue/maxValue will always get converted to floats, by Przemek Matylla
* v1.7: options.grid.fillStyle may be a transparent color, by Dmitry A. Shashkin
*       Smooth rescaling, by Kostas Michalopoulos
* v1.8: Set max length to customize number of live points in the dataset with options.maxDataSetLength, by Krishna Narni
* v1.9: Display timestamps along the bottom, by Nick and Stev-io
*       (https://groups.google.com/forum/?fromgroups#!topic/smoothie-charts/-Ywse8FCpKI%5B1-25%5D)
*       Refactored by Krishna Narni, to support timestamp formatting function
* v1.10: Switch to requestAnimationFrame, removed the now obsoleted options.fps, by Gergely Imreh
* v1.11: options.grid.sharpLines option added, by @drewnoakes
*        Addressed warning seen in Firefox when seriesOption.fillStyle undefined, by @drewnoakes
* v1.12: Support for horizontalLines added, by @drewnoakes
*        Support for yRangeFunction callback added, by @drewnoakes
* v1.13: Fixed typo (#32), by @alnikitich
* v1.14: Timer cleared when last TimeSeries removed (#23), by @davidgaleano
*        Fixed diagonal line on chart at start/end of data stream, by @drewnoakes
* v1.15: Support for npm package (#18), by @dominictarr
*        Fixed broken removeTimeSeries function (#24) by @davidgaleano
*        Minor performance and tidying, by @drewnoakes
* v1.16: Bug fix introduced in v1.14 relating to timer creation/clearance (#23), by @drewnoakes
*        TimeSeries.append now deals with out-of-order timestamps, and can merge duplicates, by @zacwitte (#12)
*        Documentation and some local variable renaming for clarity, by @drewnoakes
* v1.17: Allow control over font size (#10), by @drewnoakes
*        Timestamp text won't overlap, by @drewnoakes
* v1.18: Allow control of max/min label precision, by @drewnoakes
*        Added 'borderVisible' chart option, by @drewnoakes
*        Allow drawing series with fill but no stroke (line), by @drewnoakes
* v1.19: Avoid unnecessary repaints, and fixed flicker in old browsers having multiple charts in document (#40), by @asbai
* v1.20: Add SmoothieChart.getTimeSeriesOptions and SmoothieChart.bringToFront functions, by @drewnoakes
* v1.21: Add 'step' interpolation mode, by @drewnoakes
* v1.22: Add support for different pixel ratios. Also add optional y limit formatters, by @copacetic
* v1.23: Fix bug introduced in v1.22 (#44), by @drewnoakes
* v1.24: Fix bug introduced in v1.23, re-adding parseFloat to y-axis formatter defaults, by @siggy_sf
* v1.25: Fix bug seen when adding a data point to TimeSeries which is older than the current data, by @Nking92
*        Draw time labels on top of series, by @comolosabia
*        Add TimeSeries.clear function, by @drewnoakes
* v1.26: Add support for resizing on high device pixel ratio screens, by @copacetic
* v1.27: Fix bug introduced in v1.26 for non whole number devicePixelRatio values, by @zmbush
* v1.28: Add 'minValueScale' option, by @megawac
*        Fix 'labelPos' for different size of 'minValueString' 'maxValueString', by @henryn
*/

;
(function(exports) {

var Util = {
extend: function() {
arguments[0] = arguments[0] || {};
for (var i = 1; i < arguments.length; i++) {
for (var key in arguments[i]) {
if (arguments[i].hasOwnProperty(key)) {
if (typeof(arguments[i][key]) === 'object') {
if (arguments[i][key] instanceof Array) {
arguments[0][key] = arguments[i][key];
} else {
arguments[0][key] = Util.extend(arguments[0][key], arguments[i][key]);
}
} else {
arguments[0][key] = arguments[i][key];
}
}
}
}
return arguments[0];
}
};

/**
* Initialises a new <code>TimeSeries</code> with optional data options.
*
* Options are of the form (defaults shown):
*
* <pre>
* {
*   resetBounds: true,        // enables/disables automatic scaling of the y-axis
*   resetBoundsInterval: 3000 // the period between scaling calculations, in millis
* }
* </pre>
*
* Presentation options for TimeSeries are specified as an argument to <code>SmoothieChart.addTimeSeries</code>.
*
* @constructor
*/
function TimeSeries(options) {
this.options = Util.extend({}, TimeSeries.defaultOptions, options);
this.clear();
}

TimeSeries.defaultOptions = {
resetBoundsInterval: 3000,
resetBounds: true
};

/**
* Clears all data and state from this TimeSeries object.
*/
TimeSeries.prototype.clear = function() {
this.data = [];
this.maxValue = Number.NaN; // The maximum value ever seen in this TimeSeries.
this.minValue = Number.NaN; // The minimum value ever seen in this TimeSeries.
};

/**
* Recalculate the min/max values for this <code>TimeSeries</code> object.
*
* This causes the graph to scale itself in the y-axis.
*/
TimeSeries.prototype.resetBounds = function() {
if (this.data.length) {
// Walk through all data points, finding the min/max value
this.maxValue = this.data[0][1];
this.minValue = this.data[0][1];
for (var i = 1; i < this.data.length; i++) {
var value = this.data[i][1];
if (value > this.maxValue) {
this.maxValue = value;
}
if (value < this.minValue) {
this.minValue = value;
}
}
} else {
// No data exists, so set min/max to NaN
this.maxValue = Number.NaN;
this.minValue = Number.NaN;
}
};

/**
* Adds a new data point to the <code>TimeSeries</code>, preserving chronological order.
*
* @param timestamp the position, in time, of this data point
* @param value the value of this data point
* @param sumRepeatedTimeStampValues if <code>timestamp</code> has an exact match in the series, this flag controls
* whether it is replaced, or the values summed (defaults to false.)
*/
TimeSeries.prototype.append = function(timestamp, value, sumRepeatedTimeStampValues) {
// Rewind until we hit an older timestamp
var i = this.data.length - 1;
while (i >= 0 && this.data[i][0] > timestamp) {
i--;
}

if (i === -1) {
// This new item is the oldest data
this.data.splice(0, 0, [timestamp, value]);
} else if (this.data.length > 0 && this.data[i][0] === timestamp) {
// Update existing values in the array
if (sumRepeatedTimeStampValues) {
// Sum this value into the existing 'bucket'
this.data[i][1] += value;
value = this.data[i][1];
} else {
// Replace the previous value
this.data[i][1] = value;
}
} else if (i < this.data.length - 1) {
// Splice into the correct position to keep timestamps in order
this.data.splice(i + 1, 0, [timestamp, value]);
} else {
// Add to the end of the array
this.data.push([timestamp, value]);
}

this.maxValue = isNaN(this.maxValue) ? value : Math.max(this.maxValue, value);
this.minValue = isNaN(this.minValue) ? value : Math.min(this.minValue, value);
};

TimeSeries.prototype.dropOldData = function(oldestValidTime, maxDataSetLength) {
// We must always keep one expired data point as we need this to draw the
// line that comes into the chart from the left, but any points prior to that can be removed.
var removeCount = 0;
while (this.data.length - removeCount >= maxDataSetLength && this.data[removeCount + 1][0] < oldestValidTime) {
removeCount++;
}
if (removeCount !== 0) {
this.data.splice(0, removeCount);
}
};

/**
* Initialises a new <code>SmoothieChart</code>.
*
* Options are optional, and should be of the form below. Just specify the values you
* need and the rest will be given sensible defaults as shown:
*
* <pre>
* {
*   minValue: undefined,                      // specify to clamp the lower y-axis to a given value
*   maxValue: undefined,                      // specify to clamp the upper y-axis to a given value
*   maxValueScale: 1,                         // allows proportional padding to be added above the chart. for 10% padding, specify 1.1.
*   minValueScale: 1,                         // allows proportional padding to be added below the chart. for 10% padding, specify 1.1.
*   yRangeFunction: undefined,                // function({min: , max: }) { return {min: , max: }; }
*   scaleSmoothing: 0.125,                    // controls the rate at which y-value zoom animation occurs
*   millisPerPixel: 20,                       // sets the speed at which the chart pans by
*   enableDpiScaling: true,                   // support rendering at different DPI depending on the device
*   yMinFormatter: function(min, precision) { // callback function that formats the min y value label
*     return parseFloat(min).toFixed(precision);
*   },
*   yMaxFormatter: function(max, precision) { // callback function that formats the max y value label
*     return parseFloat(max).toFixed(precision);
*   },
*   maxDataSetLength: 2,
*   interpolation: 'bezier'                   // one of 'bezier', 'linear', or 'step'
*   timestampFormatter: null,                 // optional function to format time stamps for bottom of chart
*                                             // you may use SmoothieChart.timeFormatter, or your own: function(date) { return ''; }
*   scrollBackwards: false,                   // reverse the scroll direction of the chart
*   horizontalLines: [],                      // [ { value: 0, color: '#ffffff', lineWidth: 1 } ]
*   grid:
*   {
*     fillStyle: '#000000',                   // the background colour of the chart
*     lineWidth: 1,                           // the pixel width of grid lines
*     strokeStyle: '#777777',                 // colour of grid lines
*     millisPerLine: 1000,                    // distance between vertical grid lines
*     sharpLines: false,                      // controls whether grid lines are 1px sharp, or softened
*     verticalSections: 2,                    // number of vertical sections marked out by horizontal grid lines
*     borderVisible: true                     // whether the grid lines trace the border of the chart or not
*   },
*   labels
*   {
*     disabled: false,                        // enables/disables labels showing the min/max values
*     fillStyle: '#ffffff',                   // colour for text of labels,
*     fontSize: 15,
*     fontFamily: 'sans-serif',
*     precision: 2
*   }
* }
* </pre>
*
* @constructor
*/
function SmoothieChart(options) {
this.options = Util.extend({}, SmoothieChart.defaultChartOptions, options);
this.seriesSet = [];
this.currentValueRange = 1;
this.currentVisMinValue = 0;
this.lastRenderTimeMillis = 0;
}

SmoothieChart.defaultChartOptions = {
millisPerPixel: 20,
enableDpiScaling: true,
yMinFormatter: function(min, precision) {
return parseFloat(min).toFixed(precision);
},
yMaxFormatter: function(max, precision) {
return parseFloat(max).toFixed(precision);
},
maxValueScale: 1,
minValueScale: 1,
interpolation: 'bezier',
scaleSmoothing: 0.125,
maxDataSetLength: 2,
scrollBackwards: false,
grid: {
fillStyle: '#ACACAC',
strokeStyle: '#777777',
lineWidth: 1,
sharpLines: false,
millisPerLine: 1000,
verticalSections: 2,
borderVisible: true
},
labels: {
fillStyle: '#ffffff',
disabled: false,
fontSize: 10,
fontFamily: 'monospace',
precision: 2
},
horizontalLines: []
};

// Based on http://inspirit.github.com/jsfeat/js/compatibility.js
SmoothieChart.AnimateCompatibility = (function() {
var requestAnimationFrame = function(callback, element) {
var requestAnimationFrame =
window.requestAnimationFrame ||
window.webkitRequestAnimationFrame ||
window.mozRequestAnimationFrame ||
window.oRequestAnimationFrame ||
window.msRequestAnimationFrame ||
function(callback) {
return window.setTimeout(function() {
callback(new Date().getTime());
}, 16);
};
return requestAnimationFrame.call(window, callback, element);
},
cancelAnimationFrame = function(id) {
var cancelAnimationFrame =
window.cancelAnimationFrame ||
function(id) {
clearTimeout(id);
};
return cancelAnimationFrame.call(window, id);
};

return {
requestAnimationFrame: requestAnimationFrame,
cancelAnimationFrame: cancelAnimationFrame
};
})();

SmoothieChart.defaultSeriesPresentationOptions = {
lineWidth: 1,
strokeStyle: '#ffffff'
};

/**
* Adds a <code>TimeSeries</code> to this chart, with optional presentation options.
*
* Presentation options should be of the form (defaults shown):
*
* <pre>
* {
*   lineWidth: 1,
*   strokeStyle: '#ffffff',
*   fillStyle: undefined
* }
* </pre>
*/
SmoothieChart.prototype.addTimeSeries = function(timeSeries, options) {
this.seriesSet.push({
timeSeries: timeSeries,
options: Util.extend({}, SmoothieChart.defaultSeriesPresentationOptions, options)
});
if (timeSeries.options.resetBounds && timeSeries.options.resetBoundsInterval > 0) {
timeSeries.resetBoundsTimerId = setInterval(
function() {
timeSeries.resetBounds();
},
timeSeries.options.resetBoundsInterval
);
}
};

/**
* Removes the specified <code>TimeSeries</code> from the chart.
*/
SmoothieChart.prototype.removeTimeSeries = function(timeSeries) {
// Find the correct timeseries to remove, and remove it
var numSeries = this.seriesSet.length;
for (var i = 0; i < numSeries; i++) {
if (this.seriesSet[i].timeSeries === timeSeries) {
this.seriesSet.splice(i, 1);
break;
}
}
// If a timer was operating for that timeseries, remove it
if (timeSeries.resetBoundsTimerId) {
// Stop resetting the bounds, if we were
clearInterval(timeSeries.resetBoundsTimerId);
}
};

/**
* Gets render options for the specified <code>TimeSeries</code>.
*
* As you may use a single <code>TimeSeries</code> in multiple charts with different formatting in each usage,
* these settings are stored in the chart.
*/
SmoothieChart.prototype.getTimeSeriesOptions = function(timeSeries) {
// Find the correct timeseries to remove, and remove it
var numSeries = this.seriesSet.length;
for (var i = 0; i < numSeries; i++) {
if (this.seriesSet[i].timeSeries === timeSeries) {
return this.seriesSet[i].options;
}
}
};

/**
* Brings the specified <code>TimeSeries</code> to the top of the chart. It will be rendered last.
*/
SmoothieChart.prototype.bringToFront = function(timeSeries) {
// Find the correct timeseries to remove, and remove it
var numSeries = this.seriesSet.length;
for (var i = 0; i < numSeries; i++) {
if (this.seriesSet[i].timeSeries === timeSeries) {
var set = this.seriesSet.splice(i, 1);
this.seriesSet.push(set[0]);
break;
}
}
};

/**
* Instructs the <code>SmoothieChart</code> to start rendering to the provided canvas, with specified delay.
*
* @param canvas the target canvas element
* @param delayMillis an amount of time to wait before a data point is shown. This can prevent the end of the series
* from appearing on screen, with new values flashing into view, at the expense of some latency.
*/
SmoothieChart.prototype.streamTo = function(canvas, delayMillis) {
this.canvas = canvas;
this.delay = delayMillis;
this.start();
};

/**
* Make sure the canvas has the optimal resolution for the device's pixel ratio.
*/
SmoothieChart.prototype.resize = function() {
// TODO this function doesn't handle the value of enableDpiScaling changing during execution
if (!this.options.enableDpiScaling || !window || window.devicePixelRatio === 1)
return;

var dpr = window.devicePixelRatio;
var width = parseInt(this.canvas.getAttribute('width'));
var height = parseInt(this.canvas.getAttribute('height'));

if (!this.originalWidth || (Math.floor(this.originalWidth * dpr) !== width)) {
this.canvas.setAttribute('width', (Math.floor(width * dpr)).toString());
this.canvas.style.width = width + 'px';
this.canvas.getContext('2d').scale(dpr, dpr);
}

if (!this.originalHeight || (Math.floor(this.originalHeight * dpr) !== height)) {
this.originalHeight = height;
this.canvas.setAttribute('height', (Math.floor(height * dpr)).toString());
this.canvas.style.height = height + 'px';
this.canvas.getContext('2d').scale(dpr, dpr);
}
};

/**
* Starts the animation of this chart.
*/
SmoothieChart.prototype.start = function() {
if (this.frame) {
// We're already running, so just return
return;
}

// Renders a frame, and queues the next frame for later rendering
var animate = function() {
this.frame = SmoothieChart.AnimateCompatibility.requestAnimationFrame(function() {
this.render();
animate();
}.bind(this));
}.bind(this);

animate();
};

/**
* Stops the animation of this chart.
*/
SmoothieChart.prototype.stop = function() {
if (this.frame) {
SmoothieChart.AnimateCompatibility.cancelAnimationFrame(this.frame);
delete this.frame;
}
};

SmoothieChart.prototype.updateValueRange = function() {
// Calculate the current scale of the chart, from all time series.
var chartOptions = this.options,
chartMaxValue = Number.NaN,
chartMinValue = Number.NaN;

for (var d = 0; d < this.seriesSet.length; d++) {
// TODO(ndunn): We could calculate / track these values as they stream in.
var timeSeries = this.seriesSet[d].timeSeries;
if (!isNaN(timeSeries.maxValue)) {
chartMaxValue = !isNaN(chartMaxValue) ? Math.max(chartMaxValue, timeSeries.maxValue) : timeSeries.maxValue;
}

if (!isNaN(timeSeries.minValue)) {
chartMinValue = !isNaN(chartMinValue) ? Math.min(chartMinValue, timeSeries.minValue) : timeSeries.minValue;
}
}

// Scale the chartMaxValue to add padding at the top if required
if (chartOptions.maxValue != null) {
chartMaxValue = chartOptions.maxValue;
} else {
chartMaxValue *= chartOptions.maxValueScale;
}

// Set the minimum if we've specified one
if (chartOptions.minValue != null) {
chartMinValue = chartOptions.minValue;
} else {
chartMinValue -= Math.abs(chartMinValue * chartOptions.minValueScale - chartMinValue);
}

// If a custom range function is set, call it
if (this.options.yRangeFunction) {
var range = this.options.yRangeFunction({
min: chartMinValue,
max: chartMaxValue
});
chartMinValue = range.min;
chartMaxValue = range.max;
}

if (!isNaN(chartMaxValue) && !isNaN(chartMinValue)) {
var targetValueRange = chartMaxValue - chartMinValue;
var valueRangeDiff = (targetValueRange - this.currentValueRange);
var minValueDiff = (chartMinValue - this.currentVisMinValue);
this.isAnimatingScale = Math.abs(valueRangeDiff) > 0.1 || Math.abs(minValueDiff) > 0.1;
this.currentValueRange += chartOptions.scaleSmoothing * valueRangeDiff;
this.currentVisMinValue += chartOptions.scaleSmoothing * minValueDiff;
}

this.valueRange = {
min: chartMinValue,
max: chartMaxValue
};
};

SmoothieChart.prototype.render = function(canvas, time) {
var nowMillis = new Date().getTime();

if (!this.isAnimatingScale) {
// We're not animating. We can use the last render time and the scroll speed to work out whether
// we actually need to paint anything yet. If not, we can return immediately.

// Render at least every 1/6th of a second. The canvas may be resized, which there is
// no reliable way to detect.
var maxIdleMillis = Math.min(1000 / 6, this.options.millisPerPixel);

if (nowMillis - this.lastRenderTimeMillis < maxIdleMillis) {
return;
}
}

this.resize();

this.lastRenderTimeMillis = nowMillis;

canvas = canvas || this.canvas;
time = time || nowMillis - (this.delay || 0);

// Round time down to pixel granularity, so motion appears smoother.
time -= time % this.options.millisPerPixel;

var context = canvas.getContext('2d'),
chartOptions = this.options,
dimensions = {
top: 0,
left: 0,
width: canvas.clientWidth,
height: canvas.clientHeight
},
// Calculate the threshold time for the oldest data points.
oldestValidTime = time - (dimensions.width * chartOptions.millisPerPixel),
valueToYPixel = function(value) {
var offset = value - this.currentVisMinValue;
return this.currentValueRange === 0 ?
dimensions.height :
dimensions.height - (Math.round((offset / this.currentValueRange) * dimensions.height));
}.bind(this),
timeToXPixel = function(t) {
if (chartOptions.scrollBackwards) {
return Math.round((time - t) / chartOptions.millisPerPixel);
}
return Math.round(dimensions.width - ((time - t) / chartOptions.millisPerPixel));
};

this.updateValueRange();

context.font = chartOptions.labels.fontSize + 'px ' + chartOptions.labels.fontFamily;

// Save the state of the canvas context, any transformations applied in this method
// will get removed from the stack at the end of this method when .restore() is called.
context.save();

// Move the origin.
context.translate(dimensions.left, dimensions.top);

// Create a clipped rectangle - anything we draw will be constrained to this rectangle.
// This prevents the occasional pixels from curves near the edges overrunning and creating
// screen cheese (that phrase should need no explanation).
context.beginPath();
context.rect(0, 0, dimensions.width, dimensions.height);
context.clip();

// Clear the working area.
context.save();
context.fillStyle = chartOptions.grid.fillStyle;
context.clearRect(0, 0, dimensions.width, dimensions.height);
context.fillRect(0, 0, dimensions.width, dimensions.height);
context.restore();

// Grid lines...
context.save();
context.lineWidth = chartOptions.grid.lineWidth;
context.strokeStyle = chartOptions.grid.strokeStyle;
// Vertical (time) dividers.
if (chartOptions.grid.millisPerLine > 0) {
context.beginPath();
for (var t = time - (time % chartOptions.grid.millisPerLine); t >= oldestValidTime; t -= chartOptions.grid.millisPerLine) {
var gx = timeToXPixel(t);
if (chartOptions.grid.sharpLines) {
gx -= 0.5;
}
context.moveTo(gx, 0);
context.lineTo(gx, dimensions.height);
}
context.stroke();
context.closePath();
}

// Horizontal (value) dividers.
for (var v = 1; v < chartOptions.grid.verticalSections; v++) {
var gy = Math.round(v * dimensions.height / chartOptions.grid.verticalSections);
if (chartOptions.grid.sharpLines) {
gy -= 0.5;
}
context.beginPath();
context.moveTo(0, gy);
context.lineTo(dimensions.width, gy);
context.stroke();
context.closePath();
}
// Bounding rectangle.
if (chartOptions.grid.borderVisible) {
context.beginPath();
context.strokeRect(0, 0, dimensions.width, dimensions.height);
context.closePath();
}
context.restore();

// Draw any horizontal lines...
if (chartOptions.horizontalLines && chartOptions.horizontalLines.length) {
for (var hl = 0; hl < chartOptions.horizontalLines.length; hl++) {
var line = chartOptions.horizontalLines[hl],
hly = Math.round(valueToYPixel(line.value)) - 0.5;
context.strokeStyle = line.color || '#ffffff';
context.lineWidth = line.lineWidth || 1;
context.beginPath();
context.moveTo(0, hly);
context.lineTo(dimensions.width, hly);
context.stroke();
context.closePath();
}
}

// For each data set...
for (var d = 0; d < this.seriesSet.length; d++) {
context.save();
var timeSeries = this.seriesSet[d].timeSeries,
dataSet = timeSeries.data,
seriesOptions = this.seriesSet[d].options;

// Delete old data that's moved off the left of the chart.
timeSeries.dropOldData(oldestValidTime, chartOptions.maxDataSetLength);

// Set style for this dataSet.
context.lineWidth = seriesOptions.lineWidth;
context.strokeStyle = seriesOptions.strokeStyle;
// Draw the line...
context.beginPath();
// Retain lastX, lastY for calculating the control points of bezier curves.
var firstX = 0,
lastX = 0,
lastY = 0;
for (var i = 0; i < dataSet.length && dataSet.length !== 1; i++) {
var x = timeToXPixel(dataSet[i][0]),
y = valueToYPixel(dataSet[i][1]);

if (i === 0) {
firstX = x;
context.moveTo(x, y);
} else {
switch (chartOptions.interpolation) {
case "linear":
case "line": {
context.lineTo(x, y);
break;
}
case "bezier":
default: {
// Great explanation of Bezier curves: http://en.wikipedia.org/wiki/Bezier_curve#Quadratic_curves
//
// Assuming A was the last point in the line plotted and B is the new point,
// we draw a curve with control points P and Q as below.
//
// A---P
//     |
//     |
//     |
//     Q---B
//
// Importantly, A and P are at the same y coordinate, as are B and Q. This is
// so adjacent curves appear to flow as one.
//
context.bezierCurveTo( // startPoint (A) is implicit from last iteration of loop
Math.round((lastX + x) / 2), lastY, // controlPoint1 (P)
Math.round((lastX + x)) / 2, y, // controlPoint2 (Q)
x, y); // endPoint (B)
break;
}
case "step": {
context.lineTo(x, lastY);
context.lineTo(x, y);
break;
}
}
}

lastX = x;
lastY = y;
}

if (dataSet.length > 1) {
if (seriesOptions.fillStyle) {
// Close up the fill region.
context.lineTo(dimensions.width + seriesOptions.lineWidth + 1, lastY);
context.lineTo(dimensions.width + seriesOptions.lineWidth + 1, dimensions.height + seriesOptions.lineWidth + 1);
context.lineTo(firstX, dimensions.height + seriesOptions.lineWidth);
context.fillStyle = seriesOptions.fillStyle;
context.fill();
}

if (seriesOptions.strokeStyle && seriesOptions.strokeStyle !== 'none') {
context.stroke();
}
context.closePath();
}
context.restore();
}

// Draw the axis values on the chart.
if (!chartOptions.labels.disabled && !isNaN(this.valueRange.min) && !isNaN(this.valueRange.max)) {
var maxValueString = chartOptions.yMaxFormatter(this.valueRange.max, chartOptions.labels.precision),
minValueString = chartOptions.yMinFormatter(this.valueRange.min, chartOptions.labels.precision),
maxLabelPos = chartOptions.scrollBackwards ? 0 : dimensions.width - context.measureText(maxValueString).width - 2,
minLabelPos = chartOptions.scrollBackwards ? 0 : dimensions.width - context.measureText(minValueString).width - 2;
context.fillStyle = chartOptions.labels.fillStyle;
context.clearRect(0, 0, context.measureText(maxValueString).width + 4, dimensions.height);
context.save();
context.lineWidth = chartOptions.grid.lineWidth;
context.strokeStyle = chartOptions.grid.strokeStyle;
context.beginPath();
context.moveTo(context.measureText(maxValueString).width + 4, 0);
context.lineTo(context.measureText(maxValueString).width + 4, dimensions.height);
context.lineTo(dimensions.width, dimensions.height);
context.stroke();
context.closePath();
context.restore();
//context.fillText(maxValueString, 2, chartOptions.labels.fontSize);
//context.fillText(minValueString/2, 2, dimensions.height - 2);
var i = (parseFloat(maxValueString) - parseFloat(minValueString)) / chartOptions.grid.verticalSections;
var h = dimensions.height / chartOptions.grid.verticalSections;
if (chartOptions.yMaxFormatter(this.valueRange.min, chartOptions.labels.precision) != chartOptions.yMaxFormatter(this.valueRange.min + i, chartOptions.labels.precision))
for (var p = 0; p < chartOptions.grid.verticalSections; p++) {
context.fillText(chartOptions.yMaxFormatter(this.valueRange.min + (p * i), chartOptions.labels.precision), 2, dimensions.height - (p * h));
}
}

// Display timestamps along x-axis at the bottom of the chart.
if (chartOptions.timestampFormatter && chartOptions.grid.millisPerLine > 0) {
var textUntilX = chartOptions.scrollBackwards ?
context.measureText(minValueString).width :
dimensions.width - context.measureText(minValueString).width + 4;
for (var t = time - (time % chartOptions.grid.millisPerLine); t >= oldestValidTime; t -= chartOptions.grid.millisPerLine) {
var gx = timeToXPixel(t);
// Only draw the timestamp if it won't overlap with the previously drawn one.
if ((!chartOptions.scrollBackwards && gx < textUntilX) || (chartOptions.scrollBackwards && gx > textUntilX)) {
// Formats the timestamp based on user specified formatting function
// SmoothieChart.timeFormatter function above is one such formatting option
var tx = new Date(t),
ts = chartOptions.timestampFormatter(tx),
tsWidth = context.measureText(ts).width;

textUntilX = chartOptions.scrollBackwards ?
gx + tsWidth + 2 :
gx - tsWidth - 2;

context.fillStyle = chartOptions.labels.fillStyle;
if (chartOptions.scrollBackwards) {
context.fillText(ts, gx, dimensions.height - 2);
} else {
context.fillText(ts, gx - tsWidth, dimensions.height - 2);
}
}
}
}

context.restore(); // See .save() above.
};

// Sample timestamp formatting function
SmoothieChart.timeFormatter = function(date) {
function pad2(number) {
return (number < 10 ? '0' : '') + number
}
return pad2(date.getHours()) + ':' + pad2(date.getMinutes()) + ':' + pad2(date.getSeconds());
};

exports.TimeSeries = TimeSeries;
exports.SmoothieChart = SmoothieChart;

})(typeof exports === 'undefined' ? this : exports);

</script>
<!-- prh moved smoothie above temperatures -->
<script>
var interval_temperature = -1;
var graph_started = false;

var smoothieextuder = new SmoothieChart({
millisPerPixel: 200,
maxValueScale: 1.1,
minValueScale: 1.1,
enableDpiScaling: false,
interpolation: "linear",
grid: {
fillStyle: "#ffffff",
strokeStyle: "rgba(128,128,128,0.5)",
verticalSections: 5,
millisPerLine: 0,
borderVisible: false,
},
labels: {
fillStyle: "#000000",
precision: 1,
},
});
var smoothiebed = new SmoothieChart({
millisPerPixel: 200,
interpolation: "linear",
maxValueScale: 1.1,
minValueScale: 1.1,
enableDpiScaling: false,
grid: {
fillStyle: "#ffffff",
strokeStyle: "rgba(128,128,128,0.5)",
verticalSections: 5,
millisPerLine: 0,
borderVisible: false,
},
labels: {
fillStyle: "#000000",
precision: 1,
},
});
var extruder_0_line = new TimeSeries();
var extruder_1_line = new TimeSeries();
var extruder_redundant_line = new TimeSeries();
var probe_line = new TimeSeries();
var bed_line = new TimeSeries();
var chamber_line = new TimeSeries();

function init_temperature_panel() {
smoothiebed.addTimeSeries(bed_line, {
lineWidth: 1,
strokeStyle: "#808080",
fillStyle: "rgba(128,128,128,0.3)",
});
smoothieextuder.addTimeSeries(extruder_0_line, {
lineWidth: 1,
strokeStyle: "#ff8080",
fillStyle: "rgba(255,128,128,0.3)",
});
smoothieextuder.streamTo(
document.getElementById("extruderTempgraph"),
3000 /*delay*/
);
smoothiebed.streamTo(document.getElementById("bedTempgraph"), 3000 /*delay*/);
}

function temperature_second_extruder(enabled) {
if (enabled) {
smoothieextuder.addTimeSeries(extruder_1_line, {
lineWidth: 1,
strokeStyle: "#000080",
});
} else {
smoothieextuder.removeTimeSeries(extruder_1_line);
}
}

function temperature_extruder_redundant(enabled) {
if (enabled) {
smoothieextuder.addTimeSeries(extruder_redundant_line, {
lineWidth: 1,
strokeStyle: "#808080",
});
} else {
smoothieextuder.removeTimeSeries(extruder_redundant_line);
}
}

function temperature_probe(enabled) {
if (enabled) {
smoothiebed.addTimeSeries(probe_line, {
lineWidth: 1,
strokeStyle: "#202080",
});
} else {
smoothiebed.removeTimeSeries(probe_line);
}
}

function temperature_chamber(enabled) {
if (enabled) {
smoothiebed.addTimeSeries(chamber_line, {
lineWidth: 1,
strokeStyle: "#202020",
});
} else {
smoothiebed.removeTimeSeries(chamber_line);
}
}

function start_graph_output() {
document.getElementById("temperatures_output").style.display = "block";
smoothieextuder.start();
smoothiebed.start();
graph_started = true;
}

function stop_graph_output() {
smoothieextuder.stop();
smoothiebed.stop();
graph_started = false;
}

function on_autocheck_temperature(use_value) {
if (typeof use_value !== "undefined")
document.getElementById("autocheck_temperature").checked = use_value;
if (document.getElementById("autocheck_temperature").checked) {
var interval = parseInt(
document.getElementById("tempInterval_check").value
);
if (!isNaN(interval) && interval > 0 && interval < 100) {
if (interval_temperature != -1) clearInterval(interval_temperature);
interval_temperature = setInterval(function () {
get_Temperatures();
}, interval * 1000);
start_graph_output();
} else {
document.getElementById("autocheck_temperature").checked = false;
document.getElementById("tempInterval_check").value = 0;
if (interval_temperature != -1) clearInterval(interval_temperature);
interval_temperature = -1;
stop_graph_output();
}
} else {
if (interval_temperature != -1) clearInterval(interval_temperature);
interval_temperature = -1;
stop_graph_output();
}
}

function onTempIntervalChange() {
var interval = parseInt(document.getElementById("tempInterval_check").value);
if (!isNaN(interval) && interval > 0 && interval < 100) {
on_autocheck_temperature();
} else {
document.getElementById("autocheck_temperature").checked = false;
document.getElementById("tempInterval_check").value = 0;
if (interval != 0)
alertdlg(
translate_text_item("Out of range"),
translate_text_item("Value of auto-check must be between 0s and 99s !!")
);
on_autocheck_temperature();
}
}

function get_Temperatures() {
var command = "M105";
command =
preferenceslist[0].enable_redundant === "true" &&
supportsRedundantTemperatures()
? command + " R"
: command;
//endRemoveIf(production)
if (target_firmware == "marlin-embedded")
SendPrinterCommand(command, false, null, null, 105, 1);
else SendPrinterCommand(command, false, process_Temperatures, null, 105, 1);
}

function submit_target_temperature(target, selectedTemp) {
var type = 104;
if (target == "bed") {
type = 140;
} else if (target == "chamber") {
type = 141;
}
var command = "M" + type + " S" + selectedTemp;
if (target != "bed" && target != "chamber") {
command += " " + target;
}
SendPrinterCommand(command, true, get_Temperatures);
}

function process_Temperatures(response) {
var regex_temp = /(B|C|P|R|T(\d*)):\s*([+]?[0-9]*\.?[0-9]+)? (\/)([+]?[0-9]*\.?[0-9]+)?/gi;
var result;
var timedata = new Date().getTime();
while ((result = regex_temp.exec(response)) !== null) {
var tool = result[1];
var value = "<span>" + parseFloat(result[3]).toFixed(2).toString() + "C";
var value2;
if (isNaN(parseFloat(result[5]))) value2 = "0.00";
else value2 = parseFloat(result[5]).toFixed(2).toString();
value += "</span>&nbsp;<span>|</span>&nbsp;" + value2 + "C</span>";
//console.log(tool, ":", result[3]);
if (tool == "T" || tool == "T0") {
//to push to graph
extruder_0_line.append(timedata, parseFloat(result[3]));
document.getElementById("heaterT0DisplayTemp").innerHTML = value;
//to see if heating or not
if (Number(value2) > 0)
document.getElementById("heaterT0TargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("heaterT0TargetTemp_anime").style.visibility =
"hidden";
} else if (tool == "R") {
extruder_redundant_line.append(timedata, parseFloat(result[3]));
document.getElementById("heaterRDisplayTemp").innerHTML = value;
if (Number(value2) > 0)
document.getElementById("heaterRTargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("heaterRTargetTemp_anime").style.visibility =
"hidden";
} else if (tool == "T1") {
extruder_1_line.append(timedata, parseFloat(result[3]));
document.getElementById("heaterT1DisplayTemp").innerHTML = value;
if (Number(value2) > 0)
document.getElementById("heaterT1TargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("heaterT1TargetTemp_anime").style.visibility =
"hidden";
} else if (tool == "P") {
probe_line.append(timedata, parseFloat(result[3]));
document.getElementById("probeDisplayTemp").innerHTML = value;
if (Number(value2) > 0)
document.getElementById("probeTargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("probeTargetTemp_anime").style.visibility =
"hidden";
} else if (tool == "B") {
bed_line.append(timedata, parseFloat(result[3]));
document.getElementById("bedDisplayTemp").innerHTML = value;
if (Number(value2) > 0)
document.getElementById("bedTargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("bedTargetTemp_anime").style.visibility =
"hidden";
} else if (tool == "C") {
chamber_line.append(timedata, parseFloat(result[3]));
document.getElementById("chamberDisplayTemp").innerHTML = value;
if (Number(value2) > 0)
document.getElementById("chamberTargetTemp_anime").style.visibility =
"visible";
else
document.getElementById("chamberTargetTemp_anime").style.visibility =
"hidden";
}
}
}

function temperature_heatOff(target) {
switch (target) {
case "T0":
document.getElementById("heaterT0SelectedTemp").value = 0;
document.getElementById("heaterT0TargetTemp_anime").style.visibility =
"hidden";
document.getElementById("heaterRDisplayTemp").value = 0;
document.getElementById("heaterRTargetTemp_anime").style.visibility =
"hidden";
break;
case "T1":
document.getElementById("heaterT1SelectedTemp").value = 0;
document.getElementById("heaterT1TargetTemp_anime").style.visibility =
"hidden";
break;
case "bed":
document.getElementById("bedSelectedTemp").value = 0;
document.getElementById("bedTargetTemp_anime").style.visibility =
"hidden";
break;
case "chamber":
document.getElementById("chamberSelectedTemp").value = 0;
document.getElementById("chamberTargetTemp_anime").style.visibility =
"hidden";
break;
}

submit_target_temperature(target, 0);
}

function temperature_handleKeyUp(event, target) {
if (event.keyCode == 13) {
temperature_heatSet(target);
}
return true;
}

function temperature_heatSet(target) {
var selectedTemp = 0;
switch (target) {
case "T0":
selectedTemp = parseInt(
document.getElementById("heaterT0SelectedTemp").value
);
if (
selectedTemp < 0 ||
selectedTemp > 999 ||
isNaN(selectedTemp) ||
selectedTemp === null
) {
alertdlg(
translate_text_item("Out of range"),
translate_text_item(
"Value must be between 0 degrees and 999 degrees !"
)
);
return;
}
break;
case "T1":
selectedTemp = parseInt(
document.getElementById("heaterT1SelectedTemp").value
);
if (
selectedTemp < 0 ||
selectedTemp > 999 ||
isNaN(selectedTemp) ||
selectedTemp === null
) {
alertdlg(
translate_text_item("Out of range"),
translate_text_item(
"Value must be between 0 degrees and 999 degrees !"
)
);
return;
}
break;
case "bed":
selectedTemp = parseInt(document.getElementById("bedSelectedTemp").value);
if (
selectedTemp < 0 ||
selectedTemp > 999 ||
isNaN(selectedTemp) ||
selectedTemp === null
) {
alertdlg(
translate_text_item("Out of range"),
translate_text_item(
"Value must be between 0 degrees and 999 degrees !"
)
);
return;
}
break;
case "chamber":
selectedTemp = parseInt(
document.getElementById("chamberSelectedTemp").value
);
if (
selectedTemp < 0 ||
selectedTemp > 999 ||
isNaN(selectedTemp) ||
selectedTemp === null
) {
alertdlg(
translate_text_item("Out of range"),
translate_text_item(
"Value must be between 0 degrees and 999 degrees !"
)
);
return;
}
break;
}

submit_target_temperature(target, selectedTemp);
}

function supportsRedundantTemperatures() {
return (
target_firmware == "marlin-embedded" ||
target_firmware == "marlin" ||
target_firmware == "smoothieware"
);
}

function supportsProbeTemperatures() {
return (
target_firmware == "marlin-embedded" ||
target_firmware == "marlin" ||
target_firmware == "smoothieware"
);
}

function supportsChamberTemperatures() {
return (
target_firmware == "marlin-embedded" ||
target_firmware == "marlin" ||
target_firmware == "marlinkimbra" ||
target_firmware == "smoothieware"
);
}

</script>
<script>
var interval_position = -1;
var control_macrolist = [];


function init_controls_panel() {
loadmacrolist();
}

function hideAxiscontrols() {
document.getElementById('JogBar').style.display = 'none';
document.getElementById('HomeZ').style.display = 'none';
document.getElementById('CornerZ').style.display = 'block';
document.getElementById('control_z_position_display').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
document.getElementById('z_velocity_display').style.display = 'none';
}

function showAxiscontrols() {
document.getElementById('CornerZ').style.display = 'none';
document.getElementById('JogBar').style.display = 'block';
document.getElementById('HomeZ').style.display = 'block';
document.getElementById('control_z_position_display').style.display = 'block';
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) {
document.getElementById('control_zm_position_row').style.display = 'table-row';
}
document.getElementById('z_velocity_display').style.display = 'inline';

}

function loadmacrolist() {
control_macrolist = [];
var url = "/macrocfg.json" + "?" + Date.now();
//endRemoveIf(production)
SendGetHttp(url, processMacroGetSuccess, processMacroGetFailed);
}

function Macro_build_list(response_text) {
var response = [];
try {
if (response_text.length != 0) {
response = JSON.parse(response_text);
}
} catch (e) {
console.error("Parsing error:", e);
}
for (var i = 0; i < 9; i++) {
var entry;
if ((response.length != 0) && (typeof(response[i].name) !== 'undefined' && typeof(response[i].glyph) !== 'undefined' && typeof(response[i].filename) !== 'undefined' && typeof(response[i].target) !== 'undefined' && typeof(response[i].class) !== 'undefined' && typeof(response[i].index) !== 'undefined')) {
entry = {
name: response[i].name,
glyph: response[i].glyph,
filename: response[i].filename,
target: response[i].target,
class: response[i].class,
index: response[i].index
};
} else {
entry = {
name: '',
glyph: '',
filename: '',
target: '',
class: '',
index: i
};
}
control_macrolist.push(entry);
}
control_build_macro_ui();
}

function processMacroGetSuccess(response) {
if (response.indexOf("<HTML>") == -1) Macro_build_list(response);
else Macro_build_list("");
}

function processMacroGetFailed(errorcode, response) {
console.log("Error " + errorcode + " : " + response);
Macro_build_list("");
}

function on_autocheck_position(use_value) {
if (typeof(use_value) !== 'undefined') document.getElementById('autocheck_position').checked = use_value;
if (document.getElementById('autocheck_position').checked) {
var interval = parseInt(document.getElementById('posInterval_check').value);
if (!isNaN(interval) && interval > 0 && interval < 100) {
if (interval_position != -1) clearInterval(interval_position);
interval_position = setInterval(function() {
get_Position()
}, interval * 1000);
} else {
document.getElementById('autocheck_position').checked = false;
document.getElementById('posInterval_check').value = 0;
if (interval_position != -1) clearInterval(interval_position);
interval_position = -1;
}
} else {
if (interval_position != -1) clearInterval(interval_position);
interval_position = -1;
}
}

function onPosIntervalChange() {
var interval = parseInt(document.getElementById('posInterval_check').value);
if (!isNaN(interval) && interval > 0 && interval < 100) {
on_autocheck_position();
} else {
document.getElementById('autocheck_position').checked = false;
document.getElementById('posInterval_check').value = 0;
if (interval != 0) alertdlg(translate_text_item("Out of range"), translate_text_item("Value of auto-check must be between 0s and 99s !!"));
on_autocheck_position();
}
}

function get_Position() {
var command = "M114";
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
command = "?";
SendPrinterCommand(command, false, null, null, 114, 1);
} else if (target_firmware == "marlin-embedded") {
SendPrinterCommand(command, false, null, null, 114, 1);
} else SendPrinterCommand(command, false, process_Position, null, 114, 1);
}

function Control_get_position_value(label, result_data) {
var result = "";
var pos1 = result_data.indexOf(label, 0);
if (pos1 > -1) {
pos1 += label.length;
var pos2 = result_data.indexOf(" ", pos1);
if (pos2 > -1) {
result = result_data.substring(pos1, pos2);
} else result = result_data.substring(pos1);
}
return result.trim();
}

function process_Position(response) {
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) {
process_grbl_position(response);
} else {
document.getElementById('control_x_position').innerHTML = Control_get_position_value("X:", response);
document.getElementById('control_y_position').innerHTML = Control_get_position_value("Y:", response);
document.getElementById('control_z_position').innerHTML = Control_get_position_value("Z:", response);
}
}

function control_motorsOff() {
var command = "M84";
SendPrinterCommand(command, true);
}

function SendHomecommand(cmd) {
if (document.getElementById('lock_UI').checked) return;
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) {
switch (cmd) {
case 'G28':
cmd = '$H';
break;
case 'G28 X0':
cmd = '$HX';
break;
case 'G28 Y0':
cmd = '$HY';
break;

case 'G28 Z0':
if (grblaxis > 3) {
cmd = '$H' + document.getElementById('control_select_axis').value;
} else cmd = '$HZ';
break;
default:
cmd = '$H';
break;
}

}
SendPrinterCommand(cmd, true, get_Position);
}

function SendZerocommand(cmd) {
var command = "G10 L20 P0 " + cmd;
SendPrinterCommand(command, true, get_Position);
}

function SendJogcommand(cmd, feedrate) {
if (document.getElementById('lock_UI').checked) return;
var feedratevalue = "";
var command = "";
if (feedrate == "XYfeedrate") {
feedratevalue = parseInt(document.getElementById('control_xy_velocity').value);
if (feedratevalue < 1 || isNaN(feedratevalue) || (feedratevalue === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("XY Feedrate value must be at least 1 mm/min!"));
document.getElementById('control_xy_velocity').value = preferenceslist[0].xy_feedrate;
return;
}
} else {
feedratevalue = parseInt(document.getElementById('control_z_velocity').value);
if (feedratevalue < 1 || isNaN(feedratevalue) || (feedratevalue === null)) {
var letter = "Z";
if ((target_firmware == "grbl-embedded") && (grblaxis > 3)) letter = "Axis";
alertdlg(translate_text_item("Out of range"), translate_text_item( letter +" Feedrate value must be at least 1 mm/min!"));
document.getElementById('control_z_velocity').value = preferenceslist[0].z_feedrate;
return;
}
}
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) {
if(grblaxis > 3){
var letter = document.getElementById('control_select_axis').value;
cmd = cmd.replace("Z", letter);
}
command = "$J=G91 G21 F" + feedratevalue + " " + cmd;
console.log(command);
} else command = "G91\nG1 " + cmd + " F" + feedratevalue + "\nG90";
SendPrinterCommand(command, true, get_Position);
}

function onXYvelocityChange() {
var feedratevalue = parseInt(document.getElementById('control_xy_velocity').value);
if (feedratevalue < 1 || feedratevalue > 9999 || isNaN(feedratevalue) || (feedratevalue === null)) {
//we could display error but we do not
}
}

function onZvelocityChange() {
var feedratevalue = parseInt(document.getElementById('control_z_velocity').value);
if (feedratevalue < 1 || feedratevalue > 999 || isNaN(feedratevalue) || (feedratevalue === null)) {
//we could display error but we do not
}
}


function processMacroSave(answer) {
if (answer == "ok") {
//console.log("now rebuild list");
control_build_macro_ui();
}
}

function control_build_macro_button(index) {
var content = "";
var entry = control_macrolist[index];
content += "<button class='btn fixedbutton " + control_macrolist[index].class + "' type='text' ";
if (entry.glyph.length == 0) {
content += "style='display:none'";
}
content += "onclick='macro_command (\"" + entry.target + "\",\"" + entry.filename + "\")'";
content += "><span style='position:relative; top:3px;'>";
if (entry.glyph.length == 0) {
content += get_icon_svg("star");
} else content += get_icon_svg(entry.glyph);
content += "</span>";
if (entry.name.length > 0) {
content += "&nbsp;";
}
content += entry.name;
content += "</button>";

return content;
}

function control_build_macro_ui() {
var content = "<button class='btn btn-primary' onclick='showmacrodlg(processMacroSave)'>";
content += "<span class='badge'>";
content += "<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>";
content += "<g transform='translate(50,1200) scale(1, -1)'>";
content += "<path  fill='currentColor' d='M407 800l131 353q7 19 17.5 19t17.5 -19l129 -353h421q21 0 24 -8.5t-14 -20.5l-342 -249l130 -401q7 -20 -0.5 -25.5t-24.5 6.5l-343 246l-342 -247q-17 -12 -24.5 -6.5t-0.5 25.5l130 400l-347 251q-17 12 -14 20.5t23 8.5h429z'></path>";
content += "</g>";
content += "</svg>";
content += "<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'>";
content += "<g transform='translate(50,1200) scale(1, -1)'>";
content += "<path  fill='currentColor' d='M1011 1210q19 0 33 -13l153 -153q13 -14 13 -33t-13 -33l-99 -92l-214 214l95 96q13 14 32 14zM1013 800l-615 -614l-214 214l614 614zM317 96l-333 -112l110 335z'></path>";
content += "</g>";
content += "</svg>";
content += "</span>";
content += "</button>";
for (var i = 0; i < 9; i++) {
content += control_build_macro_button(i);
}
document.getElementById('Macro_list').innerHTML = content;
}

function macro_command(target, filename) {
var cmd = ""
if (target == "ESP") {
cmd = "[ESP700]" + filename;
} else if (target == "SD") {
files_print_filename(filename);
} else if (target == "URI") {
window.open(filename);
} else return;
//console.log(cmd);
SendPrinterCommand(cmd);
}

</script>
<script>
var interval_status = -1;
var probe_progress_status = 0;
var grbl_error_msg = "";
var gotWCO = false;
var WCOx = 0;
var WCOy = 0;
var WCOz = 0;
var WCOa = 0;
var WCOb = 0;
var WCOc = 0;
var grblaxis = 2;
var grblzerocmd = 'X0 Y0';
var axis_Z_feedrate = 0;
var axis_A_feedrate = 0;
var axis_B_feedrate = 0;
var axis_C_feedrate = 0;
var last_axis_letter = "Z";

function build_axis_selection(){
var html = "<select class='form-control wauto' id='control_select_axis' onchange='control_changeaxis()' >";
for (var i = 3; i <= grblaxis; i++) {
var letter;
if (i == 3) letter = "Z";
else if (i == 4) letter = "A";
else if (i == 5) letter = "B";
else if (i == 6) letter = "C";
html += "<option value='" + letter + "'";
if (i == 3) html += " selected ";
html += ">";
html += letter;
html += "</option>\n";
}
html += "</select>\n";
if(grblaxis > 3) {
document.getElementById('axis_selection').innerHTML = html;
document.getElementById('axis_label').innerHTML = translate_text_item("Axis") + ":";
document.getElementById('axis_selection').style.display = "table-row"
}
}

function control_changeaxis(){
var letter = document.getElementById('control_select_axis').value;
document.getElementById('axisup').innerHTML = '+'+letter;
document.getElementById('axisdown').innerHTML = '-'+letter;
document.getElementById('homeZlabel').innerHTML = ' '+letter+' ';
switch(last_axis_letter) {
case "Z":
axis_Z_feedrate = document.getElementById('control_z_velocity').value;
break;
case "A":
axis_A_feedrate = document.getElementById('control_z_velocity').value;
break;
case "B":
axis_B_feedrate = document.getElementById('control_z_velocity').value;
break;
case "C":
axis_C_feedrate = document.getElementById('control_z_velocity').value;
break;
}

last_axis_letter = letter;
switch(last_axis_letter) {
case "Z":
document.getElementById('control_z_velocity').value = axis_Z_feedrate;
break;
case "A":
document.getElementById('control_z_velocity').value = axis_A_feedrate;
break;
case "B":
document.getElementById('control_z_velocity').value = axis_B_feedrate;
break;
case "C":
document.getElementById('control_z_velocity').value = axis_C_feedrate;
break;
}
}

function init_grbl_panel() {
grbl_set_probe_detected(false);
if (target_firmware == "grbl-embedded") {
on_autocheck_status(true);
}
}

function grbl_clear_status() {
grbl_set_probe_detected(false);
grbl_error_msg = "";
document.getElementById('grbl_status_text').innerHTML = grbl_error_msg;
document.getElementById('grbl_status').innerHTML = "";
}

function grbl_set_probe_detected(state) {
if (state) {
document.getElementById('touch_status_icon').innerHTML = get_icon_svg("ok-circle", "1.3em", "1.2em", "green");
} else {
document.getElementById('touch_status_icon').innerHTML = get_icon_svg("record", "1.3em", "1.2em", "grey");
}
}

function onprobemaxtravelChange() {
var travel = parseFloat(document.getElementById('probemaxtravel').value);
if (travel > 9999 || travel <= 0 || isNaN(travel) || (travel === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("Value of maximum probe travel must be between 1 mm and 9999 mm !"));
return false;
}
return true;
}

function onprobefeedrateChange() {
var feedratevalue = parseInt(document.getElementById('probefeedrate').value);
if (feedratevalue <= 0 || feedratevalue > 9999 || isNaN(feedratevalue) || (feedratevalue === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("Value of probe feedrate must be between 1 mm/min and 9999 mm/min !"));
return false
}
return true
}

function onprobetouchplatethicknessChange() {
var thickness = parseFloat(document.getElementById('probetouchplatethickness').value);
if (thickness <= 0 || thickness > 999 || isNaN(thickness) || (thickness === null)) {
alertdlg(translate_text_item("Out of range"), translate_text_item("Value of probe touch plate thickness must be between 0 mm and 9999 mm !"));
return false;
}
return true;
}

function on_autocheck_status(use_value) {
if (probe_progress_status != 0) {
document.getElementById('autocheck_status').checked = true;
return;
}
if (typeof(use_value) !== 'undefined') document.getElementById('autocheck_status').checked = use_value;
if (document.getElementById('autocheck_status').checked) {
var interval = parseInt(document.getElementById('statusInterval_check').value);
if (!isNaN(interval) && interval > 0 && interval < 100) {
if (interval_status != -1) clearInterval(interval_status);
interval_status = setInterval(function() {
get_status()
}, interval * 1000);
} else {
document.getElementById('autocheck_status').checked = false;
document.getElementById('statusInterval_check').value = 0;
if (interval_status != -1) clearInterval(interval_status);
interval_status = -1;
}
} else {
if (interval_status != -1) clearInterval(interval_status);
interval_status = -1;
}

if (document.getElementById('autocheck_status').checked == false) {
grbl_clear_status();
}
}

function onstatusIntervalChange() {
var interval = parseInt(document.getElementById('statusInterval_check').value);
if (!isNaN(interval) && interval > 0 && interval < 100) {
on_autocheck_status();
} else {
document.getElementById('autocheck_status').checked = false;
document.getElementById('statusInterval_check').value = 0;
if (interval != 0) alertdlg(translate_text_item("Out of range"), translate_text_item("Value of auto-check must be between 0s and 99s !!"));
on_autocheck_status();
}
}

//TODO handle authentication issues
//errorfn cannot be NULL
function get_status() {
var command = "?";
if ((target_firmware == "grbl") || (target_firmware == "grbl-embedded")) command = "?";
//ID 114 is same as M114 as '?' cannot be an ID
SendPrinterCommand(command, false, null, null, 114, 1);
}

function process_grbl_position(response) {
var tab1 = response.split("WCO:");
if (tab1.length > 1) {
var tab2 = tab1[1].split("|");
var tab1 = tab2[0].split(">");
var tab3 = tab1[0].split(",");
WCOx = parseFloat(tab3[0]);
if (tab3.length > 1) {
WCOy = parseFloat(tab3[1]);
} else {
WCOy = 0;
}
if ((tab3.length > 2) && (grblaxis > 2)) {
WCOz = parseFloat(tab3[2]);
} else {
WCOz = 0;
}
if ((tab3.length > 3) && (grblaxis > 3)) {
WCOa = parseFloat(tab3[3]);
} else {
WCOa = 0;
}
if ((tab3.length > 4) && (grblaxis > 4)){
WCOb = parseFloat(tab3[4]);
} else {
WCOb = 0;
}
if ((tab3.length > 5) && (grblaxis > 5)) {
WCOc = parseFloat(tab3[5]);
} else {
WCOc = 0;
}
gotWCO = true;
}
tab1 = response.split("WPos:");
if (tab1.length > 1) {
var tab2 = tab1[1].split("|");
var tab3 = tab2[0].split(",");
document.getElementById('control_x_position').innerHTML = tab3[0];
if (gotWCO) document.getElementById('control_xm_position').innerHTML = (WCOx + parseFloat(tab3[0])).toFixed(3);
if (tab3.length > 1) {
document.getElementById('control_y_position').innerHTML = tab3[1];
if (gotWCO) document.getElementById('control_ym_position').innerHTML = (WCOy + parseFloat(tab3[1])).toFixed(3);
}
if ((tab3.length > 2) && (grblaxis > 2)) {
document.getElementById('control_z_position').innerHTML = tab3[2];
if (gotWCO) document.getElementById('control_zm_position').innerHTML = (WCOz + parseFloat(tab3[2])).toFixed(3);
}
if ((tab3.length > 3) && (grblaxis > 3)) {
document.getElementById('control_a_position').innerHTML = tab3[3];
if (gotWCO) document.getElementById('control_am_position').innerHTML = (WCOa + parseFloat(tab3[3])).toFixed(3);
}
if ((tab3.length > 4) && (grblaxis > 4)) {
document.getElementById('control_b_position').innerHTML = tab3[4];
if (gotWCO) document.getElementById('control_bm_position').innerHTML = (WCOb + parseFloat(tab3[4])).toFixed(3);
}
if ((tab3.length > 5) && (grblaxis > 5)) {
document.getElementById('control_c_position').innerHTML = tab3[5];
if (gotWCO) document.getElementById('control_cm_position').innerHTML = (WCOc + parseFloat(tab3[5])).toFixed(3);
}

} else {
tab1 = response.split("MPos:");
if (tab1.length > 1) {
var tab2 = tab1[1].split("|");
var tab3 = tab2[0].split(",");
document.getElementById('control_xm_position').innerHTML = tab3[0];
if (gotWCO) document.getElementById('control_x_position').innerHTML = (parseFloat(tab3[0]) - WCOx).toFixed(3);
if (tab3.length > 1) {
document.getElementById('control_ym_position').innerHTML = tab3[1];
if (gotWCO) document.getElementById('control_y_position').innerHTML = (parseFloat(tab3[1]) - WCOy).toFixed(3);
}
if ((tab3.length > 2) && (grblaxis > 2)) {
document.getElementById('control_zm_position').innerHTML = tab3[2];
if (gotWCO) document.getElementById('control_z_position').innerHTML = (parseFloat(tab3[2]) - WCOz).toFixed(3);
}
if ((tab3.length > 3) && (grblaxis > 3)) {
document.getElementById('control_am_position').innerHTML = tab3[3];
if (gotWCO) document.getElementById('control_a_position').innerHTML = (parseFloat(tab3[3]) - WCOa).toFixed(3);
}
if ((tab3.length > 4) && (grblaxis > 4)) {
document.getElementById('control_bm_position').innerHTML = tab3[4];
if (gotWCO) document.getElementById('control_b_position').innerHTML = (parseFloat(tab3[4]) - WCOb).toFixed(3);
}
if ((tab3.length > 5) && (grblaxis > 5)) {
document.getElementById('control_cm_position').innerHTML = tab3[5];
if (gotWCO) document.getElementById('control_c_position').innerHTML = (parseFloat(tab3[5]) - WCOc).toFixed(3);
}
}
}
}

function process_grbl_status(response) {

var tab1 = response.split("|");
if (tab1.length > 1) {
var tab2 = tab1[0].replace("<", "");
document.getElementById("grbl_status").innerHTML = tab2;
if (tab2.toLowerCase().startsWith("run")) {
grbl_error_msg = "";
document.getElementById('sd_resume_btn').style.display = "none";
document.getElementById('sd_pause_btn').style.display = "table-row";
document.getElementById('sd_reset_btn').style.display = "table-row";

} else if (tab2.toLowerCase().startsWith("hold")) {
grbl_error_msg = tab2;
document.getElementById('sd_pause_btn').style.display = "none";
document.getElementById('sd_resume_btn').style.display = "table-row";
document.getElementById('sd_reset_btn').style.display = "table-row";

} else if (tab2.toLowerCase().startsWith("alarm")) {
if (probe_progress_status != 0) {
probe_failed_notification();
}
//grbl_error_msg = "";
//check we are printing or not
if (response.indexOf("|SD:") != -1) {
//guess print is stopped because of alarm so no need to pause
document.getElementById('sd_pause_btn').style.display = "none";
document.getElementById('sd_resume_btn').style.display = "table-row";
document.getElementById('sd_reset_btn').style.display = "none";
}
} else { //TBC for others status
document.getElementById('sd_pause_btn').style.display = "none";
document.getElementById('sd_resume_btn').style.display = "none";
document.getElementById('sd_reset_btn').style.display = "none";
}
if (tab2.toLowerCase().startsWith("idle")) {
grbl_error_msg = "";
}
document.getElementById('grbl_status_text').innerHTML = translate_text_item(grbl_error_msg);
if (tab2.toLowerCase().startsWith("alarm")) document.getElementById('clear_status_btn').style.display = "table-row";
else document.getElementById('clear_status_btn').style.display = "none";
}
}

function finalize_probing() {
probe_progress_status = 0;
document.getElementById("probingbtn").style.display = "table-row";
document.getElementById("probingtext").style.display = "none";
document.getElementById('sd_pause_btn').style.display = "none";
document.getElementById('sd_resume_btn').style.display = "none";
document.getElementById('sd_reset_btn').style.display = "none";
}

function process_grbl_SD(response) {
var tab1 = response.split("|SD:");
if (tab1.length > 1) {
var tab2 = tab1[1].split("|");
var tab3 = tab2[0].split(",");
//TODO
var progress = tab3[0];
var sdname = "???";
if (tab3.length > 1) {
sdname = tab3[1].replace(">", "");
} else {
progress = progress.replace(">", "");
}
document.getElementById('grbl_SD_status').innerHTML = sdname + "&nbsp;<progress id='print_prg' value=" + progress + " max='100'></progress>" + progress + "%";
} else { //no SD printing
//TODO
document.getElementById('grbl_SD_status').innerHTML = "";
}
}

function process_grbl_probe_status(response) {
var tab1 = response.split("|Pn:");
if (tab1.length > 1) {
var tab2 = tab1[1].split("|");
if (tab2[0].indexOf("P") != -1) { //probe touch
grbl_set_probe_detected(true);
} else { //Probe did not touched
grbl_set_probe_detected(false);
}
} else { //no info
grbl_set_probe_detected(false);
}
}

function SendRealtimeCmd(cmd) {
SendPrinterCommand(cmd, false, null, null, cmd.charCodeAt(0), 1);
}

function grbl_process_status(response) {
process_grbl_position(response);
process_grbl_status(response);
process_grbl_SD(response);
process_grbl_probe_status(response);
}

function grbl_reset_detected(msg) {
console.log("Reset detected");
}

function grbl_process_msg(response) {
if (grbl_error_msg.length == 0) grbl_error_msg = translate_text_item(response.trim());
}

function grbl_reset() {
if (probe_progress_status != 0) probe_failed_notification();
SendRealtimeCmd(String.fromCharCode(0x18));
}

function grbl_GetProbeResult(response) {
console.log("yes");
var tab1 = response.split(":");
if (tab1.length > 2) {
var status = tab1[2].replace("]", "");
if (parseInt(status.trim()) == 1) {
if (probe_progress_status != 0) {
var cmd = "G53 G0 Z";
var tab2 = tab1[1].split(",");
var v = 0.0;
v = parseFloat(tab2[2]);
console.log("z:" + v.toString());
cmd += v;
SendPrinterCommand(cmd, true, null, null, 53, 1);
cmd = "G10 L20 P0 Z" + document.getElementById('probetouchplatethickness').value;;
SendPrinterCommand(cmd, true, null, null, 10, 1);
cmd = "G90";
SendPrinterCommand(cmd, true, null, null, 90, 1);
finalize_probing();
}
} else {
probe_failed_notification();
}
}
}

function probe_failed_notification() {
finalize_probing();
alertdlg(translate_text_item("Error"), translate_text_item("Probe failed !"));
beep(70, 261);
}

function StartProbeProcess() {
var cmd = "G38.2 G91 Z-";
if (!onprobemaxtravelChange() ||
!onprobefeedrateChange() ||
!onprobetouchplatethicknessChange()) {
return;
}
cmd += parseFloat(document.getElementById('probemaxtravel').value) + " F" + parseInt(document.getElementById('probefeedrate').value);
console.log(cmd);
probe_progress_status = 1;
on_autocheck_status(true);
SendPrinterCommand(cmd, true, null, null, 38.2, 1);
document.getElementById("probingbtn").style.display = "none";
document.getElementById("probingtext").style.display = "table-row";
grbl_error_msg = "";
document.getElementById('grbl_status_text').innerHTML = grbl_error_msg;
}

</script>

<script>
function clear_drop_menu(event) {
var item = get_parent_by_class(event.target, "dropdownselect");
var ignore_id = "-1";
if (item !== null && typeof item.id !== 'undefined') {
ignore_id = item.id;
}
var list = document.getElementsByClassName("dropmenu-content");
for (var index = 0; index < list.length; index++) {
var item2 = get_parent_by_class(list[index], "dropdownselect");
if (item2 !== null && typeof item2.id !== 'undefined' && item2.id != ignore_id && list[index].classList.contains('show')) {
list[index].classList.remove('show');
}
}
}

function get_parent_by_class(item, classname) {
if (item === null || typeof item === 'undefined') return null;
if (item.classList.contains(classname)) {
return item;
}
return get_parent_by_class(item.parentElement, classname);
}

function hide_drop_menu(event) {
var item = get_parent_by_class(event.target, "dropmenu-content");
if (typeof item !== 'undefined' && item.classList.contains('show')) {
item.classList.remove('show');
}
}

function showhide_drop_menu(event) {
var item = get_parent_by_class(event.target, "dropdownselect");
if (item === null) return;
var menu = item.getElementsByClassName("dropmenu-content")[0];
if (typeof menu !== 'undefined') menu.classList.toggle("show");
}

</script>
<script>
function store_localdata(key, value) {

if (typeof localStorage !== 'undefined') {
try {
localStorage.setItem(key, value);
} catch (exception) {
return false;
}
return true;
}
return false;
}

function get_localdata(key) {
if (typeof localStorage !== 'undefined') {
var r = "";
try {
r = localStorage.getItem(key);
} catch (exception) {
r = "";
}
return r;
}
return "";
}

function delete_localdata(key) {
if (typeof localStorage !== 'undefined') {
try {
window.localStorage.removeItem(key);
} catch (exception) {}
}
}

</script>
<script>
//UIdisabled dialog
function UIdisableddlg(lostcon) {
var modal = setactiveModal('UIdisableddlg.html');
if (modal == null) return;
if (lostcon) {
document.getElementById('disconnection_msg').innerHTML = translate_text_item("Connection lost for more than 20s");
}
showModal();
}

</script>
<script>
// Functions to handle custom messages sent via serial.
// In gcode file, M118 can be used to send messages on serial.
// This allows the microcontroller to communicate with hosts.
// Example:
//   M118 [esp3d]<your message>
//      will send "esp3d:<your message>" over serial, which can be picked up by host
//      to trigger certain actions.
//   M118 [esp3d]<function call>
//      will call the function, as long as a handler has been predefined to identify
//      the call.

function process_Custom(response) {
var freq = 440;  // beep frequency on end of print
var dur = 100;  // beep duration on end of print
response = response.replace("[esp3d]","");
if (response.startsWith("eop")) {
// Example 1
// Sound to play on end of print
// Triggered by message on serial terminal
// [ESP3D]eop
beep(dur, freq);
}
if (response.startsWith("beep(")) {
// Example 2
// Call a function within webUI, in this case beep()
// Triggered by message on serial terminal
// [ESP3D]beep(100, 261)
eval(response);
}
}

</script>
<!-- prh following files are missing from index.html but present in js -->
<script>
var files_currentPath = "/";
var files_filter_sd_list = false;
var files_file_list = [];
var files_file_list_cache = [];
var files_status_list = [];
var files_current_file_index = -1;
var files_error_status = "";
var tfiles_filters;
var tft_sd = "SD:"
var tft_usb = "U:"
var printer_sd = "SDCARD:"
var current_source = "/"
var last_source = "/"

function build_file_filter_list(filters_list) {
build_accept(filters_list);
update_files_list();
}

function update_files_list() {
//console.log("Updating list");
if (files_file_list.length == 0) return;
for (var i = 0; i < files_file_list.length; i++) {
var isdirectory = files_file_list[i].isdir;
var file_name = files_file_list[i].name;
files_file_list[i].isprintable = files_showprintbutton(file_name, isdirectory);
}
files_build_display_filelist();
}

function build_accept(file_filters_list) {
var accept_txt = "";
if (typeof file_filters_list != 'undefined') {
tfiles_filters = file_filters_list.trim().split(";");
for (var i = 0; i < tfiles_filters.length; i++) {
var v = tfiles_filters[i].trim();
if (v.length > 0) {
if (accept_txt.length > 0) accept_txt += ", ";
accept_txt += "." + v;
}
}
}
if (accept_txt.length == 0) {
accept_txt = "*, *.*";
tfiles_filters = "";
}
document.getElementById('files_input_file').accept = accept_txt;
console.log(accept_txt);
}

function init_files_panel(dorefresh) {
if (target_firmware == "smoothieware") {
files_currentPath = primary_sd;
document.getElementById('files_refresh_primary_sd_btn').innerHTML = primary_sd.substring(0, primary_sd.length - 1);
document.getElementById('files_refresh_secondary_sd_btn').innerHTML = secondary_sd.substring(0, secondary_sd.length - 1);
if (primary_sd.toLowerCase() != "none") document.getElementById('files_refresh_primary_sd_btn').style.display = "inline";
if (secondary_sd.toLowerCase() != "none") document.getElementById('files_refresh_secondary_sd_btn').style.display = "inline";
document.getElementById('files_createdir_btn').style.display = "none";
document.getElementById('files_refresh_btn').style.display = "none";
} else {
if (target_firmware == "???") document.getElementById('files_refresh_btn').style.display = "none";
else document.getElementById('files_refresh_btn').style.display = "inline";
document.getElementById('files_refresh_primary_sd_btn').style.display = "none";
document.getElementById('files_refresh_secondary_sd_btn').style.display = "none";
if(target_firmware == "grbl") {
document.getElementById('files_refresh_printer_sd_btn').style.display = 'none';
document.getElementById('files_refresh_btn').style.display = 'none';
document.getElementById('print_upload_btn').style.display = 'none';
document.getElementById('files_createdir_btn').style.display = "none";
}
}
if (!((target_firmware == "marlin") || (target_firmware == "???") ||(target_firmware == "grbl"))) document.getElementById('files_createdir_btn').style.display = "inline";
else document.getElementById('files_createdir_btn').style.display = "none";
files_set_button_as_filter(files_filter_sd_list);
var refreshlist = true;
if (typeof dorefresh !== 'undefined') refreshlist = dorefresh;
if (direct_sd && refreshlist) files_refreshFiles(files_currentPath);
}

function files_set_button_as_filter(isfilter) {
if (!isfilter) {
document.getElementById('files_filter_glyph').innerHTML = get_icon_svg("filter", "1em", "1em");
} else {
document.getElementById('files_filter_glyph').innerHTML = get_icon_svg("list-alt", "1em", "1em");
}
}

function files_filter_button(item) {
files_filter_sd_list = !files_filter_sd_list;
files_set_button_as_filter(files_filter_sd_list);
files_build_display_filelist();
}

function files_build_file_line(index) {
var content = "";
var entry = files_file_list[index];
var is_clickable = files_is_clickable(index);
if ((files_filter_sd_list && entry.isprintable) || (!files_filter_sd_list)) {
content += "<li class='list-group-item list-group-hover' >";
content += "<div class='row'>";
content += "<div class='col-md-5 col-sm-5 no_overflow' ";
if (is_clickable) {
content += "style='cursor:pointer;' onclick='files_click_file(" + index + ")'";
}
content += "><table><tr><td><span  style='color:DeepSkyBlue;'>";
if (entry.isdir == true) content += get_icon_svg("folder-open");
else content += get_icon_svg("file");
content += "</span ></td><td>";
if (direct_sd && (target_firmware == "marlin") && (typeof entry.sdname !== 'undefined')) {
content += entry.sdname;
} else {
content += entry.name;
}
content += "</td></tr></table></div>";
var sizecol = "col-md-2 col-sm-2";
var timecol = "col-md-3 col-sm-3";
var iconcol = "col-md-2 col-sm-2";
if (!entry.isdir && entry.datetime == "") {
sizecol = "col-md-4 col-sm-4";
timecol = "hide_it";
iconcol = "col-md-3 col-sm-3";
}
content += "<div class='" + sizecol + "'";
if (is_clickable) {
content += "style='cursor:pointer;' onclick='files_click_file(" + index + ")' ";
}
var size= entry.size;
if (entry.isdir)size="";
content += ">" +  size + "</div>";
content += "<div class='" + timecol + "'";
if (is_clickable) {
content += "style='cursor:pointer;' onclick='files_click_file(" + index + ")' ";
}
content += ">" + entry.datetime + "</div>";
content += "<div class='" + iconcol + "'>";
content += "<div class='pull-right'>";
if (entry.isprintable) {
content += "<button class='btn btn-xs btn-default'  onclick='files_print(" + index + ")' style='padding-top: 4px;'>";
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl")) content += get_icon_svg("play", "1em", "1em");
else content += get_icon_svg("print", "1em", "1em");
content += "</button>";
}
content += "&nbsp;";
if (files_showdeletebutton(index)) {
content += "<button class='btn btn-xs btn-danger' onclick='files_delete(" + index + ")'  style='padding-top: 4px;'>" + get_icon_svg("trash", "1em", "1em") + "</button>";
}
content += "</div>";
content += "</div>";
content += "</div>";
content += "</li>";
}
return content;
}

function files_print(index) {
files_print_filename(files_currentPath + files_file_list[index].name);
}

function files_print_filename(filename) {
var cmd = "";
if (target_firmware == "smoothieware") {
cmd = "play " + filename;
} else if (target_firmware == "grbl-embedded") {
SendPrinterCommand("?", false, null, null, 114, 1);
on_autocheck_status(true);
cmd = "[ESP220]" + filename;
} else {
var newfilename = filename;
if ((current_source == tft_sd) || (current_source == tft_usb))newfilename = current_source+filename;
cmd = "M23 " + newfilename + "\nM24";
}
if (target_firmware == "grbl-embedded") SendPrinterCommand(cmd);
else SendPrinterSilentCommand(cmd);
}

function files_Createdir() {
inputdlg(translate_text_item("Please enter directory name"), translate_text_item("Name:"), process_files_Createdir);
}

function process_files_Createdir(answer) {
if (answer.length > 0) files_create_dir(answer.trim());
}

function files_create_dir(name) {
if (direct_sd && !((target_firmware == "smoothieware") && files_currentPath.startsWith(secondary_sd))) {
var cmdpath = files_currentPath;
if (target_firmware == "smoothieware") cmdpath = files_currentPath.substring(primary_sd.length);
var url = "/upload?path=" + encodeURIComponent(cmdpath) + "&action=createdir&filename=" + encodeURIComponent(name);
document.getElementById('files_nav_loader').style.display = "block";
SendGetHttp(url, files_directSD_list_success, files_directSD_list_failed);
} else {
var command = "";
if (target_firmware == "smoothieware") {
command = "mkdir " + files_currentPath + name;
} else {
command = "M32 " + files_currentPath + name;
}
SendPrinterCommand(command, true, files_proccess_and_update);
}
}

function files_delete(index) {
files_current_file_index = index;
var msg = translate_text_item("Confirm deletion of directory: ");
if (!files_file_list[index].isdir) msg = translate_text_item("Confirm deletion of file: ");
confirmdlg(translate_text_item("Please Confirm"), msg + files_file_list[index].name, process_files_Delete);
}

function process_files_Delete(answer) {
if (answer == "yes" && files_current_file_index != -1) files_delete_file(files_current_file_index);
files_current_file_index = -1;
}

function files_delete_file(index) {
files_error_status = "Delete " + files_file_list[index].name;
if (direct_sd && !((target_firmware == "smoothieware") && files_currentPath.startsWith(secondary_sd))) {
var cmdpath = files_currentPath;
if (target_firmware == "smoothieware") cmdpath = files_currentPath.substring(primary_sd.length);
var url = "/upload?path=" + encodeURIComponent(cmdpath) + "&action=";
if (files_file_list[index].isdir) {
url += "deletedir&filename=";
} else {
url += "delete&filename=";
}
url += encodeURIComponent(files_file_list[index].sdname);
document.getElementById('files_nav_loader').style.display = "block";
SendGetHttp(url, files_directSD_list_success, files_directSD_list_failed);
} else {
var command = "";
if (target_firmware == "smoothieware") {
command = "rm " + files_currentPath + files_file_list[index].name;
} else {
command = "M30 ";
if ((current_source == tft_usb)|| (current_source == tft_sd))command +=current_source;
command += files_currentPath + files_file_list[index].name;
}
SendPrinterCommand(command, true, files_proccess_and_update);
}
}

function files_proccess_and_update(answer) {
document.getElementById('files_navigation_buttons').style.display = "block";
if (answer.startsWith("{") && answer.endsWith("}")) {
try {
response = JSON.parse(answer);
if (typeof response.status != 'undefined') {
Monitor_output_Update(response.status + "\n");
files_error_status = response.status;
//console.log(files_error_status);
}
} catch (e) {
console.error("Parsing error:", e);
response = "Error";
}

} else {
if (answer[answer.length - 1] != '\n') Monitor_output_Update(answer + "\n");
else Monitor_output_Update(answer);
answer = answer.replace("\nok", "");
answer = answer.replace(/\n/gi, "");
answer = answer.replace(/\r/gi, "");
answer = answer.trim();
console.log(answer)
if (answer.length > 0) files_error_status = answer;
else if (files_error_status.length == 0) files_error_status = "Done";
}
//console.log("error status:" + files_error_status);
files_refreshFiles(files_currentPath);
}

function files_is_clickable(index) {
var entry = files_file_list[index];
if (entry.isdir) return true;
if (direct_sd && !(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) return true;
//not yet implemented but possible with cat command ?
//if ( (target_firmware == "smoothieware") && entry.isprintable) return true;
return false;
}

function files_click_file(index) {
var entry = files_file_list[index];
if (entry.isdir) {
var path = files_currentPath + entry.name + "/";
files_refreshFiles(path, true);
return;
}
if (direct_sd && (!(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd)) || (target_firmware != "smoothieware"))) {
//console.log("file on direct SD");
var url = "";
if (target_firmware == "smoothieware") url = files_currentPath.replace(primary_sd, "/SD/") + entry.sdname;
else url = "/SD/" + files_currentPath + entry.sdname;
window.open(url.replace("//", "/"));
return;
}
if (target_firmware == "smoothieware" && entry.isprintable) {
//console.log("file on smoothie SD");
//todo use a cat command ?
return;
}
}

function files_showprintbutton(filename, isdir) {
if (isdir == true) return false;
if (target_firmware == "grbl") {
var path = files_currentPath + filename.trim();
if ((path.indexOf(" ") != -1) || (path.indexOf("?") != -1) || (path.indexOf("!") != -1) || (path.indexOf("~") != -1)) {
return false;
}
}
if (tfiles_filters.length == 0) {
return true;
}
for (var i = 0; i < tfiles_filters.length; i++) {
var v = "." + tfiles_filters[i].trim();
if (filename.endsWith(v)) return true;
}
return false;
}

function files_showdeletebutton(index) {
//can always deleted dile or dir ?
//if /ext/ is serial it should failed as fw does not support it
//var entry = files_file_list[index];
//if (direct_sd && !( target_firmware == "smoothieware"  && files_currentPath.startsWith(secondary_sd))) return true;
//if (!entry.isdir) return true;
//if ( target_firmware == "smoothieware"  && files_currentPath.startsWith("/sd/")) return true
return true;
}

function cleanpath(path){
var p = path;
p.trim();
if (p[0]!='/')p="/"+p;
if (p!="/"){
if (p.endsWith("/")){
p = p .substr(0, p.length - 1);
}
}
return p;
}

function files_refreshFiles(path, usecache) {
//console.log("refresh requested " + path);
var cmdpath = path;
files_currentPath = path;
if (current_source != last_source){
files_currentPath = "/";
path="/";
last_source = current_source;
}
if ((current_source==tft_sd) || (current_source==tft_usb)){
document.getElementById('print_upload_btn').style.display="none";
} else {
document.getElementById('print_upload_btn').style.display="block";
}
if (typeof usecache === 'undefined') usecache = false;
document.getElementById('files_currentPath').innerHTML = files_currentPath;
files_file_list = [];
files_status_list = [];
files_build_display_filelist(false);
document.getElementById('files_list_loader').style.display = "block";
document.getElementById('files_nav_loader').style.display = "block";
//this is pure direct SD
if (direct_sd && !(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) {
if (target_firmware == "smoothieware") cmdpath = path.substring(4);
var url = "/upload?path=" + encodeURI(cmdpath);
//endRemoveIf(production)
SendGetHttp(url, files_directSD_list_success, files_directSD_list_failed);
} else {
//use ls or M20
if (target_firmware == "smoothieware") {
//workaround as ls do not like dirname ending with /
var command = "ls -s " + cleanpath(files_currentPath);
SendPrinterCommand(command, false, files_serial_ls_list_success, files_serial_ls_list_failed);
//
} else {
var command = "M20";
if (current_source == "SD:") {
document.getElementById('fileSource').innerHTML="TFT SD";
if (path.endsWith("/")){
var newpath = path.substring(0, path.length - 1);
path= newpath;
}
command="M20 SD:"+ path;

usecache = false;
} else if (current_source == "U:") {
document.getElementById('fileSource').innerHTML="TFT USB";
if (path.endsWith("/")){
var newpath = path.substring(0, path.length - 1);
path= newpath;
}
command="M20 U:"+ path;
usecache = false;
} else {
//Standard M20
current_source = "/";
document.getElementById('fileSource').innerHTML=translate_text_item("SD Files");
}
//to avoid to query when we already have the list
if (usecache) {
files_serial_M20_list_display();
} else {
SendPrinterCommand(command, false, files_serial_M20_list_success, files_serial_M20_list_failed);
}
}
}
}

function files_format_size(size) {
var lsize = parseInt(size);
var value = 0.0;
var tsize = "";
if (lsize < 1024) {
tsize = lsize + " B";
} else if (lsize < (1024 * 1024)) {
value = (lsize / 1024.0);
tsize = value.toFixed(2) + " KB";
} else if (lsize < (1024 * 1024 * 1024)) {
value = ((lsize / 1024.0) / 1024.0);
tsize = value.toFixed(2) + " MB";
} else {
value = (((lsize / 1024.0) / 1024.0) / 1024.0);
tsize = value.toFixed(2) + " GB";
}
return tsize;
}

function files_serial_M20_list_display() {
var path = "";
if (files_currentPath.length > 1) path = files_currentPath.substring(1);
var folderlist = "";
for (var i = 0; i < files_file_list_cache.length; i++) {
//console.log("processing " + files_file_list_cache[i].name)
var file_name = files_file_list_cache[i].name;
if (file_name.startsWith(path) || (current_source == tft_usb)|| (current_source == tft_sd)) {
//console.log("need display " + file_name)
if (!((current_source == tft_usb)|| (current_source == tft_sd)))file_name = file_name.substring(path.length);
//console.log ("file name is :" + file_name)
if (file_name.length > 0) {
var endpos = file_name.indexOf("/");
if (endpos > -1) file_name = file_name.substring(0, endpos + 1);
var isdirectory = files_file_list_cache[i].isdir;
var isprint = files_file_list_cache[i].isprintable;
//to workaround the directory is not listed on its own like in marlin
if (file_name.endsWith("/")) {
isdirectory = true;
isprint = false;
file_name = file_name.substring(0, file_name.length - 1);
}
var file_entry = {
name: file_name,
size: files_file_list_cache[i].size,
isdir: isdirectory,
datetime: files_file_list_cache[i].datetime,
isprintable: isprint
};
var tag = "*" + file_name + "*";
if ((isdirectory && folderlist.indexOf(tag) == -1) || !isdirectory) {
//console.log("add to list " + file_name)
files_file_list.push(file_entry);
if (isdirectory) {
folderlist += tag;
}
}
}
}
}
files_build_display_filelist();
}

function files_serial_M20_list_success(response_text) {
var path = "";
var tlist = response_text.split("\n");
if (files_currentPath.length > 1) path = files_currentPath.substring(1);
var folderlist = "";
files_file_list_cache = [];
for (var i = 0; i < tlist.length; i++) {
var line = tlist[i].trim();
var isdirectory = false;
var file_name = "";
var fsize = "";
var d = "";
line = line.replace("\r", "");
if (!((line.length == 0) || (line.indexOf("egin file list") > 0) || (line.indexOf("nd file list") > 0) || (line.indexOf(":") > 0) || (line == "ok") || (line == "wait"))) {
//for marlin
if (line.startsWith("/")) {
line = line.substring(1);
}
//if directory it is ending with /
if (line.endsWith("/")) {
isdirectory = true;
file_name = line;
//console.log(file_name + " is a dir");
} else {
//console.log(line + " is a file");
if ((target_firmware == "repetier") || (target_firmware == "repetier4davinci") || (target_firmware == "marlin")) {
var pos = line.lastIndexOf(" ");
if (pos != -1) {
file_name = line.substr(0, pos);
fsize = files_format_size(parseInt(line.substr(pos + 1)));
} else {
file_name = line;
fsize = "";
}
} else file_name = line;
}
//console.log("pushing " + file_name );
var isprint = files_showprintbutton(file_name, isdirectory);
//var tag = "*" + file_name + "*";
var file_entry = {
name: file_name,
size: fsize,
isdir: isdirectory,
datetime: d,
isprintable: isprint
};
files_file_list_cache.push(file_entry);
}
}
files_serial_M20_list_display();
}

function files_is_filename(file_name) {
var answer = true;
var s_name = String(file_name);
var rg1 = /^[^\\/:\*\?"<>\|]+$/; // forbidden characters \ / : * ? " < > |
var rg2 = /^\./; // cannot start with dot (.)
var rg3 = /^(nul|prn|con|lpt[0-9]|com[0-9])(\.|$)/i; // forbidden file names
//a
answer = rg1.test(file_name) && !rg2.test(file_name) && !rg3.test(file_name)
if ((s_name.length == 0) || (s_name.indexOf(":") != -1) || (s_name.indexOf("..") != -1)) answer = false;

return answer;
}

function files_serial_ls_list_success(response_text) {
var tlist = response_text.split("\n");
for (var i = 0; i < tlist.length; i++) {
var line = tlist[i].trim();
var isdirectory = false;
var file_name = "";
var fsize = "";
var d = ""
var command = "ls -s " +  cleanpath(files_currentPath);
if (line == command) continue;
if (line.length != 0) {
if (line.endsWith("/")) {
isdirectory = true;
file_name = line.substring(0, line.length - 1);
} else {
var pos = line.lastIndexOf(" ");
file_name = line.substr(0, pos);
fsize = files_format_size(parseInt(line.substr(pos + 1)));
}
var isprint = files_showprintbutton(file_name, isdirectory);
if (files_is_filename(file_name)) {
var file_entry = {
name: file_name,
size: fsize,
isdir: isdirectory,
datetime: d,
isprintable: isprint
};
files_file_list.push(file_entry);
}
}
}
files_build_display_filelist();
}

function files_directSD_list_success(response_text) {
var error = false;
var response;
document.getElementById('files_navigation_buttons').style.display = "block";
try {
response = JSON.parse(response_text);
} catch (e) {
console.error("Parsing error:", e);
error = true;
}
if (error || typeof response.status == 'undefined') {
files_directSD_list_failed(406, translate_text_item("Wrong data", true));
return;
}
files_file_list = [];
files_status_list = [];
if (typeof response.files != 'undefined') {
for (var i = 0; i < response.files.length; i++) {
var file_name = "";
var isdirectory = false;
var fsize = "";
if (response.files[i].size == "-1") isdirectory = true;
else fsize = response.files[i].size;
if (target_firmware == "marlin") {
file_name = response.files[i].shortname;
} else {
file_name = response.files[i].name;
}
var isprint = files_showprintbutton(file_name, isdirectory);
var file_entry = {
name: file_name,
sdname: response.files[i].name,
size: fsize,
isdir: isdirectory,
datetime: response.files[i].datetime,
isprintable: isprint
};
files_file_list.push(file_entry);
}
}
var vtotal = "-1";
var vused = "-1";
var voccupation = "-1";
if (typeof response.total != 'undefined') vtotal = response.total;
if (typeof response.used != 'undefined') vused = response.used;
if (typeof response.occupation != 'undefined') voccupation = response.occupation;
files_status_list.push({
status: translate_text_item(response.status),
path: response.path,
used: vused,
total: vtotal,
occupation: voccupation
});
files_build_display_filelist();
}

function files_serial_M20_list_failed(error_code, response) {
document.getElementById('files_navigation_buttons').style.display = "block";
if (esp_error_code !=0){
alertdlg (translate_text_item("Error") + " (" + esp_error_code + ")", esp_error_message);
esp_error_code = 0;
} else {
alertdlg (translate_text_item("Error"), translate_text_item("No connection"));
}
files_build_display_filelist(false);
}

function files_serial_ls_list_failed(error_code, response) {
files_serial_M20_list_failed(error_code, response);
}

function files_directSD_list_failed(error_code, response) {
files_serial_M20_list_failed(error_code, response);
}

function need_up_level() {
if (target_firmware == "smoothieware" && (files_currentPath == primary_sd || files_currentPath == secondary_sd)) return false;
if (files_currentPath == "/") return false;
return true;
}

function files_go_levelup() {
var tlist = files_currentPath.split("/");
var path = "/";
var nb = 1;
while (nb < (tlist.length - 2)) {
path += tlist[nb] + "/";
nb++;
}
files_refreshFiles(path, true);
}

function files_build_display_filelist(displaylist) {
var content = "";
document.getElementById('files_uploading_msg').style.display = "none";
if (typeof displaylist == 'undefined') displaylist = true;
document.getElementById('files_list_loader').style.display = "none";
document.getElementById('files_nav_loader').style.display = "none";
if (!displaylist) {
document.getElementById('files_status_sd_status').style.display = "none";
document.getElementById('files_space_sd_status').style.display = "none";
document.getElementById('files_fileList').innerHTML = "";
document.getElementById('files_fileList').style.display = "none";
return;
}
if (need_up_level()) {
content += "<li class='list-group-item list-group-hover' style='cursor:pointer' onclick='files_go_levelup()''>";
content += "<span >" + get_icon_svg("level-up") + "</span>&nbsp;&nbsp;<span translate>Up...</span>";
content += "</li>";
}
files_file_list.sort(function(a, b) {
return compareStrings(a.name, b.name);
});
for (var index = 0; index < files_file_list.length; index++) {
if (files_file_list[index].isdir == false) content += files_build_file_line(index);
}
for (index = 0; index < files_file_list.length; index++) {
if (files_file_list[index].isdir) content += files_build_file_line(index);
}
document.getElementById('files_fileList').style.display = "block";
document.getElementById('files_fileList').innerHTML = content;
if ((files_status_list.length == 0) && (files_error_status != "")) {
files_status_list.push({
status: files_error_status,
path: files_currentPath,
used: "-1",
total: "-1",
occupation: "-1"
});
}
if (files_status_list.length > 0) {
if (files_status_list[0].total != "-1") {
document.getElementById('files_sd_status_total').innerHTML = files_status_list[0].total;
document.getElementById('files_sd_status_used').innerHTML = files_status_list[0].used;
document.getElementById('files_sd_status_occupation').value = files_status_list[0].occupation;
document.getElementById('files_sd_status_percent').innerHTML = files_status_list[0].occupation;
document.getElementById('files_space_sd_status').style.display = "table-row";
} else {
document.getElementById('files_space_sd_status').style.display = "none";
}
if ((files_error_status != "") && ((files_status_list[0].status.toLowerCase() == "ok") || (files_status_list[0].status.length == 0))) {
files_status_list[0].status = files_error_status;
}
files_error_status = "";
if (files_status_list[0].status.toLowerCase() != "ok") {
document.getElementById('files_sd_status_msg').innerHTML = translate_text_item(files_status_list[0].status, true);
document.getElementById('files_status_sd_status').style.display = "table-row";
} else {
document.getElementById('files_status_sd_status').style.display = "none";
}
} else document.getElementById('files_space_sd_status').style.display = "none";
}

function files_progress() {
var command = "progress";
if (target_firmware != "smoothieware") command = "M27";
SendPrinterCommand(command);
}

function files_abort() {
var command = "abort";
if (target_firmware != "smoothieware") {
if ((target_firmware == "marlin") || (target_firmware == "marlinkimbra")) {
command = "M108\nM108\nM108\nM524\nM27";
} if (target_firmware == "marlin-embedded") {
command = "M108\nM108\nM108\nM524\nM27";
} else command = "M112";
}
SendPrinterCommand(command);
}

function files_select_upload() {
document.getElementById('files_input_file').click();
}

function files_check_if_upload() {
var canupload = true;
var files = document.getElementById("files_input_file").files;
if (target_firmware == "marlin" && !direct_sd) {
for (var i = 0; i < files.length; i++) {
var filename = files[i].name;
//check base name can only by 8
var sizename = filename.indexOf(".");
if (sizename == -1) sizename = filename.length;
if (sizename > 8) canupload = false;
//check extension cano be more than 4 ".xxx"
if ((filename.length - sizename) > 4) canupload = false;
//check only one dot
if (filename.indexOf(".") != filename.lastIndexOf(".")) canupload = false;
}
if (canupload == false) {
alertdlg(translate_text_item("Error"), translate_text_item("Please use 8.3 filename only."));
return;
}
}
if (direct_sd && !(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) {
SendPrinterCommand("[ESP200]", false, process_check_sd_presence);
} else {
//try ls
if (target_firmware == "smoothieware") {
var cmd = "ls " + cleanpath(files_currentPath);
SendPrinterCommand(cmd, false, process_check_sd_presence);
} else { //no reliable way to know SD is present or not so let's upload
files_start_upload();
}
}
}

function process_check_sd_presence(answer) {
//console.log(answer);
//for direct SD there is a SD check
if (direct_sd && !(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) {
if (answer.indexOf("o SD card") > -1) {
alertdlg(translate_text_item("Upload failed"), translate_text_item("No SD card detected"));
files_error_status = "No SD card"
files_build_display_filelist(false);
document.getElementById('files_sd_status_msg').innerHTML = translate_text_item(files_error_status, true);
document.getElementById('files_status_sd_status').style.display = "table-row";
} else files_start_upload();
} else { //for smoothiware ls say no directory
if (target_firmware == "smoothieware") {
if (answer.indexOf("ould not open directory") > -1) {
alertdlg(translate_text_item("Upload failed"), translate_text_item("No SD card detected"));
files_error_status = "No SD card"
files_build_display_filelist(false);
document.getElementById('files_sd_status_msg').innerHTML = translate_text_item(files_error_status, true);
document.getElementById('files_status_sd_status').style.display = "table-row";
} else files_start_upload();
} else files_start_upload();
}
//no check for marlin / repetier as no reliable test IFAIK
}

function files_start_upload() {
if (http_communication_locked) {
alertdlg(translate_text_item("Busy..."), translate_text_item("Communications are currently locked, please wait and retry."));
console.log("communication locked");
return;
}
var url = "/upload";
var path = files_currentPath;
if (direct_sd && (target_firmware == "smoothieware") && (files_currentPath.startsWith(primary_sd))) {
path = files_currentPath.substring(primary_sd.length);
}
if (!direct_sd || (target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) {
url = "/upload_serial";
if (target_firmware == "smoothieware") {
if (files_currentPath.startsWith(secondary_sd)) path = files_currentPath.substring(secondary_sd.length);
else path = files_currentPath.substring(primary_sd.length);
}
}
//console.log("upload from " + path );
var files = document.getElementById("files_input_file").files;

if (files.value == "" || typeof files[0].name === 'undefined') {
console.log("nothing to upload");
return;
}
var formData = new FormData();

formData.append('path', path);
for (var i = 0; i < files.length; i++) {
var file = files[i];
var arg = path + file.name + "S";
//append file size first to check updload is complete
formData.append(arg, file.size);
formData.append('myfile[]', file, path + file.name);
//console.log( path +file.name);
}
files_error_status = "Upload " + file.name;
document.getElementById('files_currentUpload_msg').innerHTML = file.name;
document.getElementById('files_uploading_msg').style.display = "block";
document.getElementById('files_navigation_buttons').style.display = "none";
if (direct_sd && !(target_firmware == "smoothieware" && files_currentPath.startsWith(secondary_sd))) {
SendFileHttp(url, formData, FilesUploadProgressDisplay, files_directSD_list_success, files_directSD_list_failed);
//console.log("send file");
} else {
SendFileHttp(url, formData, FilesUploadProgressDisplay, files_proccess_and_update, files_serial_M20_list_failed);
}
document.getElementById("files_input_file").value = "";
}


function FilesUploadProgressDisplay(oEvent) {
if (oEvent.lengthComputable) {
var percentComplete = (oEvent.loaded / oEvent.total) * 100;
document.getElementById('files_prg').value = percentComplete;
document.getElementById('files_percent_upload').innerHTML = percentComplete.toFixed(0);
} else {
// Impossible because size is unknown
}
}

</script>
<script>
//removeIf(en_lang_disabled)
//english
var englishtrans = {
"en":"English",
"STA":"Client Station",
"AP":"Access Point",
"BT":"Bluetooth",
"Hold:0":"Hold complete. Ready to resume.",
"Hold:1":"Hold in-progress. Reset will throw an alarm.",
"Door:0":"Door closed. Ready to resume.",
"Door:1":"Machine stopped. Door still ajar. Can't resume until closed.",
"Door:2":"Door opened. Hold (or parking retract) in-progress. Reset will throw an alarm.",
"Door:3":"Door closed and resuming. Restoring from park, if applicable. Reset will throw an alarm.",
"ALARM:1":"Hard limit has been triggered. Machine position is likely lost due to sudden halt. Re-homing is highly recommended.",
"ALARM:2":"Soft limit alarm. G-code motion target exceeds machine travel. Machine position retained. Alarm may be safely unlocked, click the Reset Button.",
"ALARM:3":"Reset while in motion. Machine position is likely lost due to sudden halt. Re-homing is highly recommended.",
"ALARM:4":"Probe fail. Probe is not in the expected initial state before starting probe cycle.",
"ALARM:5":"Probe fail. Probe did not contact the workpiece within the programmed travel for G38.2 and G38.4.",
"ALARM:6":"Homing fail. The active homing cycle was reset.",
"ALARM:7":"Homing fail. Safety door was opened during homing cycle.",
"ALARM:8":"Homing fail. Pull off travel failed to clear limit switch. Try increasing pull-off setting or check wiring.",
"ALARM:9":"Homing fail. Could not find limit switch within search distances. Try increasing max travel, decreasing pull-off distance, or check wiring.",
"error:1":"G-code words consist of a letter and a value. Letter was not found.",
"error:2":"Missing the expected G-code word value or numeric value format is not valid.",
"error:3":"Grbl '$' system command was not recognized or supported.",
"error:4":"Negative value received for an expected positive value.",
"error:5":"Homing cycle failure. Homing is not enabled via settings.",
"error:6":"Minimum step pulse time must be greater than 3usec.",
"error:7":"An EEPROM read failed. Auto-restoring affected EEPROM to default values.",
"error:8":"Grbl '$' command cannot be used unless Grbl is IDLE. Ensures smooth operation during a job.",
"error:9":"G-code commands are locked out during alarm or jog state.",
"error:10":"Soft limits cannot be enabled without homing also enabled.",
"error:11":"Max characters per line exceeded. Received command line was not executed.",
"error:12":"Grbl '$' setting value cause the step rate to exceed the maximum supported.",
"error:13":"Safety door detected as opened and door state initiated.",
"error:14":"Build info or startup line exceeded EEPROM line length limit. Line not stored.",
"error:15":"Jog target exceeds machine travel. Jog command has been ignored.",
"error:16":"Jog command has no '=' or contains prohibited g-code.",
"error:17":"Laser mode requires PWM output.",
"error:20":"Unsupported or invalid g-code command found in block.",
"error:21":"More than one g-code command from same modal group found in block.",
"error:22":"Feed rate has not yet been set or is undefined.",
"error:23":"G-code command in block requires an integer value.",
"error:24":"More than one g-code command that requires axis words found in block.",
"error:25":"Repeated g-code word found in block.",
"error:26":"No axis words found in block for g-code command or current modal state which requires them.",
"error:27":"Line number value is invalid.",
"error:28":"G-code command is missing a required value word.",
"error:29":"G59.x work coordinate systems are not supported.",
"error:30":"G53 only allowed with G0 and G1 motion modes.",
"error:31":"Axis words found in block when no command or current modal state uses them.",
"error:32":"G2 and G3 arcs require at least one in-plane axis word.",
"error:33":"Motion command target is invalid.",
"error:34":"Arc radius value is invalid.",
"error:35":"G2 and G3 arcs require at least one in-plane offset word.",
"error:36":"Unused value words found in block.",
"error:37":"G43.1 dynamic tool length offset is not assigned to configured tool length axis.",
"error:38":"Tool number greater than max supported value.",
"error:60":"SD failed to mount",
"error:61":"SD card failed to open file for reading",
"error:62":"SD card failed to open directory",
"error:63":"SD Card directory not found",
"error:64":"SD Card file empty",
"error:70":"Bluetooth failed to start",
};
//endRemoveIf(en_lang_disabled)

</script>
<!--endRemoveIf(cleanheader)-->
<!-- smoosh -->
<script>
var ESP3D_authentication = false;
var page_id = "";
var convertDHT2Fahrenheit = false;
var ws_source;
var event_source;
var log_off = false;
var async_webcommunication = false;
var websocket_port = 0;
var websocket_ip = "";
var esp_hostname = "ESP3D WebUI";
var EP_HOSTNAME;
var EP_STA_SSID;
var EP_STA_PASSWORD;
var EP_STA_IP_MODE;
var EP_STA_IP_VALUE;
var EP_STA_GW_VALUE;
var EP_STA_MK_VALUE;
var EP_WIFI_MODE;
var EP_AP_SSID;
var EP_AP_PASSWORD;
var EP_AP_IP_VALUE;
var EP_BAUD_RATE = 112;
var EP_AUTH_TYPE = 119;
var EP_TARGET_FW = 461;
var EP_IS_DIRECT_SD = 850;
var EP_PRIMARY_SD = 851;
var EP_SECONDARY_SD = 852;
var EP_DIRECT_SD_CHECK = 853;
var SETTINGS_AP_MODE = 1;
var SETTINGS_STA_MODE = 2;
var interval_ping = -1;
var last_ping = 0;
var enable_ping = true;
var esp_error_message ="";
var esp_error_code = 0;

function beep(duration, frequency) {
var audioCtx;
if (typeof window.AudioContext !== 'undefined') {
audioCtx = new window.AudioContext();
} else if (typeof window.webkitAudioContext() !== 'undefined') {
audioCtx = new window.webkitAudioContext();
} else if (typeof window.audioContext !== 'undefined') {
audioCtx = new window.audioContext();
}
// = new (window.AudioContext() || window.webkitAudioContext() || window.audioContext());
var oscillator = audioCtx.createOscillator();
var gainNode = audioCtx.createGain();
oscillator.connect(gainNode);
gainNode.connect(audioCtx.destination);
gainNode.gain.value = 1;
oscillator.frequency.value = frequency;
oscillator.start();
setTimeout(function() {
oscillator.stop();
}, duration);
}

function Init_events(e) {
page_id = e.data;
console.log("connection id = " + page_id);
}

function ActiveID_events(e) {
if (page_id != e.data) {
Disable_interface();
console.log("I am disabled");
event_source.close();
}
}

function DHT_events(e) {
Handle_DHT(e.data);
}
//Check for IE
//Edge
//Chrome
function browser_is(bname) {
var ua = navigator.userAgent;
switch (bname) {
case "IE":
if (ua.indexOf("Trident/") != -1) return true;
break;
case "Edge":
if (ua.indexOf("Edge") != -1) return true;
break;
case "Chrome":
if (ua.indexOf("Chrome") != -1) return true;
break;
case "Firefox":
if (ua.indexOf("Firefox") != -1) return true;
break;
case "MacOSX":
if (ua.indexOf("Mac OS X") != -1) return true;
break;
default:
return false;
}
return false;
}

window.onload = function() {
//to check if javascript is disabled like in anroid preview
document.getElementById('loadingmsg').style.display = 'none';
console.log("Connect to board");
connectdlg();
//ugly hack for IE
console.log(navigator.userAgent);
if (browser_is("IE")) {
document.getElementById('control-body').className = "panel-body";
document.getElementById('extruder-body').className = "panel-body panel-height";
document.getElementById('command-body').className = "panel-body";
document.getElementById('file-body').className = "panel-body panel-height panel-max-height panel-scroll";
}
};

var wsmsg = "";

function startSocket() {
try {
if (async_webcommunication) {
ws_source = new WebSocket('ws://' + document.location.host + '/ws', ['arduino']);
} else {
console.log("Socket is " + websocket_ip + ":" + websocket_port);
ws_source = new WebSocket('ws://' + websocket_ip + ':' + websocket_port, ['arduino']);
}
} catch (exception) {
console.error(exception);
}
ws_source.binaryType = "arraybuffer";
ws_source.onopen = function(e) {
console.log("Connected");
};
ws_source.onclose = function(e) {
console.log("Disconnected");
//seems sometimes it disconnect so wait 3s and reconnect
//if it is not a log off
if (!log_off) setTimeout(startSocket, 3000);
};
ws_source.onerror = function(e) {
//Monitor_output_Update("[#]Error "+ e.code +" " + e.reason + "\n");
console.log("ws error", e);
};
ws_source.onmessage = function(e) {
var msg = "";
//bin
if (e.data instanceof ArrayBuffer) {
var bytes = new Uint8Array(e.data);
for (var i = 0; i < bytes.length; i++) {
msg += String.fromCharCode(bytes[i]);
if ((bytes[i] == 10) || (bytes[i] == 13)) {
wsmsg += msg;
Monitor_output_Update(wsmsg);
process_socket_response(wsmsg);
//msg = wsmsg.replace("\n", "");
//wsmsg = msg.replace("\r", "");
if (!((wsmsg.startsWith("ok T:") || wsmsg.startsWith("X:") || wsmsg.startsWith("FR:") ||wsmsg.startsWith("echo:E0 Flow"))))console.log(wsmsg);
wsmsg = "";
msg = "";
}
}
wsmsg += msg;
} else {
msg += e.data;
var tval = msg.split(":");
if (tval.length >= 2) {
if (tval[0] == 'CURRENT_ID') {
page_id = tval[1];
console.log("connection id = " + page_id);
}
if (enable_ping) {
if (tval[0] == 'PING') {
page_id = tval[1];
console.log("ping from id = " + page_id);
last_ping = Date.now();
if (interval_ping == -1) interval_ping = setInterval(function() {
check_ping();
}, 10 * 1000);
}
}
if (tval[0] == 'ACTIVE_ID') {
if (page_id != tval[1]) {
Disable_interface();
}
}
if (tval[0] == 'DHT') {
Handle_DHT(tval[1]);
}
if (tval[0] == 'ERROR') {
esp_error_message = tval[2];
esp_error_code = tval[1];
console.log("ERROR: " + tval[2] + " code:" +  tval[1]);
CancelCurrentUpload();
}
if (tval[0] == 'MSG') {
var error_message = tval[2];
var error_code = tval[1];
console.log("MSG: " + tval[2] + " code:" +  tval[1]);
}
}

}
//console.log(msg);

};
}

function check_ping() {
//if ((Date.now() - last_ping) > 20000){
//Disable_interface(true);
//console.log("No heart beat for more than 20s");
//}
}

function disable_items(item, state) {
var liste = item.getElementsByTagName("*");
for (i = 0; i < liste.length; i++) liste[i].disabled = state;
}

function ontogglePing(forcevalue) {
if (typeof forcevalue != 'undefined') enable_ping = forcevalue;
else enable_ping = !enable_ping;
if (enable_ping) {
if (interval_ping != -1) clearInterval(interval_ping);
last_ping = Date.now();
interval_ping = setInterval(function() {
check_ping();
}, 10 * 1000);
console.log("enable ping");
} else {
if (interval_ping != -1) clearInterval(interval_ping);
console.log("disable ping");
}
}

function ontoggleLock(forcevalue) {
if (typeof forcevalue != 'undefined') document.getElementById('lock_UI').checked = forcevalue;
if (document.getElementById('lock_UI').checked) {
document.getElementById('lock_UI_btn_txt').innerHTML = translate_text_item("Unlock interface");
disable_items(document.getElementById('maintab'), true);
disable_items(document.getElementById('configtab'), true);
document.getElementById('progress_btn').disabled = false;
document.getElementById('clear_monitor_btn').disabled = false;
document.getElementById('monitor_enable_verbose_mode').disabled = false;
document.getElementById('monitor_enable_autoscroll').disabled = false;
document.getElementById('settings_update_fw_btn').disabled = true;
document.getElementById('settings_restart_btn').disabled = true;
disable_items(document.getElementById('JogUI'), false);
document.getElementById('JogUI').style.pointerEvents = 'none';
} else {
document.getElementById('lock_UI_btn_txt').innerHTML = translate_text_item("Lock interface");
disable_items(document.getElementById('maintab'), false);
disable_items(document.getElementById('configtab'), false);
document.getElementById('settings_update_fw_btn').disabled = false;
document.getElementById('settings_restart_btn').disabled = false;
document.getElementById('JogUI').style.pointerEvents = 'auto';
}
}


function Handle_DHT(data) {
var tdata = data.split(" ");
if (tdata.length != 2) {
console.log("DHT data invalid: " + data);
return;
}
var temp = (convertDHT2Fahrenheit) ? (parseFloat(tdata[0]) * 1.8) + 32 : parseFloat(tdata[0]);
document.getElementById('DHT_humidity').innerHTML = parseFloat(tdata[1]).toFixed(2).toString() + "%";
var temps = temp.toFixed(2).toString() + "&deg;";
if (convertDHT2Fahrenheit) temps += "F";
else temps += "C";
document.getElementById('DHT_temperature').innerHTML = temps;
}
//window.addEventListener("resize", OnresizeWindow);

//function OnresizeWindow(){
//}
var total_boot_steps = 5;
var current_boot_steps = 0;

function display_boot_progress(step) {
var val = 1;
if (typeof step != 'undefined') val = step;
current_boot_steps += val;
//console.log(current_boot_steps);
//console.log(Math.round((current_boot_steps*100)/total_boot_steps));
document.getElementById('load_prg').value = Math.round((current_boot_steps * 100) / total_boot_steps);
}


function Disable_interface(lostconnection) {
var lostcon = false;
if (typeof lostconnection != "undefined") lostcon = lostconnection;
//block all communication
http_communication_locked = true;
log_off = true;
if (interval_ping != -1) clearInterval(interval_ping);
//clear all waiting commands
clear_cmd_list();
//no camera
document.getElementById('camera_frame').src = "";
//No auto check
on_autocheck_position(false);
on_autocheck_temperature(false);
on_autocheck_status(false);
if (async_webcommunication) {
event_source.removeEventListener('ActiveID', ActiveID_events, false);
event_source.removeEventListener('InitID', Init_events, false);
event_source.removeEventListener('DHT', DHT_events, false);
}
ws_source.close();
document.title += "(" + decode_entitie(translate_text_item("Disabled")) + ")";
UIdisableddlg(lostcon);
}

function update_UI_firmware_target() {
var fwName;
initpreferences();
document.getElementById('control_x_position_label').innerHTML = "X";
document.getElementById('control_y_position_label').innerHTML = "Y";
document.getElementById('control_z_position_label').innerHTML = "Z";
document.getElementById('config_smoothie_nav').style.display = 'none';
showAxiscontrols();
if (target_firmware == "repetier") {
fwName = "Repetier";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "repetier4davinci") {
fwName = "Repetier for Davinci";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "smoothieware") {
fwName = "Smoothieware";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('config_smoothie_nav').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "grbl-embedded") {
fwName = "GRBL ESP32";
last_grbl_pos = "";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'none';
document.getElementById('progress_btn').style.display = 'none';
document.getElementById('abort_btn').style.display = 'none';
document.getElementById('motor_off_control').style.display = 'none';
document.getElementById('tab_title_configuration').innerHTML = "<span translate>GRBL configuration</span>";
document.getElementById('tab_printer_configuration').innerHTML = "<span translate>GRBL</span>";
document.getElementById('files_input_file').accept = " .g, .gco, .gcode, .txt, .ncc, .G, .GCO, .GCODE, .TXT, .NC";
document.getElementById('zero_xyz_btn').style.display = 'block';
document.getElementById('zero_x_btn').style.display = 'block';
document.getElementById('zero_y_btn').style.display = 'block';
if (grblaxis >2) {
//document.getElementById('control_z_position_display').style.display = 'block';
document.getElementById('control_z_position_label').innerHTML = "Zw";
document.getElementById('zero_xyz_btn_txt').innerHTML +="Z";
grblzerocmd += " Z0";

} else {
hideAxiscontrols();
document.getElementById('preferences_control_z_velocity_group').style.display = 'none';
}
if (grblaxis >3) {

document.getElementById('zero_xyz_btn_txt').innerHTML +="A";
grblzerocmd += " A0";
build_axis_selection();
document.getElementById('preferences_control_a_velocity_group').style.display = 'block';
document.getElementById('positions_labels2').style.display = 'inline-grid';
document.getElementById('control_a_position_display').style.display = 'block';
}
if (grblaxis >4) {
document.getElementById('control_b_position_display').style.display = 'block';
document.getElementById('zero_xyz_btn_txt').innerHTML +="B";
grblzerocmd += " B0";
document.getElementById('preferences_control_b_velocity_group').style.display = 'block';
}
if (grblaxis >5) {
document.getElementById('control_c_position_display').style.display = 'block';
document.getElementById('zero_xyz_btn_txt').innerHTML +="C";
document.getElementById('preferences_control_c_velocity_group').style.display = 'block';

} else {
document.getElementById('control_c_position_display').style.display = 'none';
}
document.getElementById('grblPanel').style.display = 'flex';
document.getElementById('FW_github').href = 'https://github.com/bdring/Grbl_Esp32';
document.getElementById('settings_filters').style.display = 'none';
document.getElementById('control_x_position_label').innerHTML = "Xw";
document.getElementById('control_y_position_label').innerHTML = "Yw";


} else if (target_firmware == "marlin-embedded") {
fwName = "Marlin ESP32";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('FW_github').href = 'https://github.com/MarlinFirmware/Marlin';
document.getElementById('settings_filters').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "marlin") {
fwName = "Marlin";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "marlinkimbra") {
fwName = "Marlin Kimbra";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('auto_check_control').style.display = 'flex';
document.getElementById('motor_off_control').style.display = 'table-row';
document.getElementById('progress_btn').style.display = 'table-row';
document.getElementById('abort_btn').style.display = 'table-row';
document.getElementById('zero_xyz_btn').style.display = 'none';
document.getElementById('zero_x_btn').style.display = 'none';
document.getElementById('zero_y_btn').style.display = 'none';
document.getElementById('zero_z_btn').style.display = 'none';
document.getElementById('grblPanel').style.display = 'none';
document.getElementById('control_xm_position_row').style.display = 'none';
document.getElementById('control_ym_position_row').style.display = 'none';
document.getElementById('control_zm_position_row').style.display = 'none';
} else if (target_firmware == "grbl") {
fwName = "Grbl";
document.getElementById('configtablink').style.display = 'block';
document.getElementById('tab_title_configuration').innerHTML = "<span translate>GRBL configuration</span>";
document.getElementById('tab_printer_configuration').innerHTML = "<span translate>GRBL</span>";
document.getElementById('files_input_file').accept = " .g, .gco, .gcode, .txt, .ncc, .G, .GCO, .GCODE, .TXT, .NC";
document.getElementById('auto_check_control').style.display = 'none';
document.getElementById('motor_off_control').style.display = 'none';
document.getElementById('progress_btn').style.display = 'none';
document.getElementById('abort_btn').style.display = 'none';
document.getElementById('zero_xyz_btn').style.display = 'block';
document.getElementById('zero_x_btn').style.display = 'block';
document.getElementById('zero_y_btn').style.display = 'block';
document.getElementById('zero_z_btn').style.display = 'block';
document.getElementById('grblPanel').style.display = 'flex';
document.getElementById('control_x_position_label').innerHTML = "Xw";
document.getElementById('control_y_position_label').innerHTML = "Yw";
document.getElementById('control_z_position_label').innerHTML = "Zw";
document.getElementById('control_xm_position_row').style.display = 'table-row';
document.getElementById('control_ym_position_row').style.display = 'table-row';
document.getElementById('control_zm_position_row').style.display = 'table-row';
} else {
fwName = "Unknown";
document.getElementById('configtablink').style.display = 'none';
}
if ((target_firmware == "grbl-embedded") || target_firmware == "marlin-embedded") {
EP_HOSTNAME = "ESP_HOSTNAME";
EP_STA_SSID = "STA_SSID";
EP_STA_PASSWORD = "STA_PWD";
EP_STA_IP_MODE = "STA_IP_MODE";
EP_STA_IP_VALUE = "STA_IP";
EP_STA_GW_VALUE = "STA_GW";
EP_STA_MK_VALUE = "STA_MK";
if (target_firmware == "grbl-embedded") {
EP_WIFI_MODE = "RADIO_MODE";
} else {
EP_WIFI_MODE = "WIFI_MODE";
}
EP_AP_SSID = "AP_SSID";
EP_AP_PASSWORD = "AP_PWD";
EP_AP_IP_VALUE = "AP_IP";
SETTINGS_AP_MODE = 2;
SETTINGS_STA_MODE = 1;
} else {
EP_HOSTNAME = 130;
EP_STA_SSID = 1;
EP_STA_PASSWORD = 34;
EP_STA_IP_MODE = 99;
EP_STA_IP_VALUE = 100;
EP_STA_MK_VALUE = 104;
EP_STA_GW_VALUE = 108;
EP_WIFI_MODE = 0;
EP_AP_SSID = 218;
EP_AP_PASSWORD = 251;
EP_AP_IP_VALUE = 316;
SETTINGS_AP_MODE = 1;
SETTINGS_STA_MODE = 2;
}
if (typeof document.getElementById('fwName') != "undefined") document.getElementById('fwName').innerHTML = fwName;
//SD image or not
if (direct_sd && typeof document.getElementById('showSDused') != "undefined") document.getElementById('showSDused').innerHTML = "<svg width='1.3em' height='1.2em' viewBox='0 0 1300 1200'><g transform='translate(50,1200) scale(1, -1)'><path  fill='#777777' d='M200 1100h700q124 0 212 -88t88 -212v-500q0 -124 -88 -212t-212 -88h-700q-124 0 -212 88t-88 212v500q0 124 88 212t212 88zM100 900v-700h900v700h-900zM500 700h-200v-100h200v-300h-300v100h200v100h-200v300h300v-100zM900 700v-300l-100 -100h-200v500h200z M700 700v-300h100v300h-100z' /></g></svg>";
else document.getElementById('showSDused').innerHTML = "";
return fwName;
}

function Set_page_title(page_title) {
if (typeof page_title != 'undefined') esp_hostname = page_title;
document.title = esp_hostname;
}

function initUI() {
console.log("Init UI");
if (ESP3D_authentication) connectdlg(false);
AddCmd(display_boot_progress);
//initial check
if ((typeof target_firmware == "undefined") || (typeof web_ui_version == "undefined") || (typeof direct_sd == "undefined")) alert('Missing init data!');
//check FW
update_UI_firmware_target();
//set title using hostname
Set_page_title();
//update UI version
if (typeof document.getElementById('UI_VERSION') != "undefined") document.getElementById('UI_VERSION').innerHTML = web_ui_version;
//update FW version
if (typeof document.getElementById('FW_VERSION') != "undefined") document.getElementById('FW_VERSION').innerHTML = fw_version;
// Get the element with id="defaultOpen" and click on it
document.getElementById("maintablink").click();
if ((target_firmware == "grbl-embedded") || (target_firmware == "grbl-embedded")) {
if (typeof document.getElementById("grblcontroltablink") !== 'undefined') {
document.getElementById("grblcontroltablink").click();
}
}
//endRemoveIf(production)
initUI_2();
}

function initUI_2() {
AddCmd(display_boot_progress);
//get all settings from ESP3D
console.log("Get settings");
//query settings but do not update list in case wizard is showed
refreshSettings(true);
initUI_3();
}

function initUI_3() {
AddCmd(display_boot_progress);
//init panels
console.log("Get macros");
init_controls_panel();
init_grbl_panel();
console.log("Get preferences");
getpreferenceslist();
initUI_4();
}

function initUI_4() {
AddCmd(display_boot_progress);
init_temperature_panel();
init_extruder_panel();
init_command_panel();
init_files_panel(true);     // prh - changed from false to true
//check if we need setup
if (target_firmware == "???") {
console.log("Launch Setup");
AddCmd(display_boot_progress);
closeModal("Connection successful");
setupdlg();
} else {
//wizard is done UI can be updated
setup_is_done = true;
do_not_build_settings = false;
AddCmd(display_boot_progress);
build_HTML_setting_list(current_setting_filter);
AddCmd(closeModal);
AddCmd(show_main_UI);
}
}

function show_main_UI() {
document.getElementById('main_ui').style.display = 'block';
}

function compareStrings(a, b) {
// case-insensitive comparison
a = a.toLowerCase();
b = b.toLowerCase();
return (a < b) ? -1 : (a > b) ? 1 : 0;
}

function compareInts(a, b) {
return (a < b) ? -1 : (a > b) ? 1 : 0;
}

function HTMLEncode(str) {
var i = str.length,
aRet = [];

while (i--) {
var iC = str[i].charCodeAt();
if (iC < 65 || iC > 127 || (iC > 90 && iC < 97)) {
if (iC == 65533) iC = 176;
aRet[i] = '&#' + iC + ';';
} else {
aRet[i] = str[i];
}
}
return aRet.join('');
}

function decode_entitie(str_text) {
var tmpelement = document.createElement('div');
tmpelement.innerHTML = str_text;
str_text = tmpelement.textContent;
tmpelement.textContent = '';
return str_text;
}

var socket_response = "";
var socket_is_settings = false;

function process_socket_response(msg) {

if (target_firmware == "grbl-embedded") {
if (msg.startsWith("<")) {
grbl_process_status(msg);
} else if (msg.startsWith("[PRB:")) {
grbl_GetProbeResult(msg);
} else if (msg.startsWith("[GC:")) {
console.log(msg);
} else if (msg.startsWith("error:") || msg.startsWith("ALARM:") || msg.startsWith("Hold:") || msg.startsWith("Door:")) {
grbl_process_msg(msg);
} else if (msg.startsWith("Grbl 1.1f [")) {
grbl_reset_detected(msg);
} else if (socket_is_settings) socket_response += msg;

if (!socket_is_settings && msg.startsWith("$0=")) {
socket_is_settings = true;
socket_response = msg;
}

if (msg.startsWith("ok")) {
if (socket_is_settings) {
//update settings
getESPconfigSuccess(socket_response);
socket_is_settings = false;
}

}
} else {
if (target_firmware == "marlin-embedded") {
if (socket_is_settings && !(msg.startsWith("echo:Unknown command:") || msg.startsWith("echo:enqueueing"))) socket_response += msg+"\n";
if (!socket_is_settings && (msg.startsWith("  G21") || msg.startsWith("  G20") || msg.startsWith("echo:  G21") || msg.startsWith("echo:  G20"))) {
socket_is_settings = true;
socket_response = msg + "\n";
//to stop waiting for data
console.log("Got settings Start");
}
}
if (msg.startsWith("ok T:") || msg.startsWith(" T:")|| msg.startsWith("T:")) {
if (!graph_started)start_graph_output();
process_Temperatures(msg);
}
if (msg.startsWith("X:")) {
process_Position(msg);
}
if (msg.startsWith("FR:")) {
process_feedRate(msg);
}

if (msg.startsWith("echo:E") && (msg.indexOf("Flow:")!=-1)){
process_flowdRate(msg);
}

if (msg.startsWith("[esp3d]")) {
process_Custom(msg); // handles custom messages sent via M118
}
if (msg.startsWith("ok")) {
if (socket_is_settings) {
//update settings
console.log("Got settings End");
console.log(socket_response);
getESPconfigSuccess(socket_response);
socket_is_settings = false;
}
}
}

}

</script>
<!-- endsmoosh -->
</body>
</html>
